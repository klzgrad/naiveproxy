# Copyright 2019 The Chromium Authors. All rights reserved.
# Use of this source code is governed by a BSD-style license that can be
# found in the LICENSE file.

source_set("browser_view") {
  configs += [ "//build/config/compiler:enable_arc" ]
  sources = [
    "browser_coordinator.h",
    "browser_coordinator.mm",
    "browser_view_controller+private.h",
    "browser_view_controller.h",
    "browser_view_controller.mm",
    "browser_view_controller_dependency_factory.h",
    "browser_view_controller_dependency_factory.mm",
    "browser_view_controller_helper.h",
    "browser_view_controller_helper.mm",
    "key_commands_provider.h",
    "key_commands_provider.mm",
  ]
  deps = [
    "//base",
    "//base:i18n",
    "//components/bookmarks/browser",
    "//components/feature_engagement/public",
    "//components/image_fetcher/ios",
    "//components/language/ios/browser",
    "//components/omnibox/browser",
    "//components/reading_list/core",
    "//components/search_engines",
    "//components/sessions",
    "//components/signin/core/browser",
    "//components/signin/ios/browser",
    "//components/signin/ios/browser:active_state_manager",
    "//components/strings",
    "//components/translate/core/browser",
    "//components/url_formatter",
    "//ios/chrome/app:tests_hook",
    "//ios/chrome/app/strings",
    "//ios/chrome/browser",
    "//ios/chrome/browser/app_launcher",
    "//ios/chrome/browser/autofill:autofill_internal",
    "//ios/chrome/browser/bookmarks",
    "//ios/chrome/browser/browser_state",
    "//ios/chrome/browser/download",
    "//ios/chrome/browser/feature_engagement",
    "//ios/chrome/browser/find_in_page",
    "//ios/chrome/browser/first_run",
    "//ios/chrome/browser/geolocation:geolocation_internal",
    "//ios/chrome/browser/infobars",
    "//ios/chrome/browser/interstitials",
    "//ios/chrome/browser/language",
    "//ios/chrome/browser/main",
    "//ios/chrome/browser/metrics:metrics_browser_agent",
    "//ios/chrome/browser/metrics:metrics_internal",
    "//ios/chrome/browser/net",
    "//ios/chrome/browser/ntp",
    "//ios/chrome/browser/open_in",
    "//ios/chrome/browser/overlays",
    "//ios/chrome/browser/overlays/public/web_content_area",
    "//ios/chrome/browser/overscroll_actions",
    "//ios/chrome/browser/passwords",
    "//ios/chrome/browser/prefs",
    "//ios/chrome/browser/prerender",
    "//ios/chrome/browser/reading_list",
    "//ios/chrome/browser/search_engines",
    "//ios/chrome/browser/send_tab_to_self",
    "//ios/chrome/browser/sessions",
    "//ios/chrome/browser/sessions:restoration_agent",
    "//ios/chrome/browser/sessions:serialisation",
    "//ios/chrome/browser/signin",
    "//ios/chrome/browser/snapshots",
    "//ios/chrome/browser/ssl",
    "//ios/chrome/browser/store_kit",
    "//ios/chrome/browser/translate",
    "//ios/chrome/browser/ui:feature_flags",
    "//ios/chrome/browser/ui/activity_services:coordinator",
    "//ios/chrome/browser/ui/activity_services/requirements",
    "//ios/chrome/browser/ui/alert_coordinator",
    "//ios/chrome/browser/ui/app_launcher",
    "//ios/chrome/browser/ui/authentication",
    "//ios/chrome/browser/ui/autofill:autofill",
    "//ios/chrome/browser/ui/autofill/form_input_accessory",
    "//ios/chrome/browser/ui/autofill/manual_fill",
    "//ios/chrome/browser/ui/autofill/manual_fill:manual_fill_ui",
    "//ios/chrome/browser/ui/badges:badges_popup_menu",
    "//ios/chrome/browser/ui/bookmarks",
    "//ios/chrome/browser/ui/browser_container",
    "//ios/chrome/browser/ui/browser_container:ui",
    "//ios/chrome/browser/ui/bubble",
    "//ios/chrome/browser/ui/colors",
    "//ios/chrome/browser/ui/commands",
    "//ios/chrome/browser/ui/content_suggestions",
    "//ios/chrome/browser/ui/content_suggestions:content_suggestions_constant",
    "//ios/chrome/browser/ui/context_menu",
    "//ios/chrome/browser/ui/coordinators:chrome_coordinators",
    "//ios/chrome/browser/ui/dialogs:dialogs_internal",
    "//ios/chrome/browser/ui/dialogs:feature_flags",
    "//ios/chrome/browser/ui/download",
    "//ios/chrome/browser/ui/download:features",
    "//ios/chrome/browser/ui/elements:elements_internal",
    "//ios/chrome/browser/ui/find_bar",
    "//ios/chrome/browser/ui/first_run",
    "//ios/chrome/browser/ui/fullscreen",
    "//ios/chrome/browser/ui/fullscreen:feature_flags",
    "//ios/chrome/browser/ui/fullscreen:ui",
    "//ios/chrome/browser/ui/history",
    "//ios/chrome/browser/ui/image_util:web",
    "//ios/chrome/browser/ui/infobars",
    "//ios/chrome/browser/ui/infobars:feature_flags",
    "//ios/chrome/browser/ui/infobars:public",
    "//ios/chrome/browser/ui/keyboard",
    "//ios/chrome/browser/ui/location_bar:location_bar_model_delegate",
    "//ios/chrome/browser/ui/main_content:main_content_ui",
    "//ios/chrome/browser/ui/main_content:main_content_ui_broadcasting_util",
    "//ios/chrome/browser/ui/ntp",
    "//ios/chrome/browser/ui/ntp:coordinator",
    "//ios/chrome/browser/ui/ntp:util",
    "//ios/chrome/browser/ui/omnibox:omnibox_internal",
    "//ios/chrome/browser/ui/omnibox/popup",
    "//ios/chrome/browser/ui/open_in",
    "//ios/chrome/browser/ui/overlays",
    "//ios/chrome/browser/ui/overscroll_actions",
    "//ios/chrome/browser/ui/page_info:coordinator",
    "//ios/chrome/browser/ui/page_info:features",
    "//ios/chrome/browser/ui/page_info/requirements",
    "//ios/chrome/browser/ui/passwords",
    "//ios/chrome/browser/ui/popup_menu",
    "//ios/chrome/browser/ui/presenters",
    "//ios/chrome/browser/ui/print",
    "//ios/chrome/browser/ui/qr_scanner:coordinator",
    "//ios/chrome/browser/ui/reading_list",
    "//ios/chrome/browser/ui/recent_tabs",
    "//ios/chrome/browser/ui/sad_tab",
    "//ios/chrome/browser/ui/sad_tab:coordinator",
    "//ios/chrome/browser/ui/send_tab_to_self",
    "//ios/chrome/browser/ui/settings/autofill",
    "//ios/chrome/browser/ui/settings/sync/utils",
    "//ios/chrome/browser/ui/side_swipe",
    "//ios/chrome/browser/ui/signin_interaction/public",
    "//ios/chrome/browser/ui/snackbar",
    "//ios/chrome/browser/ui/tabs",
    "//ios/chrome/browser/ui/tabs:coordinator",
    "//ios/chrome/browser/ui/tabs/requirements",
    "//ios/chrome/browser/ui/text_zoom",
    "//ios/chrome/browser/ui/text_zoom:text_zoom_ui",
    "//ios/chrome/browser/ui/toolbar",
    "//ios/chrome/browser/ui/toolbar:toolbar_ui",
    "//ios/chrome/browser/ui/toolbar/accessory",
    "//ios/chrome/browser/ui/toolbar/buttons",
    "//ios/chrome/browser/ui/toolbar/fullscreen",
    "//ios/chrome/browser/ui/toolbar/fullscreen:fullscreen_broadcasting_util",
    "//ios/chrome/browser/ui/toolbar/public",
    "//ios/chrome/browser/ui/toolbar/public:feature_flags",
    "//ios/chrome/browser/ui/toolbar_container",
    "//ios/chrome/browser/ui/toolbar_container:feature_flags",
    "//ios/chrome/browser/ui/translate:legacy_translate",
    "//ios/chrome/browser/ui/util",
    "//ios/chrome/browser/ui/util:multiwindow_util",
    "//ios/chrome/browser/ui/voice",
    "//ios/chrome/browser/upgrade",
    "//ios/chrome/browser/url_loading",
    "//ios/chrome/browser/voice:voice",
    "//ios/chrome/browser/web",
    "//ios/chrome/browser/web:feature_flags",
    "//ios/chrome/browser/web:page_placeholder",
    "//ios/chrome/browser/web:tab_helper_delegates",
    "//ios/chrome/browser/web:web_internal",
    "//ios/chrome/browser/web_state_list",
    "//ios/chrome/browser/web_state_list:agents",
    "//ios/chrome/browser/web_state_list/web_usage_enabler",
    "//ios/chrome/browser/webui",
    "//ios/chrome/common",
    "//ios/chrome/common/ui/colors",
    "//ios/chrome/common/ui/util",
    "//ios/components/webui:url_constants",
    "//ios/public/provider/chrome/browser",
    "//ios/public/provider/chrome/browser/ui",
    "//ios/public/provider/chrome/browser/voice",
    "//ios/third_party/material_components_ios",
    "//ios/third_party/webkit",
    "//ios/web",
    "//ios/web/common",
    "//ios/web/public",
    "//ios/web/public/deprecated",
    "//ios/web/public/deprecated:deprecated_web_util",
    "//ui/base",
    "//ui/gfx",
    "//url",

    # Fake dependencies to break cycles
    "//ios/chrome/browser/ui/settings",
  ]
  libs = [
    "MessageUI.framework",
    "Photos.framework",
    "UIKit.framework",
  ]
}

source_set("unit_tests") {
  configs += [ "//build/config/compiler:enable_arc" ]
  testonly = true
  sources = [
    "browser_coordinator_unittest.mm",
    "browser_view_controller_helper_unittest.mm",
    "browser_view_controller_unittest.mm",
    "key_commands_provider_unittest.mm",
  ]
  deps = [
    ":browser_view",
    "//components/bookmarks/browser",
    "//components/bookmarks/test",
    "//components/omnibox/browser:test_support",
    "//components/prefs:test_support",
    "//components/search_engines",
    "//components/sessions",
    "//ios/chrome/app/strings",
    "//ios/chrome/browser",
    "//ios/chrome/browser/bookmarks",
    "//ios/chrome/browser/browser_state:test_support",
    "//ios/chrome/browser/download",
    "//ios/chrome/browser/favicon",
    "//ios/chrome/browser/main:test_support",
    "//ios/chrome/browser/search_engines",
    "//ios/chrome/browser/sessions",
    "//ios/chrome/browser/sessions:restoration_agent",
    "//ios/chrome/browser/sessions:test_support",
    "//ios/chrome/browser/snapshots",
    "//ios/chrome/browser/tabs",
    "//ios/chrome/browser/ui:feature_flags",
    "//ios/chrome/browser/ui/activity_services",
    "//ios/chrome/browser/ui/alert_coordinator",
    "//ios/chrome/browser/ui/browser_container:ui",
    "//ios/chrome/browser/ui/commands",
    "//ios/chrome/browser/ui/download:features",
    "//ios/chrome/browser/ui/fullscreen:feature_flags",
    "//ios/chrome/browser/ui/toolbar/public",
    "//ios/chrome/browser/ui/toolbar/test",
    "//ios/chrome/browser/ui/util",
    "//ios/chrome/browser/url_loading:url_loading",
    "//ios/chrome/browser/web",
    "//ios/chrome/browser/web_state_list",
    "//ios/chrome/browser/web_state_list:test_support",
    "//ios/chrome/browser/web_state_list/web_usage_enabler",
    "//ios/chrome/test:block_cleanup_test",
    "//ios/chrome/test:test_support",
    "//ios/net",
    "//ios/web/public",
    "//ios/web/public/deprecated",
    "//ios/web/public/test",
    "//ios/web/public/test/fakes",
    "//ios/web/web_state:web_state_impl_header",
    "//ios/web/web_state/ui",
    "//net",
    "//net:test_support",
    "//testing/gmock",
    "//testing/gtest",
    "//third_party/ocmock",
    "//ui/base",
    "//ui/base:test_support",
  ]
}

source_set("eg_tests") {
  defines = [ "CHROME_EARL_GREY_1" ]
  configs += [ "//build/config/compiler:enable_arc" ]
  testonly = true
  sources = [ "browser_view_controller_egtest.mm" ]
  deps = [
    ":browser_view",
    "//base",
    "//base/test:test_support",
    "//components/strings",
    "//ios/chrome/app/strings",
    "//ios/chrome/browser/ntp:features",
    "//ios/chrome/browser/tabs",
    "//ios/chrome/browser/ui/bookmarks:bookmarks_ui",
    "//ios/chrome/browser/ui/commands",
    "//ios/chrome/browser/ui/popup_menu:constants",
    "//ios/chrome/browser/ui/table_view",
    "//ios/chrome/browser/ui/util",
    "//ios/chrome/test:eg_test_support",
    "//ios/chrome/test/app:test_support",
    "//ios/chrome/test/earl_grey:test_support",
    "//ios/testing/earl_grey:earl_grey_support",
    "//ios/third_party/earl_grey:earl_grey+link",
    "//ios/third_party/webkit",
    "//ios/web/public/test",
    "//ios/web/public/test/http_server",
    "//ui/base",
    "//url",
  ]
  libs = [
    "UIKit.framework",
    "XCTest.framework",
  ]
}

source_set("eg2_tests") {
  defines = [ "CHROME_EARL_GREY_2" ]
  configs += [
    "//build/config/compiler:enable_arc",
    "//build/config/ios:xctest_config",
  ]
  testonly = true
  sources = [ "browser_view_controller_egtest.mm" ]
  deps = [
    "//base",
    "//base/test:test_support",
    "//components/strings",
    "//ios/chrome/app/strings",
    "//ios/chrome/browser/ntp:features",
    "//ios/chrome/browser/ui/popup_menu:constants",
    "//ios/chrome/test:eg_test_support+eg2",
    "//ios/chrome/test/earl_grey:eg_test_support+eg2",
    "//ios/testing/earl_grey:eg_test_support+eg2",
    "//ios/third_party/earl_grey2:test_lib",
    "//ios/web/public/test/http_server",
    "//ui/base",
    "//url",
  ]
  libs = [ "UIKit.framework" ]
}
