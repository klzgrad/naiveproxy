# Copyright (c) 2020 The Chromium Authors. All rights reserved.
# Use of this source code is governed by a BSD-style license that can be
# found in the LICENSE file.

import("//testing/libfuzzer/fuzzer_test.gni")
import("//third_party/protobuf/proto_library.gni")

source_set("quiche") {
  sources = [
    "src/quic/core/quic_error_codes.cc",
    "src/quic/core/quic_error_codes.h",
  ]

  if (!is_nacl) {
    sources += [
      "src/common/platform/api/quiche_arraysize.h",
      "src/common/platform/api/quiche_endian.h",
      "src/common/platform/api/quiche_export.h",
      "src/common/platform/api/quiche_logging.h",
      "src/common/platform/api/quiche_map_util.h",
      "src/common/platform/api/quiche_optional.h",
      "src/common/platform/api/quiche_ptr_util.h",
      "src/common/platform/api/quiche_str_cat.h",
      "src/common/platform/api/quiche_string_piece.h",
      "src/common/platform/api/quiche_text_utils.h",
      "src/common/platform/api/quiche_unordered_containers.h",
      "src/common/quiche_data_reader.cc",
      "src/common/quiche_data_reader.h",
      "src/common/quiche_data_writer.cc",
      "src/common/quiche_data_writer.h",
      "src/common/simple_linked_hash_map.h",
      "src/http2/decoder/decode_buffer.cc",
      "src/http2/decoder/decode_buffer.h",
      "src/http2/decoder/decode_http2_structures.cc",
      "src/http2/decoder/decode_http2_structures.h",
      "src/http2/decoder/decode_status.cc",
      "src/http2/decoder/decode_status.h",
      "src/http2/decoder/frame_decoder_state.cc",
      "src/http2/decoder/frame_decoder_state.h",
      "src/http2/decoder/http2_frame_decoder.cc",
      "src/http2/decoder/http2_frame_decoder.h",
      "src/http2/decoder/http2_frame_decoder_listener.cc",
      "src/http2/decoder/http2_frame_decoder_listener.h",
      "src/http2/decoder/http2_structure_decoder.cc",
      "src/http2/decoder/http2_structure_decoder.h",
      "src/http2/decoder/payload_decoders/altsvc_payload_decoder.cc",
      "src/http2/decoder/payload_decoders/altsvc_payload_decoder.h",
      "src/http2/decoder/payload_decoders/continuation_payload_decoder.cc",
      "src/http2/decoder/payload_decoders/continuation_payload_decoder.h",
      "src/http2/decoder/payload_decoders/data_payload_decoder.cc",
      "src/http2/decoder/payload_decoders/data_payload_decoder.h",
      "src/http2/decoder/payload_decoders/goaway_payload_decoder.cc",
      "src/http2/decoder/payload_decoders/goaway_payload_decoder.h",
      "src/http2/decoder/payload_decoders/headers_payload_decoder.cc",
      "src/http2/decoder/payload_decoders/headers_payload_decoder.h",
      "src/http2/decoder/payload_decoders/ping_payload_decoder.cc",
      "src/http2/decoder/payload_decoders/ping_payload_decoder.h",
      "src/http2/decoder/payload_decoders/priority_payload_decoder.cc",
      "src/http2/decoder/payload_decoders/priority_payload_decoder.h",
      "src/http2/decoder/payload_decoders/push_promise_payload_decoder.cc",
      "src/http2/decoder/payload_decoders/push_promise_payload_decoder.h",
      "src/http2/decoder/payload_decoders/rst_stream_payload_decoder.cc",
      "src/http2/decoder/payload_decoders/rst_stream_payload_decoder.h",
      "src/http2/decoder/payload_decoders/settings_payload_decoder.cc",
      "src/http2/decoder/payload_decoders/settings_payload_decoder.h",
      "src/http2/decoder/payload_decoders/unknown_payload_decoder.cc",
      "src/http2/decoder/payload_decoders/unknown_payload_decoder.h",
      "src/http2/decoder/payload_decoders/window_update_payload_decoder.cc",
      "src/http2/decoder/payload_decoders/window_update_payload_decoder.h",
      "src/http2/hpack/decoder/hpack_block_decoder.cc",
      "src/http2/hpack/decoder/hpack_block_decoder.h",
      "src/http2/hpack/decoder/hpack_decoder.cc",
      "src/http2/hpack/decoder/hpack_decoder.h",
      "src/http2/hpack/decoder/hpack_decoder_listener.cc",
      "src/http2/hpack/decoder/hpack_decoder_listener.h",
      "src/http2/hpack/decoder/hpack_decoder_state.cc",
      "src/http2/hpack/decoder/hpack_decoder_state.h",
      "src/http2/hpack/decoder/hpack_decoder_string_buffer.cc",
      "src/http2/hpack/decoder/hpack_decoder_string_buffer.h",
      "src/http2/hpack/decoder/hpack_decoder_tables.cc",
      "src/http2/hpack/decoder/hpack_decoder_tables.h",
      "src/http2/hpack/decoder/hpack_decoding_error.cc",
      "src/http2/hpack/decoder/hpack_decoding_error.h",
      "src/http2/hpack/decoder/hpack_entry_decoder.cc",
      "src/http2/hpack/decoder/hpack_entry_decoder.h",
      "src/http2/hpack/decoder/hpack_entry_decoder_listener.cc",
      "src/http2/hpack/decoder/hpack_entry_decoder_listener.h",
      "src/http2/hpack/decoder/hpack_entry_type_decoder.cc",
      "src/http2/hpack/decoder/hpack_entry_type_decoder.h",
      "src/http2/hpack/decoder/hpack_string_decoder.cc",
      "src/http2/hpack/decoder/hpack_string_decoder.h",
      "src/http2/hpack/decoder/hpack_string_decoder_listener.cc",
      "src/http2/hpack/decoder/hpack_string_decoder_listener.h",
      "src/http2/hpack/decoder/hpack_whole_entry_buffer.cc",
      "src/http2/hpack/decoder/hpack_whole_entry_buffer.h",
      "src/http2/hpack/decoder/hpack_whole_entry_listener.cc",
      "src/http2/hpack/decoder/hpack_whole_entry_listener.h",
      "src/http2/hpack/hpack_static_table_entries.inc",
      "src/http2/hpack/hpack_string.cc",
      "src/http2/hpack/hpack_string.h",
      "src/http2/hpack/http2_hpack_constants.cc",
      "src/http2/hpack/http2_hpack_constants.h",
      "src/http2/hpack/huffman/hpack_huffman_decoder.cc",
      "src/http2/hpack/huffman/hpack_huffman_decoder.h",
      "src/http2/hpack/huffman/hpack_huffman_encoder.cc",
      "src/http2/hpack/huffman/hpack_huffman_encoder.h",
      "src/http2/hpack/huffman/huffman_spec_tables.cc",
      "src/http2/hpack/huffman/huffman_spec_tables.h",
      "src/http2/hpack/varint/hpack_varint_decoder.cc",
      "src/http2/hpack/varint/hpack_varint_decoder.h",
      "src/http2/hpack/varint/hpack_varint_encoder.cc",
      "src/http2/hpack/varint/hpack_varint_encoder.h",
      "src/http2/http2_constants.cc",
      "src/http2/http2_constants.h",
      "src/http2/http2_structures.cc",
      "src/http2/http2_structures.h",
      "src/http2/platform/api/http2_bug_tracker.h",
      "src/http2/platform/api/http2_containers.h",
      "src/http2/platform/api/http2_estimate_memory_usage.h",
      "src/http2/platform/api/http2_flag_utils.h",
      "src/http2/platform/api/http2_flags.h",
      "src/http2/platform/api/http2_logging.h",
      "src/http2/platform/api/http2_macros.h",
      "src/http2/platform/api/http2_string_utils.h",
      "src/quic/core/congestion_control/bandwidth_sampler.cc",
      "src/quic/core/congestion_control/bandwidth_sampler.h",
      "src/quic/core/congestion_control/bbr2_drain.cc",
      "src/quic/core/congestion_control/bbr2_drain.h",
      "src/quic/core/congestion_control/bbr2_misc.cc",
      "src/quic/core/congestion_control/bbr2_misc.h",
      "src/quic/core/congestion_control/bbr2_probe_bw.cc",
      "src/quic/core/congestion_control/bbr2_probe_bw.h",
      "src/quic/core/congestion_control/bbr2_probe_rtt.cc",
      "src/quic/core/congestion_control/bbr2_probe_rtt.h",
      "src/quic/core/congestion_control/bbr2_sender.cc",
      "src/quic/core/congestion_control/bbr2_sender.h",
      "src/quic/core/congestion_control/bbr2_startup.cc",
      "src/quic/core/congestion_control/bbr2_startup.h",
      "src/quic/core/congestion_control/bbr_sender.cc",
      "src/quic/core/congestion_control/bbr_sender.h",
      "src/quic/core/congestion_control/cubic_bytes.cc",
      "src/quic/core/congestion_control/cubic_bytes.h",
      "src/quic/core/congestion_control/general_loss_algorithm.cc",
      "src/quic/core/congestion_control/general_loss_algorithm.h",
      "src/quic/core/congestion_control/hybrid_slow_start.cc",
      "src/quic/core/congestion_control/hybrid_slow_start.h",
      "src/quic/core/congestion_control/loss_detection_interface.h",
      "src/quic/core/congestion_control/pacing_sender.cc",
      "src/quic/core/congestion_control/pacing_sender.h",
      "src/quic/core/congestion_control/prr_sender.cc",
      "src/quic/core/congestion_control/prr_sender.h",
      "src/quic/core/congestion_control/rtt_stats.cc",
      "src/quic/core/congestion_control/rtt_stats.h",
      "src/quic/core/congestion_control/send_algorithm_interface.cc",
      "src/quic/core/congestion_control/send_algorithm_interface.h",
      "src/quic/core/congestion_control/tcp_cubic_sender_bytes.cc",
      "src/quic/core/congestion_control/tcp_cubic_sender_bytes.h",
      "src/quic/core/congestion_control/uber_loss_algorithm.cc",
      "src/quic/core/congestion_control/uber_loss_algorithm.h",
      "src/quic/core/congestion_control/windowed_filter.h",
      "src/quic/core/crypto/aead_base_decrypter.cc",
      "src/quic/core/crypto/aead_base_decrypter.h",
      "src/quic/core/crypto/aead_base_encrypter.cc",
      "src/quic/core/crypto/aead_base_encrypter.h",
      "src/quic/core/crypto/aes_128_gcm_12_decrypter.cc",
      "src/quic/core/crypto/aes_128_gcm_12_decrypter.h",
      "src/quic/core/crypto/aes_128_gcm_12_encrypter.cc",
      "src/quic/core/crypto/aes_128_gcm_12_encrypter.h",
      "src/quic/core/crypto/aes_128_gcm_decrypter.cc",
      "src/quic/core/crypto/aes_128_gcm_decrypter.h",
      "src/quic/core/crypto/aes_128_gcm_encrypter.cc",
      "src/quic/core/crypto/aes_128_gcm_encrypter.h",
      "src/quic/core/crypto/aes_256_gcm_decrypter.cc",
      "src/quic/core/crypto/aes_256_gcm_decrypter.h",
      "src/quic/core/crypto/aes_256_gcm_encrypter.cc",
      "src/quic/core/crypto/aes_256_gcm_encrypter.h",
      "src/quic/core/crypto/aes_base_decrypter.cc",
      "src/quic/core/crypto/aes_base_decrypter.h",
      "src/quic/core/crypto/aes_base_encrypter.cc",
      "src/quic/core/crypto/aes_base_encrypter.h",
      "src/quic/core/crypto/boring_utils.h",
      "src/quic/core/crypto/cert_compressor.cc",
      "src/quic/core/crypto/cert_compressor.h",
      "src/quic/core/crypto/certificate_view.cc",
      "src/quic/core/crypto/certificate_view.h",
      "src/quic/core/crypto/chacha20_poly1305_decrypter.cc",
      "src/quic/core/crypto/chacha20_poly1305_decrypter.h",
      "src/quic/core/crypto/chacha20_poly1305_encrypter.cc",
      "src/quic/core/crypto/chacha20_poly1305_encrypter.h",
      "src/quic/core/crypto/chacha20_poly1305_tls_decrypter.cc",
      "src/quic/core/crypto/chacha20_poly1305_tls_decrypter.h",
      "src/quic/core/crypto/chacha20_poly1305_tls_encrypter.cc",
      "src/quic/core/crypto/chacha20_poly1305_tls_encrypter.h",
      "src/quic/core/crypto/chacha_base_decrypter.cc",
      "src/quic/core/crypto/chacha_base_decrypter.h",
      "src/quic/core/crypto/chacha_base_encrypter.cc",
      "src/quic/core/crypto/chacha_base_encrypter.h",
      "src/quic/core/crypto/channel_id.cc",
      "src/quic/core/crypto/channel_id.h",
      "src/quic/core/crypto/common_cert_set.cc",
      "src/quic/core/crypto/common_cert_set.h",
      "src/quic/core/crypto/crypto_framer.cc",
      "src/quic/core/crypto/crypto_framer.h",
      "src/quic/core/crypto/crypto_handshake.cc",
      "src/quic/core/crypto/crypto_handshake.h",
      "src/quic/core/crypto/crypto_handshake_message.cc",
      "src/quic/core/crypto/crypto_handshake_message.h",
      "src/quic/core/crypto/crypto_message_parser.h",
      "src/quic/core/crypto/crypto_protocol.h",
      "src/quic/core/crypto/crypto_secret_boxer.cc",
      "src/quic/core/crypto/crypto_secret_boxer.h",
      "src/quic/core/crypto/crypto_utils.cc",
      "src/quic/core/crypto/crypto_utils.h",
      "src/quic/core/crypto/curve25519_key_exchange.cc",
      "src/quic/core/crypto/curve25519_key_exchange.h",
      "src/quic/core/crypto/key_exchange.cc",
      "src/quic/core/crypto/key_exchange.h",
      "src/quic/core/crypto/null_decrypter.cc",
      "src/quic/core/crypto/null_decrypter.h",
      "src/quic/core/crypto/null_encrypter.cc",
      "src/quic/core/crypto/null_encrypter.h",
      "src/quic/core/crypto/p256_key_exchange.cc",
      "src/quic/core/crypto/p256_key_exchange.h",
      "src/quic/core/crypto/proof_source.cc",
      "src/quic/core/crypto/proof_source.h",
      "src/quic/core/crypto/proof_verifier.h",
      "src/quic/core/crypto/quic_compressed_certs_cache.cc",
      "src/quic/core/crypto/quic_compressed_certs_cache.h",
      "src/quic/core/crypto/quic_crypter.cc",
      "src/quic/core/crypto/quic_crypter.h",
      "src/quic/core/crypto/quic_crypto_client_config.cc",
      "src/quic/core/crypto/quic_crypto_client_config.h",
      "src/quic/core/crypto/quic_crypto_proof.cc",
      "src/quic/core/crypto/quic_crypto_proof.h",
      "src/quic/core/crypto/quic_crypto_server_config.cc",
      "src/quic/core/crypto/quic_crypto_server_config.h",
      "src/quic/core/crypto/quic_decrypter.cc",
      "src/quic/core/crypto/quic_decrypter.h",
      "src/quic/core/crypto/quic_encrypter.cc",
      "src/quic/core/crypto/quic_encrypter.h",
      "src/quic/core/crypto/quic_hkdf.cc",
      "src/quic/core/crypto/quic_hkdf.h",
      "src/quic/core/crypto/quic_random.cc",
      "src/quic/core/crypto/quic_random.h",
      "src/quic/core/crypto/server_proof_verifier.h",
      "src/quic/core/crypto/tls_client_connection.cc",
      "src/quic/core/crypto/tls_client_connection.h",
      "src/quic/core/crypto/tls_connection.cc",
      "src/quic/core/crypto/tls_connection.h",
      "src/quic/core/crypto/tls_server_connection.cc",
      "src/quic/core/crypto/tls_server_connection.h",
      "src/quic/core/crypto/transport_parameters.cc",
      "src/quic/core/crypto/transport_parameters.h",
      "src/quic/core/frames/quic_ack_frame.cc",
      "src/quic/core/frames/quic_ack_frame.h",
      "src/quic/core/frames/quic_blocked_frame.cc",
      "src/quic/core/frames/quic_blocked_frame.h",
      "src/quic/core/frames/quic_connection_close_frame.cc",
      "src/quic/core/frames/quic_connection_close_frame.h",
      "src/quic/core/frames/quic_crypto_frame.cc",
      "src/quic/core/frames/quic_crypto_frame.h",
      "src/quic/core/frames/quic_frame.cc",
      "src/quic/core/frames/quic_frame.h",
      "src/quic/core/frames/quic_goaway_frame.cc",
      "src/quic/core/frames/quic_goaway_frame.h",
      "src/quic/core/frames/quic_handshake_done_frame.cc",
      "src/quic/core/frames/quic_handshake_done_frame.h",
      "src/quic/core/frames/quic_inlined_frame.h",
      "src/quic/core/frames/quic_max_streams_frame.cc",
      "src/quic/core/frames/quic_max_streams_frame.h",
      "src/quic/core/frames/quic_message_frame.cc",
      "src/quic/core/frames/quic_message_frame.h",
      "src/quic/core/frames/quic_mtu_discovery_frame.h",
      "src/quic/core/frames/quic_new_connection_id_frame.cc",
      "src/quic/core/frames/quic_new_connection_id_frame.h",
      "src/quic/core/frames/quic_new_token_frame.cc",
      "src/quic/core/frames/quic_new_token_frame.h",
      "src/quic/core/frames/quic_padding_frame.cc",
      "src/quic/core/frames/quic_padding_frame.h",
      "src/quic/core/frames/quic_path_challenge_frame.cc",
      "src/quic/core/frames/quic_path_challenge_frame.h",
      "src/quic/core/frames/quic_path_response_frame.cc",
      "src/quic/core/frames/quic_path_response_frame.h",
      "src/quic/core/frames/quic_ping_frame.cc",
      "src/quic/core/frames/quic_ping_frame.h",
      "src/quic/core/frames/quic_retire_connection_id_frame.cc",
      "src/quic/core/frames/quic_retire_connection_id_frame.h",
      "src/quic/core/frames/quic_rst_stream_frame.cc",
      "src/quic/core/frames/quic_rst_stream_frame.h",
      "src/quic/core/frames/quic_stop_sending_frame.cc",
      "src/quic/core/frames/quic_stop_sending_frame.h",
      "src/quic/core/frames/quic_stop_waiting_frame.cc",
      "src/quic/core/frames/quic_stop_waiting_frame.h",
      "src/quic/core/frames/quic_stream_frame.cc",
      "src/quic/core/frames/quic_stream_frame.h",
      "src/quic/core/frames/quic_streams_blocked_frame.cc",
      "src/quic/core/frames/quic_streams_blocked_frame.h",
      "src/quic/core/frames/quic_window_update_frame.cc",
      "src/quic/core/frames/quic_window_update_frame.h",
      "src/quic/core/handshaker_delegate_interface.h",
      "src/quic/core/http/http_constants.h",
      "src/quic/core/http/http_decoder.cc",
      "src/quic/core/http/http_decoder.h",
      "src/quic/core/http/http_encoder.cc",
      "src/quic/core/http/http_encoder.h",
      "src/quic/core/http/http_frames.h",
      "src/quic/core/http/quic_client_promised_info.cc",
      "src/quic/core/http/quic_client_promised_info.h",
      "src/quic/core/http/quic_client_push_promise_index.cc",
      "src/quic/core/http/quic_client_push_promise_index.h",
      "src/quic/core/http/quic_header_list.cc",
      "src/quic/core/http/quic_header_list.h",
      "src/quic/core/http/quic_headers_stream.cc",
      "src/quic/core/http/quic_headers_stream.h",
      "src/quic/core/http/quic_receive_control_stream.cc",
      "src/quic/core/http/quic_receive_control_stream.h",
      "src/quic/core/http/quic_send_control_stream.cc",
      "src/quic/core/http/quic_send_control_stream.h",
      "src/quic/core/http/quic_server_session_base.cc",
      "src/quic/core/http/quic_server_session_base.h",
      "src/quic/core/http/quic_spdy_client_session_base.cc",
      "src/quic/core/http/quic_spdy_client_session_base.h",
      "src/quic/core/http/quic_spdy_session.cc",
      "src/quic/core/http/quic_spdy_session.h",
      "src/quic/core/http/quic_spdy_stream.cc",
      "src/quic/core/http/quic_spdy_stream.h",
      "src/quic/core/http/quic_spdy_stream_body_manager.cc",
      "src/quic/core/http/quic_spdy_stream_body_manager.h",
      "src/quic/core/http/spdy_server_push_utils.cc",
      "src/quic/core/http/spdy_server_push_utils.h",
      "src/quic/core/http/spdy_utils.cc",
      "src/quic/core/http/spdy_utils.h",
      "src/quic/core/legacy_quic_stream_id_manager.cc",
      "src/quic/core/legacy_quic_stream_id_manager.h",
      "src/quic/core/packet_number_indexed_queue.h",
      "src/quic/core/proto/cached_network_parameters_proto.h",
      "src/quic/core/proto/crypto_server_config_proto.h",
      "src/quic/core/proto/source_address_token_proto.h",
      "src/quic/core/qpack/qpack_blocking_manager.cc",
      "src/quic/core/qpack/qpack_blocking_manager.h",
      "src/quic/core/qpack/qpack_decoded_headers_accumulator.cc",
      "src/quic/core/qpack/qpack_decoded_headers_accumulator.h",
      "src/quic/core/qpack/qpack_decoder.cc",
      "src/quic/core/qpack/qpack_decoder.h",
      "src/quic/core/qpack/qpack_decoder_stream_receiver.cc",
      "src/quic/core/qpack/qpack_decoder_stream_receiver.h",
      "src/quic/core/qpack/qpack_decoder_stream_sender.cc",
      "src/quic/core/qpack/qpack_decoder_stream_sender.h",
      "src/quic/core/qpack/qpack_encoder.cc",
      "src/quic/core/qpack/qpack_encoder.h",
      "src/quic/core/qpack/qpack_encoder_stream_receiver.cc",
      "src/quic/core/qpack/qpack_encoder_stream_receiver.h",
      "src/quic/core/qpack/qpack_encoder_stream_sender.cc",
      "src/quic/core/qpack/qpack_encoder_stream_sender.h",
      "src/quic/core/qpack/qpack_header_table.cc",
      "src/quic/core/qpack/qpack_header_table.h",
      "src/quic/core/qpack/qpack_index_conversions.cc",
      "src/quic/core/qpack/qpack_index_conversions.h",
      "src/quic/core/qpack/qpack_instruction_decoder.cc",
      "src/quic/core/qpack/qpack_instruction_decoder.h",
      "src/quic/core/qpack/qpack_instruction_encoder.cc",
      "src/quic/core/qpack/qpack_instruction_encoder.h",
      "src/quic/core/qpack/qpack_instructions.cc",
      "src/quic/core/qpack/qpack_instructions.h",
      "src/quic/core/qpack/qpack_progressive_decoder.cc",
      "src/quic/core/qpack/qpack_progressive_decoder.h",
      "src/quic/core/qpack/qpack_receive_stream.cc",
      "src/quic/core/qpack/qpack_receive_stream.h",
      "src/quic/core/qpack/qpack_required_insert_count.cc",
      "src/quic/core/qpack/qpack_required_insert_count.h",
      "src/quic/core/qpack/qpack_send_stream.cc",
      "src/quic/core/qpack/qpack_send_stream.h",
      "src/quic/core/qpack/qpack_static_table.cc",
      "src/quic/core/qpack/qpack_static_table.h",
      "src/quic/core/qpack/qpack_stream_receiver.h",
      "src/quic/core/qpack/qpack_stream_sender_delegate.h",
      "src/quic/core/qpack/value_splitting_header_list.cc",
      "src/quic/core/qpack/value_splitting_header_list.h",
      "src/quic/core/quic_ack_listener_interface.cc",
      "src/quic/core/quic_ack_listener_interface.h",
      "src/quic/core/quic_alarm.cc",
      "src/quic/core/quic_alarm.h",
      "src/quic/core/quic_alarm_factory.h",
      "src/quic/core/quic_arena_scoped_ptr.h",
      "src/quic/core/quic_bandwidth.cc",
      "src/quic/core/quic_bandwidth.h",
      "src/quic/core/quic_blocked_writer_interface.h",
      "src/quic/core/quic_buffer_allocator.cc",
      "src/quic/core/quic_buffer_allocator.h",
      "src/quic/core/quic_buffered_packet_store.cc",
      "src/quic/core/quic_buffered_packet_store.h",
      "src/quic/core/quic_circular_deque.h",
      "src/quic/core/quic_clock.cc",
      "src/quic/core/quic_clock.h",
      "src/quic/core/quic_coalesced_packet.cc",
      "src/quic/core/quic_coalesced_packet.h",
      "src/quic/core/quic_config.cc",
      "src/quic/core/quic_config.h",
      "src/quic/core/quic_connection.cc",
      "src/quic/core/quic_connection.h",
      "src/quic/core/quic_connection_id.cc",
      "src/quic/core/quic_connection_id.h",
      "src/quic/core/quic_connection_stats.cc",
      "src/quic/core/quic_connection_stats.h",
      "src/quic/core/quic_constants.cc",
      "src/quic/core/quic_constants.h",
      "src/quic/core/quic_control_frame_manager.cc",
      "src/quic/core/quic_control_frame_manager.h",
      "src/quic/core/quic_crypto_client_handshaker.cc",
      "src/quic/core/quic_crypto_client_handshaker.h",
      "src/quic/core/quic_crypto_client_stream.cc",
      "src/quic/core/quic_crypto_client_stream.h",
      "src/quic/core/quic_crypto_handshaker.cc",
      "src/quic/core/quic_crypto_handshaker.h",
      "src/quic/core/quic_crypto_server_stream.cc",
      "src/quic/core/quic_crypto_server_stream.h",
      "src/quic/core/quic_crypto_server_stream_base.cc",
      "src/quic/core/quic_crypto_server_stream_base.h",
      "src/quic/core/quic_crypto_stream.cc",
      "src/quic/core/quic_crypto_stream.h",
      "src/quic/core/quic_data_reader.cc",
      "src/quic/core/quic_data_reader.h",
      "src/quic/core/quic_data_writer.cc",
      "src/quic/core/quic_data_writer.h",
      "src/quic/core/quic_datagram_queue.cc",
      "src/quic/core/quic_datagram_queue.h",
      "src/quic/core/quic_flow_controller.cc",
      "src/quic/core/quic_flow_controller.h",
      "src/quic/core/quic_framer.cc",
      "src/quic/core/quic_framer.h",
      "src/quic/core/quic_idle_network_detector.cc",
      "src/quic/core/quic_idle_network_detector.h",
      "src/quic/core/quic_interval.h",
      "src/quic/core/quic_interval_deque.h",
      "src/quic/core/quic_interval_set.h",
      "src/quic/core/quic_lru_cache.h",
      "src/quic/core/quic_mtu_discovery.cc",
      "src/quic/core/quic_mtu_discovery.h",
      "src/quic/core/quic_network_blackhole_detector.cc",
      "src/quic/core/quic_network_blackhole_detector.h",
      "src/quic/core/quic_one_block_arena.h",
      "src/quic/core/quic_packet_creator.cc",
      "src/quic/core/quic_packet_creator.h",
      "src/quic/core/quic_packet_number.cc",
      "src/quic/core/quic_packet_number.h",
      "src/quic/core/quic_packet_writer.h",
      "src/quic/core/quic_packets.cc",
      "src/quic/core/quic_packets.h",
      "src/quic/core/quic_received_packet_manager.cc",
      "src/quic/core/quic_received_packet_manager.h",
      "src/quic/core/quic_sent_packet_manager.cc",
      "src/quic/core/quic_sent_packet_manager.h",
      "src/quic/core/quic_server_id.cc",
      "src/quic/core/quic_server_id.h",
      "src/quic/core/quic_session.cc",
      "src/quic/core/quic_session.h",
      "src/quic/core/quic_simple_buffer_allocator.cc",
      "src/quic/core/quic_simple_buffer_allocator.h",
      "src/quic/core/quic_socket_address_coder.cc",
      "src/quic/core/quic_socket_address_coder.h",
      "src/quic/core/quic_stream.cc",
      "src/quic/core/quic_stream.h",
      "src/quic/core/quic_stream_frame_data_producer.h",
      "src/quic/core/quic_stream_id_manager.cc",
      "src/quic/core/quic_stream_id_manager.h",
      "src/quic/core/quic_stream_send_buffer.cc",
      "src/quic/core/quic_stream_send_buffer.h",
      "src/quic/core/quic_stream_sequencer.cc",
      "src/quic/core/quic_stream_sequencer.h",
      "src/quic/core/quic_stream_sequencer_buffer.cc",
      "src/quic/core/quic_stream_sequencer_buffer.h",
      "src/quic/core/quic_sustained_bandwidth_recorder.cc",
      "src/quic/core/quic_sustained_bandwidth_recorder.h",
      "src/quic/core/quic_tag.cc",
      "src/quic/core/quic_tag.h",
      "src/quic/core/quic_time.cc",
      "src/quic/core/quic_time.h",
      "src/quic/core/quic_time_accumulator.h",
      "src/quic/core/quic_transmission_info.cc",
      "src/quic/core/quic_transmission_info.h",
      "src/quic/core/quic_types.cc",
      "src/quic/core/quic_types.h",
      "src/quic/core/quic_unacked_packet_map.cc",
      "src/quic/core/quic_unacked_packet_map.h",
      "src/quic/core/quic_utils.cc",
      "src/quic/core/quic_utils.h",
      "src/quic/core/quic_version_manager.cc",
      "src/quic/core/quic_version_manager.h",
      "src/quic/core/quic_versions.cc",
      "src/quic/core/quic_versions.h",
      "src/quic/core/quic_write_blocked_list.cc",
      "src/quic/core/quic_write_blocked_list.h",
      "src/quic/core/session_notifier_interface.h",
      "src/quic/core/stream_delegate_interface.h",
      "src/quic/core/tls_client_handshaker.cc",
      "src/quic/core/tls_client_handshaker.h",
      "src/quic/core/tls_handshaker.cc",
      "src/quic/core/tls_handshaker.h",
      "src/quic/core/tls_server_handshaker.cc",
      "src/quic/core/tls_server_handshaker.h",
      "src/quic/core/uber_quic_stream_id_manager.cc",
      "src/quic/core/uber_quic_stream_id_manager.h",
      "src/quic/core/uber_received_packet_manager.cc",
      "src/quic/core/uber_received_packet_manager.h",
      "src/quic/platform/api/quic_aligned.h",
      "src/quic/platform/api/quic_bug_tracker.h",
      "src/quic/platform/api/quic_cert_utils.h",
      "src/quic/platform/api/quic_client_stats.h",
      "src/quic/platform/api/quic_containers.h",
      "src/quic/platform/api/quic_error_code_wrappers.h",
      "src/quic/platform/api/quic_estimate_memory_usage.h",
      "src/quic/platform/api/quic_export.h",
      "src/quic/platform/api/quic_exported_stats.h",
      "src/quic/platform/api/quic_fallthrough.h",
      "src/quic/platform/api/quic_file_utils.cc",
      "src/quic/platform/api/quic_file_utils.h",
      "src/quic/platform/api/quic_flag_utils.h",
      "src/quic/platform/api/quic_flags.h",
      "src/quic/platform/api/quic_hostname_utils.cc",
      "src/quic/platform/api/quic_hostname_utils.h",
      "src/quic/platform/api/quic_iovec.h",
      "src/quic/platform/api/quic_ip_address.cc",
      "src/quic/platform/api/quic_ip_address.h",
      "src/quic/platform/api/quic_ip_address_family.h",
      "src/quic/platform/api/quic_logging.h",
      "src/quic/platform/api/quic_macros.h",
      "src/quic/platform/api/quic_map_util.h",
      "src/quic/platform/api/quic_mem_slice.h",
      "src/quic/platform/api/quic_mem_slice_span.h",
      "src/quic/platform/api/quic_mem_slice_storage.h",
      "src/quic/platform/api/quic_mutex.cc",
      "src/quic/platform/api/quic_mutex.h",
      "src/quic/platform/api/quic_pcc_sender.h",
      "src/quic/platform/api/quic_prefetch.h",
      "src/quic/platform/api/quic_ptr_util.h",
      "src/quic/platform/api/quic_reference_counted.h",
      "src/quic/platform/api/quic_server_stats.h",
      "src/quic/platform/api/quic_sleep.h",
      "src/quic/platform/api/quic_socket_address.cc",
      "src/quic/platform/api/quic_socket_address.h",
      "src/quic/platform/api/quic_stack_trace.h",
      "src/quic/platform/api/quic_string_utils.h",
      "src/quic/platform/api/quic_thread.h",
      "src/quic/platform/api/quic_uint128.h",
      "src/quic/quic_transport/quic_transport_client_session.cc",
      "src/quic/quic_transport/quic_transport_client_session.h",
      "src/quic/quic_transport/quic_transport_protocol.h",
      "src/quic/quic_transport/quic_transport_server_session.cc",
      "src/quic/quic_transport/quic_transport_server_session.h",
      "src/quic/quic_transport/quic_transport_session_interface.h",
      "src/quic/quic_transport/quic_transport_stream.cc",
      "src/quic/quic_transport/quic_transport_stream.h",
      "src/spdy/core/fifo_write_scheduler.h",
      "src/spdy/core/hpack/hpack_constants.cc",
      "src/spdy/core/hpack/hpack_constants.h",
      "src/spdy/core/hpack/hpack_decoder_adapter.cc",
      "src/spdy/core/hpack/hpack_decoder_adapter.h",
      "src/spdy/core/hpack/hpack_encoder.cc",
      "src/spdy/core/hpack/hpack_encoder.h",
      "src/spdy/core/hpack/hpack_entry.cc",
      "src/spdy/core/hpack/hpack_entry.h",
      "src/spdy/core/hpack/hpack_header_table.cc",
      "src/spdy/core/hpack/hpack_header_table.h",
      "src/spdy/core/hpack/hpack_huffman_table.cc",
      "src/spdy/core/hpack/hpack_huffman_table.h",
      "src/spdy/core/hpack/hpack_output_stream.cc",
      "src/spdy/core/hpack/hpack_output_stream.h",
      "src/spdy/core/hpack/hpack_static_table.cc",
      "src/spdy/core/hpack/hpack_static_table.h",
      "src/spdy/core/http2_frame_decoder_adapter.cc",
      "src/spdy/core/http2_frame_decoder_adapter.h",
      "src/spdy/core/http2_priority_write_scheduler.h",
      "src/spdy/core/lifo_write_scheduler.h",
      "src/spdy/core/priority_write_scheduler.h",
      "src/spdy/core/spdy_alt_svc_wire_format.cc",
      "src/spdy/core/spdy_alt_svc_wire_format.h",
      "src/spdy/core/spdy_bitmasks.h",
      "src/spdy/core/spdy_frame_builder.cc",
      "src/spdy/core/spdy_frame_builder.h",
      "src/spdy/core/spdy_frame_reader.cc",
      "src/spdy/core/spdy_frame_reader.h",
      "src/spdy/core/spdy_framer.cc",
      "src/spdy/core/spdy_framer.h",
      "src/spdy/core/spdy_header_block.cc",
      "src/spdy/core/spdy_header_block.h",
      "src/spdy/core/spdy_header_storage.cc",
      "src/spdy/core/spdy_header_storage.h",
      "src/spdy/core/spdy_headers_handler_interface.h",
      "src/spdy/core/spdy_intrusive_list.h",
      "src/spdy/core/spdy_pinnable_buffer_piece.cc",
      "src/spdy/core/spdy_pinnable_buffer_piece.h",
      "src/spdy/core/spdy_prefixed_buffer_reader.cc",
      "src/spdy/core/spdy_prefixed_buffer_reader.h",
      "src/spdy/core/spdy_protocol.cc",
      "src/spdy/core/spdy_protocol.h",
      "src/spdy/core/spdy_simple_arena.cc",
      "src/spdy/core/spdy_simple_arena.h",
      "src/spdy/core/write_scheduler.h",
      "src/spdy/core/zero_copy_output_buffer.h",
      "src/spdy/platform/api/spdy_bug_tracker.h",
      "src/spdy/platform/api/spdy_containers.h",
      "src/spdy/platform/api/spdy_endianness_util.h",
      "src/spdy/platform/api/spdy_estimate_memory_usage.h",
      "src/spdy/platform/api/spdy_flags.h",
      "src/spdy/platform/api/spdy_logging.h",
      "src/spdy/platform/api/spdy_macros.h",
      "src/spdy/platform/api/spdy_mem_slice.h",
      "src/spdy/platform/api/spdy_string_utils.h",
    ]
  }

  deps = [ "//net:net_deps" ]
  public_deps = [ "//net:net_public_deps" ]
}

proto_library("net_quic_proto") {
  visibility = [ "//net:net_public_deps" ]

  sources = [
    "src/quic/core/proto/cached_network_parameters.proto",
    "src/quic/core/proto/crypto_server_config.proto",
    "src/quic/core/proto/source_address_token.proto",
  ]
  cc_generator_options = "dllexport_decl=NET_EXPORT_PRIVATE:"
  cc_include = "net/base/net_export.h"
  component_build_force_source_set = true

  deps = [ "//net:net_export_header" ]

  defines = [ "NET_IMPLEMENTATION" ]

  extra_configs = [ "//build/config/compiler:wexit_time_destructors" ]
}

proto_library("net_quic_test_tools_proto") {
  visibility = [ "//net:net_public_deps" ]

  sources = [ "src/quic/test_tools/send_algorithm_test_result.proto" ]
  cc_generator_options = "dllexport_decl=NET_EXPORT_PRIVATE:"
  cc_include = "net/base/net_export.h"
  component_build_force_source_set = true

  deps = [ "//net:net_export_header" ]

  defines = [ "NET_IMPLEMENTATION" ]

  extra_configs = [ "//build/config/compiler:wexit_time_destructors" ]
}

if (is_linux) {
  source_set("epoll_server_core") {
    sources = [
      "src/epoll_server/platform/api/epoll_bug.h",
      "src/epoll_server/platform/api/epoll_export.h",
      "src/epoll_server/platform/api/epoll_logging.h",
      "src/epoll_server/platform/api/epoll_ptr_util.h",
      "src/epoll_server/platform/api/epoll_thread.h",
      "src/epoll_server/platform/api/epoll_time.h",
      "src/epoll_server/simple_epoll_server.cc",
      "src/epoll_server/simple_epoll_server.h",
    ]
    deps = [
      "//base",
      "//net",
    ]
  }

  source_set("epoll_quic_tools_core") {
    sources = [
      "src/quic/core/quic_default_packet_writer.cc",
      "src/quic/core/quic_default_packet_writer.h",
      "src/quic/core/quic_epoll_alarm_factory.cc",
      "src/quic/core/quic_epoll_alarm_factory.h",
      "src/quic/core/quic_epoll_connection_helper.cc",
      "src/quic/core/quic_epoll_connection_helper.h",
      "src/quic/core/quic_packet_reader.cc",
      "src/quic/core/quic_packet_reader.h",
      "src/quic/core/quic_udp_socket.h",
      "src/quic/core/quic_udp_socket_posix.cc",
      "src/quic/platform/api/quic_epoll.h",
      "src/quic/platform/api/quic_stream_buffer_allocator.h",
      "src/quic/platform/api/quic_udp_socket_platform_api.h",
      "src/quic/tools/quic_client.cc",
      "src/quic/tools/quic_client.h",
      "src/quic/tools/quic_client_epoll_network_helper.cc",
      "src/quic/tools/quic_client_epoll_network_helper.h",
      "src/quic/tools/quic_server.cc",
      "src/quic/tools/quic_server.h",
    ]
    deps = [
      "//base",
      "//net",
      "//net:epoll_server",
      "//net:simple_quic_tools",
      "//third_party/boringssl",
    ]
  }

  executable("epoll_quic_client") {
    sources = [
      "src/quic/tools/quic_client_bin.cc",
      "src/quic/tools/quic_epoll_client_factory.cc",
      "src/quic/tools/quic_epoll_client_factory.h",
      "src/quic/tools/quic_toy_client.cc",
      "src/quic/tools/quic_toy_client.h",
    ]
    deps = [
      "//base",
      "//net",
      "//net:epoll_quic_tools",
      "//net:epoll_server",
      "//net:simple_quic_tools",
      "//third_party/boringssl",
    ]
  }

  executable("epoll_quic_server") {
    sources = [
      "src/quic/tools/quic_epoll_server_factory.cc",
      "src/quic/tools/quic_epoll_server_factory.h",
      "src/quic/tools/quic_server_bin.cc",
      "src/quic/tools/quic_toy_server.cc",
      "src/quic/tools/quic_toy_server.h",
    ]
    deps = [
      "//base",
      "//net",
      "//net:epoll_quic_tools",
      "//net:epoll_server",
      "//net:simple_quic_tools",
      "//third_party/boringssl",
    ]
  }

  executable("quic_client_interop_test") {
    testonly = true
    sources = [ "src/quic/tools/quic_client_interop_test_bin.cc" ]
    deps = [
      "//net",
      "//net:epoll_quic_tools",
      "//net:quic_test_tools",
      "//net:simple_quic_tools",
    ]
  }

  source_set("masque_tools") {
    sources = [
      "src/quic/masque/masque_client_session.cc",
      "src/quic/masque/masque_client_session.h",
      "src/quic/masque/masque_client_tools.cc",
      "src/quic/masque/masque_client_tools.h",
      "src/quic/masque/masque_compression_engine.cc",
      "src/quic/masque/masque_compression_engine.h",
      "src/quic/masque/masque_dispatcher.cc",
      "src/quic/masque/masque_dispatcher.h",
      "src/quic/masque/masque_encapsulated_client_session.cc",
      "src/quic/masque/masque_encapsulated_client_session.h",
      "src/quic/masque/masque_encapsulated_epoll_client.cc",
      "src/quic/masque/masque_encapsulated_epoll_client.h",
      "src/quic/masque/masque_epoll_client.cc",
      "src/quic/masque/masque_epoll_client.h",
      "src/quic/masque/masque_epoll_server.cc",
      "src/quic/masque/masque_epoll_server.h",
      "src/quic/masque/masque_server_backend.cc",
      "src/quic/masque/masque_server_backend.h",
      "src/quic/masque/masque_server_session.cc",
      "src/quic/masque/masque_server_session.h",
      "src/quic/masque/masque_utils.cc",
      "src/quic/masque/masque_utils.h",
    ]
    deps = [
      "//net",
      "//net:epoll_quic_tools",
      "//net:simple_quic_tools",
      "//third_party/boringssl",
      "//third_party/protobuf:protobuf_lite",
    ]
  }

  executable("masque_client") {
    sources = [ "src/quic/masque/masque_client_bin.cc" ]
    deps = [
      ":masque_tools",
      "//net",
      "//net:epoll_quic_tools",
      "//net:simple_quic_tools",
      "//third_party/boringssl",
      "//third_party/protobuf:protobuf_lite",
    ]
  }

  executable("masque_server") {
    sources = [ "src/quic/masque/masque_server_bin.cc" ]
    deps = [
      ":masque_tools",
      "//net",
      "//net:epoll_quic_tools",
      "//net:simple_quic_tools",
      "//third_party/boringssl",
      "//third_party/protobuf:protobuf_lite",
    ]
  }
}

source_set("epoll_server_test_tools_core") {
  testonly = true
  sources = [
    "src/epoll_server/platform/api/epoll_address_test_utils.h",
    "src/epoll_server/platform/api/epoll_expect_bug.h",
    "src/epoll_server/platform/api/epoll_test.h",
  ]
  deps = [
    "//base",
    "//net",
    "//net:test_support",
    "//testing/gmock",
    "//testing/gtest",
  ]
}

source_set("quiche_test_tools_core") {
  testonly = true
  sources = [
    "src/common/platform/api/quiche_test.h",
    "src/common/test_tools/quiche_test_utils.cc",
    "src/common/test_tools/quiche_test_utils.h",
  ]
  deps = [
    "//net",
    "//testing/gmock",
    "//testing/gtest",
  ]
}

source_set("quic_test_tools_core") {
  testonly = true
  sources = [
    "src/quic/core/quic_trace_visitor.cc",
    "src/quic/core/quic_trace_visitor.h",
    "src/quic/platform/api/quic_epoll_test_tools.h",
    "src/quic/platform/api/quic_expect_bug.h",
    "src/quic/platform/api/quic_mock_log.h",
    "src/quic/platform/api/quic_port_utils.h",
    "src/quic/platform/api/quic_test.h",
    "src/quic/platform/api/quic_test_loopback.cc",
    "src/quic/platform/api/quic_test_loopback.h",
    "src/quic/platform/api/quic_test_mem_slice_vector.h",
    "src/quic/platform/api/quic_test_output.h",
    "src/quic/test_tools/crypto_test_utils.cc",
    "src/quic/test_tools/crypto_test_utils.h",
    "src/quic/test_tools/failing_proof_source.cc",
    "src/quic/test_tools/failing_proof_source.h",
    "src/quic/test_tools/fake_proof_source.cc",
    "src/quic/test_tools/fake_proof_source.h",
    "src/quic/test_tools/mock_clock.cc",
    "src/quic/test_tools/mock_clock.h",
    "src/quic/test_tools/mock_quic_client_promised_info.cc",
    "src/quic/test_tools/mock_quic_client_promised_info.h",
    "src/quic/test_tools/mock_quic_dispatcher.cc",
    "src/quic/test_tools/mock_quic_dispatcher.h",
    "src/quic/test_tools/mock_quic_session_visitor.cc",
    "src/quic/test_tools/mock_quic_session_visitor.h",
    "src/quic/test_tools/mock_quic_spdy_client_stream.cc",
    "src/quic/test_tools/mock_quic_spdy_client_stream.h",
    "src/quic/test_tools/mock_random.cc",
    "src/quic/test_tools/mock_random.h",
    "src/quic/test_tools/qpack/qpack_decoder_test_utils.cc",
    "src/quic/test_tools/qpack/qpack_decoder_test_utils.h",
    "src/quic/test_tools/qpack/qpack_encoder_peer.cc",
    "src/quic/test_tools/qpack/qpack_encoder_peer.h",
    "src/quic/test_tools/qpack/qpack_encoder_test_utils.cc",
    "src/quic/test_tools/qpack/qpack_encoder_test_utils.h",
    "src/quic/test_tools/qpack/qpack_header_table_peer.cc",
    "src/quic/test_tools/qpack/qpack_header_table_peer.h",
    "src/quic/test_tools/qpack/qpack_offline_decoder.cc",
    "src/quic/test_tools/qpack/qpack_offline_decoder.h",
    "src/quic/test_tools/qpack/qpack_test_utils.cc",
    "src/quic/test_tools/qpack/qpack_test_utils.h",
    "src/quic/test_tools/quic_buffered_packet_store_peer.cc",
    "src/quic/test_tools/quic_buffered_packet_store_peer.h",
    "src/quic/test_tools/quic_client_promised_info_peer.cc",
    "src/quic/test_tools/quic_client_promised_info_peer.h",
    "src/quic/test_tools/quic_config_peer.cc",
    "src/quic/test_tools/quic_config_peer.h",
    "src/quic/test_tools/quic_connection_peer.cc",
    "src/quic/test_tools/quic_connection_peer.h",
    "src/quic/test_tools/quic_crypto_server_config_peer.cc",
    "src/quic/test_tools/quic_crypto_server_config_peer.h",
    "src/quic/test_tools/quic_dispatcher_peer.cc",
    "src/quic/test_tools/quic_dispatcher_peer.h",
    "src/quic/test_tools/quic_flow_controller_peer.cc",
    "src/quic/test_tools/quic_flow_controller_peer.h",
    "src/quic/test_tools/quic_framer_peer.cc",
    "src/quic/test_tools/quic_framer_peer.h",
    "src/quic/test_tools/quic_interval_deque_peer.h",
    "src/quic/test_tools/quic_packet_creator_peer.cc",
    "src/quic/test_tools/quic_packet_creator_peer.h",
    "src/quic/test_tools/quic_sent_packet_manager_peer.cc",
    "src/quic/test_tools/quic_sent_packet_manager_peer.h",
    "src/quic/test_tools/quic_server_session_base_peer.h",
    "src/quic/test_tools/quic_session_peer.cc",
    "src/quic/test_tools/quic_session_peer.h",
    "src/quic/test_tools/quic_spdy_session_peer.cc",
    "src/quic/test_tools/quic_spdy_session_peer.h",
    "src/quic/test_tools/quic_spdy_stream_peer.cc",
    "src/quic/test_tools/quic_spdy_stream_peer.h",
    "src/quic/test_tools/quic_stream_id_manager_peer.cc",
    "src/quic/test_tools/quic_stream_id_manager_peer.h",
    "src/quic/test_tools/quic_stream_peer.cc",
    "src/quic/test_tools/quic_stream_peer.h",
    "src/quic/test_tools/quic_stream_send_buffer_peer.cc",
    "src/quic/test_tools/quic_stream_send_buffer_peer.h",
    "src/quic/test_tools/quic_stream_sequencer_buffer_peer.cc",
    "src/quic/test_tools/quic_stream_sequencer_buffer_peer.h",
    "src/quic/test_tools/quic_stream_sequencer_peer.cc",
    "src/quic/test_tools/quic_stream_sequencer_peer.h",
    "src/quic/test_tools/quic_sustained_bandwidth_recorder_peer.cc",
    "src/quic/test_tools/quic_sustained_bandwidth_recorder_peer.h",
    "src/quic/test_tools/quic_test_utils.cc",
    "src/quic/test_tools/quic_test_utils.h",
    "src/quic/test_tools/quic_time_wait_list_manager_peer.cc",
    "src/quic/test_tools/quic_time_wait_list_manager_peer.h",
    "src/quic/test_tools/quic_transport_test_tools.h",
    "src/quic/test_tools/quic_unacked_packet_map_peer.cc",
    "src/quic/test_tools/quic_unacked_packet_map_peer.h",
    "src/quic/test_tools/rtt_stats_peer.cc",
    "src/quic/test_tools/rtt_stats_peer.h",
    "src/quic/test_tools/send_algorithm_test_utils.cc",
    "src/quic/test_tools/send_algorithm_test_utils.h",
    "src/quic/test_tools/simple_data_producer.cc",
    "src/quic/test_tools/simple_data_producer.h",
    "src/quic/test_tools/simple_quic_framer.cc",
    "src/quic/test_tools/simple_quic_framer.h",
    "src/quic/test_tools/simple_session_cache.cc",
    "src/quic/test_tools/simple_session_cache.h",
    "src/quic/test_tools/simple_session_notifier.cc",
    "src/quic/test_tools/simple_session_notifier.h",
    "src/quic/test_tools/simulator/actor.cc",
    "src/quic/test_tools/simulator/actor.h",
    "src/quic/test_tools/simulator/alarm_factory.cc",
    "src/quic/test_tools/simulator/alarm_factory.h",
    "src/quic/test_tools/simulator/link.cc",
    "src/quic/test_tools/simulator/link.h",
    "src/quic/test_tools/simulator/packet_filter.cc",
    "src/quic/test_tools/simulator/packet_filter.h",
    "src/quic/test_tools/simulator/port.cc",
    "src/quic/test_tools/simulator/port.h",
    "src/quic/test_tools/simulator/queue.cc",
    "src/quic/test_tools/simulator/queue.h",
    "src/quic/test_tools/simulator/quic_endpoint.cc",
    "src/quic/test_tools/simulator/quic_endpoint.h",
    "src/quic/test_tools/simulator/quic_endpoint_base.cc",
    "src/quic/test_tools/simulator/quic_endpoint_base.h",
    "src/quic/test_tools/simulator/simulator.cc",
    "src/quic/test_tools/simulator/simulator.h",
    "src/quic/test_tools/simulator/switch.cc",
    "src/quic/test_tools/simulator/switch.h",
    "src/quic/test_tools/simulator/traffic_policer.cc",
    "src/quic/test_tools/simulator/traffic_policer.h",
    "src/quic/tools/quic_tcp_like_trace_converter.cc",
    "src/quic/tools/quic_tcp_like_trace_converter.h",
  ]

  deps = [
    "//base",
    "//crypto:test_support",
    "//net",
    "//net:quiche_test_tools",
    "//net:simple_quic_tools",
    "//net:test_support",
    "//testing/gmock",
    "//testing/gtest",
    "//third_party/boringssl",
    "//third_party/protobuf:protobuf_lite",
    "//third_party/quic_trace:quic_trace_proto",
  ]

  if (is_linux) {
    sources += [
      "src/epoll_server/fake_simple_epoll_server.cc",
      "src/epoll_server/fake_simple_epoll_server.h",
      "src/quic/test_tools/bad_packet_writer.cc",
      "src/quic/test_tools/bad_packet_writer.h",
      "src/quic/test_tools/limited_mtu_test_writer.cc",
      "src/quic/test_tools/limited_mtu_test_writer.h",
      "src/quic/test_tools/packet_dropping_test_writer.cc",
      "src/quic/test_tools/packet_dropping_test_writer.h",
      "src/quic/test_tools/packet_reordering_writer.cc",
      "src/quic/test_tools/packet_reordering_writer.h",
      "src/quic/test_tools/quic_client_peer.cc",
      "src/quic/test_tools/quic_client_peer.h",
      "src/quic/test_tools/quic_server_peer.cc",
      "src/quic/test_tools/quic_server_peer.h",
      "src/quic/test_tools/quic_test_client.cc",
      "src/quic/test_tools/quic_test_client.h",
      "src/quic/test_tools/quic_test_server.cc",
      "src/quic/test_tools/quic_test_server.h",
      "src/quic/test_tools/server_thread.cc",
      "src/quic/test_tools/server_thread.h",
    ]
    deps += [
      "//net:epoll_quic_tools",
      "//net:epoll_server",
    ]
  }
}

source_set("simple_quic_tools_core") {
  sources = [
    "src/quic/core/chlo_extractor.cc",
    "src/quic/core/chlo_extractor.h",
    "src/quic/core/http/quic_spdy_client_session.cc",
    "src/quic/core/http/quic_spdy_client_session.h",
    "src/quic/core/http/quic_spdy_client_stream.cc",
    "src/quic/core/http/quic_spdy_client_stream.h",
    "src/quic/core/http/quic_spdy_server_stream_base.cc",
    "src/quic/core/http/quic_spdy_server_stream_base.h",
    "src/quic/core/quic_dispatcher.cc",
    "src/quic/core/quic_dispatcher.h",
    "src/quic/core/quic_packet_writer_wrapper.cc",
    "src/quic/core/quic_packet_writer_wrapper.h",
    "src/quic/core/quic_process_packet_interface.h",
    "src/quic/core/quic_time_wait_list_manager.cc",
    "src/quic/core/quic_time_wait_list_manager.h",
    "src/quic/platform/api/quic_default_proof_providers.h",
    "src/quic/platform/api/quic_system_event_loop.h",
    "src/quic/tools/fake_proof_verifier.h",
    "src/quic/tools/quic_backend_response.cc",
    "src/quic/tools/quic_backend_response.h",
    "src/quic/tools/quic_client_base.cc",
    "src/quic/tools/quic_client_base.h",
    "src/quic/tools/quic_memory_cache_backend.cc",
    "src/quic/tools/quic_memory_cache_backend.h",
    "src/quic/tools/quic_simple_client_session.cc",
    "src/quic/tools/quic_simple_client_session.h",
    "src/quic/tools/quic_simple_client_stream.cc",
    "src/quic/tools/quic_simple_client_stream.h",
    "src/quic/tools/quic_simple_crypto_server_stream_helper.cc",
    "src/quic/tools/quic_simple_crypto_server_stream_helper.h",
    "src/quic/tools/quic_simple_dispatcher.cc",
    "src/quic/tools/quic_simple_dispatcher.h",
    "src/quic/tools/quic_simple_server_backend.h",
    "src/quic/tools/quic_simple_server_session.cc",
    "src/quic/tools/quic_simple_server_session.h",
    "src/quic/tools/quic_simple_server_stream.cc",
    "src/quic/tools/quic_simple_server_stream.h",
    "src/quic/tools/quic_spdy_client_base.cc",
    "src/quic/tools/quic_spdy_client_base.h",
    "src/quic/tools/quic_spdy_server_base.h",
    "src/quic/tools/quic_transport_simple_server_dispatcher.cc",
    "src/quic/tools/quic_transport_simple_server_dispatcher.h",
    "src/quic/tools/quic_transport_simple_server_session.cc",
    "src/quic/tools/quic_transport_simple_server_session.h",
    "src/quic/tools/quic_url.cc",
    "src/quic/tools/quic_url.h",
  ]
  deps = [
    "//base",
    "//base/third_party/dynamic_annotations",
    "//net",
    "//third_party/protobuf:protobuf_lite",
    "//url",
  ]
}

source_set("quic_client_core") {
  sources = [
    "src/quic/tools/quic_toy_client.cc",
    "src/quic/tools/quic_toy_client.h",
  ]
  deps = [
    "//net",
    "//net:simple_quic_tools",
  ]
}

source_set("quic_server_core") {
  sources = [
    "src/quic/tools/quic_toy_server.cc",
    "src/quic/tools/quic_toy_server.h",
  ]
  deps = [
    "//net",
    "//net:simple_quic_tools",
  ]
}

if (!is_ios) {
  executable("quic_packet_printer") {
    sources = [ "src/quic/tools/quic_packet_printer_bin.cc" ]
    deps = [
      "//base",
      "//build/win:default_exe_manifest",
      "//net",
      "//net:simple_quic_tools",
      "//third_party/boringssl",
      "//third_party/protobuf:protobuf_lite",
    ]
  }

  executable("quic_crypto_message_printer") {
    sources = [ "src/quic/core/crypto/crypto_message_printer_bin.cc" ]
    deps = [
      "//base",
      "//build/win:default_exe_manifest",
      "//net",
      "//net:simple_quic_tools",
      "//third_party/boringssl",
      "//third_party/protobuf:protobuf_lite",
    ]
  }

  executable("quic_reject_reason_decoder") {
    sources = [ "src/quic/tools/quic_reject_reason_decoder_bin.cc" ]
    deps = [
      "//base",
      "//build/win:default_exe_manifest",
      "//net",
      "//net:simple_quic_tools",
      "//third_party/boringssl",
      "//third_party/protobuf:protobuf_lite",
    ]
  }

  executable("qpack_offline_decoder") {
    testonly = true
    sources = [ "src/quic/core/qpack/qpack_offline_decoder_bin.cc" ]
    deps = [
      "//base",
      "//net",
      "//net:quic_test_tools",
      "//net:simple_quic_tools",
      "//testing/gmock",
    ]
  }
}

source_set("quiche_tests") {
  testonly = true
  sources = [
    "src/common/quiche_data_writer_test.cc",
    "src/common/simple_linked_hash_map_test.cc",
    "src/http2/decoder/decode_buffer_test.cc",
    "src/http2/decoder/decode_http2_structures_test.cc",
    "src/http2/decoder/frame_decoder_state_test_util.cc",
    "src/http2/decoder/frame_decoder_state_test_util.h",
    "src/http2/decoder/http2_frame_decoder_listener_test_util.cc",
    "src/http2/decoder/http2_frame_decoder_listener_test_util.h",
    "src/http2/decoder/http2_frame_decoder_test.cc",
    "src/http2/decoder/http2_structure_decoder_test.cc",
    "src/http2/decoder/http2_structure_decoder_test_util.cc",
    "src/http2/decoder/http2_structure_decoder_test_util.h",
    "src/http2/decoder/payload_decoders/altsvc_payload_decoder_test.cc",
    "src/http2/decoder/payload_decoders/continuation_payload_decoder_test.cc",
    "src/http2/decoder/payload_decoders/data_payload_decoder_test.cc",
    "src/http2/decoder/payload_decoders/goaway_payload_decoder_test.cc",
    "src/http2/decoder/payload_decoders/headers_payload_decoder_test.cc",
    "src/http2/decoder/payload_decoders/payload_decoder_base_test_util.cc",
    "src/http2/decoder/payload_decoders/payload_decoder_base_test_util.h",
    "src/http2/decoder/payload_decoders/ping_payload_decoder_test.cc",
    "src/http2/decoder/payload_decoders/priority_payload_decoder_test.cc",
    "src/http2/decoder/payload_decoders/push_promise_payload_decoder_test.cc",
    "src/http2/decoder/payload_decoders/rst_stream_payload_decoder_test.cc",
    "src/http2/decoder/payload_decoders/settings_payload_decoder_test.cc",
    "src/http2/decoder/payload_decoders/unknown_payload_decoder_test.cc",
    "src/http2/decoder/payload_decoders/window_update_payload_decoder_test.cc",
    "src/http2/hpack/decoder/hpack_block_collector.cc",
    "src/http2/hpack/decoder/hpack_block_collector.h",
    "src/http2/hpack/decoder/hpack_block_decoder_test.cc",
    "src/http2/hpack/decoder/hpack_decoder_state_test.cc",
    "src/http2/hpack/decoder/hpack_decoder_string_buffer_test.cc",
    "src/http2/hpack/decoder/hpack_decoder_tables_test.cc",
    "src/http2/hpack/decoder/hpack_decoder_test.cc",
    "src/http2/hpack/decoder/hpack_entry_collector.cc",
    "src/http2/hpack/decoder/hpack_entry_collector.h",
    "src/http2/hpack/decoder/hpack_entry_decoder_test.cc",
    "src/http2/hpack/decoder/hpack_entry_type_decoder_test.cc",
    "src/http2/hpack/decoder/hpack_string_collector.cc",
    "src/http2/hpack/decoder/hpack_string_collector.h",
    "src/http2/hpack/decoder/hpack_string_decoder_test.cc",
    "src/http2/hpack/decoder/hpack_whole_entry_buffer_test.cc",
    "src/http2/hpack/hpack_string_test.cc",
    "src/http2/hpack/http2_hpack_constants_test.cc",
    "src/http2/hpack/huffman/hpack_huffman_decoder_test.cc",
    "src/http2/hpack/huffman/hpack_huffman_encoder_test.cc",
    "src/http2/hpack/huffman/hpack_huffman_transcoder_test.cc",
    "src/http2/hpack/tools/hpack_block_builder.cc",
    "src/http2/hpack/tools/hpack_block_builder.h",
    "src/http2/hpack/tools/hpack_block_builder_test.cc",
    "src/http2/hpack/tools/hpack_example.cc",
    "src/http2/hpack/tools/hpack_example.h",
    "src/http2/hpack/varint/hpack_varint_decoder_test.cc",
    "src/http2/hpack/varint/hpack_varint_encoder_test.cc",
    "src/http2/hpack/varint/hpack_varint_round_trip_test.cc",
    "src/http2/http2_constants_test.cc",
    "src/http2/http2_constants_test_util.cc",
    "src/http2/http2_constants_test_util.h",
    "src/http2/http2_structures_test.cc",
    "src/http2/http2_structures_test_util.cc",
    "src/http2/http2_structures_test_util.h",
    "src/http2/platform/api/http2_string_utils_test.cc",
    "src/http2/platform/api/http2_test_helpers.h",
    "src/http2/test_tools/frame_parts.cc",
    "src/http2/test_tools/frame_parts.h",
    "src/http2/test_tools/frame_parts_collector.cc",
    "src/http2/test_tools/frame_parts_collector.h",
    "src/http2/test_tools/frame_parts_collector_listener.cc",
    "src/http2/test_tools/frame_parts_collector_listener.h",
    "src/http2/test_tools/http2_random.cc",
    "src/http2/test_tools/http2_random.h",
    "src/http2/test_tools/http2_random_test.cc",
    "src/http2/tools/http2_frame_builder.cc",
    "src/http2/tools/http2_frame_builder.h",
    "src/http2/tools/random_decoder_test.cc",
    "src/http2/tools/random_decoder_test.h",
    "src/http2/tools/random_util.cc",
    "src/http2/tools/random_util.h",
    "src/quic/core/congestion_control/bandwidth_sampler_test.cc",

    # TODO(rch): Re-enable once the SLOW_TEST annotation is added.
    # "src/quic/core/congestion_control/bbr2_simulator_test.cc",
    "src/common/platform/api/quiche_endian_test.cc",
    "src/common/platform/api/quiche_str_cat_test.cc",
    "src/common/platform/api/quiche_text_utils_test.cc",
    "src/quic/core/congestion_control/bbr_sender_test.cc",
    "src/quic/core/congestion_control/cubic_bytes_test.cc",
    "src/quic/core/congestion_control/general_loss_algorithm_test.cc",
    "src/quic/core/congestion_control/hybrid_slow_start_test.cc",
    "src/quic/core/congestion_control/pacing_sender_test.cc",
    "src/quic/core/congestion_control/prr_sender_test.cc",
    "src/quic/core/congestion_control/rtt_stats_test.cc",
    "src/quic/core/congestion_control/send_algorithm_test.cc",
    "src/quic/core/congestion_control/tcp_cubic_sender_bytes_test.cc",
    "src/quic/core/congestion_control/uber_loss_algorithm_test.cc",
    "src/quic/core/congestion_control/windowed_filter_test.cc",
    "src/quic/core/crypto/aes_128_gcm_12_decrypter_test.cc",
    "src/quic/core/crypto/aes_128_gcm_12_encrypter_test.cc",
    "src/quic/core/crypto/aes_128_gcm_decrypter_test.cc",
    "src/quic/core/crypto/aes_128_gcm_encrypter_test.cc",
    "src/quic/core/crypto/aes_256_gcm_decrypter_test.cc",
    "src/quic/core/crypto/aes_256_gcm_encrypter_test.cc",
    "src/quic/core/crypto/cert_compressor_test.cc",
    "src/quic/core/crypto/certificate_view_test.cc",
    "src/quic/core/crypto/chacha20_poly1305_decrypter_test.cc",
    "src/quic/core/crypto/chacha20_poly1305_encrypter_test.cc",
    "src/quic/core/crypto/chacha20_poly1305_tls_decrypter_test.cc",
    "src/quic/core/crypto/chacha20_poly1305_tls_encrypter_test.cc",
    "src/quic/core/crypto/channel_id_test.cc",
    "src/quic/core/crypto/common_cert_set_test.cc",
    "src/quic/core/crypto/crypto_framer_test.cc",
    "src/quic/core/crypto/crypto_handshake_message_test.cc",
    "src/quic/core/crypto/crypto_secret_boxer_test.cc",
    "src/quic/core/crypto/crypto_server_test.cc",
    "src/quic/core/crypto/crypto_utils_test.cc",
    "src/quic/core/crypto/curve25519_key_exchange_test.cc",
    "src/quic/core/crypto/null_decrypter_test.cc",
    "src/quic/core/crypto/null_encrypter_test.cc",
    "src/quic/core/crypto/p256_key_exchange_test.cc",
    "src/quic/core/crypto/quic_compressed_certs_cache_test.cc",
    "src/quic/core/crypto/quic_crypto_client_config_test.cc",
    "src/quic/core/crypto/quic_crypto_server_config_test.cc",
    "src/quic/core/crypto/quic_hkdf_test.cc",
    "src/quic/core/crypto/quic_random_test.cc",
    "src/quic/core/crypto/transport_parameters_test.cc",
    "src/quic/core/frames/quic_frames_test.cc",
    "src/quic/core/http/http_decoder_test.cc",
    "src/quic/core/http/http_encoder_test.cc",
    "src/quic/core/http/quic_client_promised_info_test.cc",
    "src/quic/core/http/quic_client_push_promise_index_test.cc",
    "src/quic/core/http/quic_header_list_test.cc",
    "src/quic/core/http/quic_headers_stream_test.cc",
    "src/quic/core/http/quic_receive_control_stream_test.cc",
    "src/quic/core/http/quic_send_control_stream_test.cc",
    "src/quic/core/http/quic_server_session_base_test.cc",
    "src/quic/core/http/quic_spdy_session_test.cc",
    "src/quic/core/http/quic_spdy_stream_body_manager_test.cc",
    "src/quic/core/http/quic_spdy_stream_test.cc",
    "src/quic/core/http/spdy_server_push_utils_test.cc",
    "src/quic/core/http/spdy_utils_test.cc",
    "src/quic/core/legacy_quic_stream_id_manager_test.cc",
    "src/quic/core/packet_number_indexed_queue_test.cc",
    "src/quic/core/qpack/qpack_blocking_manager_test.cc",
    "src/quic/core/qpack/qpack_decoded_headers_accumulator_test.cc",
    "src/quic/core/qpack/qpack_decoder_stream_receiver_test.cc",
    "src/quic/core/qpack/qpack_decoder_stream_sender_test.cc",
    "src/quic/core/qpack/qpack_decoder_test.cc",
    "src/quic/core/qpack/qpack_encoder_stream_receiver_test.cc",
    "src/quic/core/qpack/qpack_encoder_stream_sender_test.cc",
    "src/quic/core/qpack/qpack_encoder_test.cc",
    "src/quic/core/qpack/qpack_header_table_test.cc",
    "src/quic/core/qpack/qpack_index_conversions_test.cc",
    "src/quic/core/qpack/qpack_instruction_decoder_test.cc",
    "src/quic/core/qpack/qpack_instruction_encoder_test.cc",
    "src/quic/core/qpack/qpack_receive_stream_test.cc",
    "src/quic/core/qpack/qpack_required_insert_count_test.cc",
    "src/quic/core/qpack/qpack_round_trip_test.cc",
    "src/quic/core/qpack/qpack_send_stream_test.cc",
    "src/quic/core/qpack/qpack_static_table_test.cc",
    "src/quic/core/qpack/value_splitting_header_list_test.cc",
    "src/quic/core/quic_alarm_test.cc",
    "src/quic/core/quic_arena_scoped_ptr_test.cc",
    "src/quic/core/quic_bandwidth_test.cc",
    "src/quic/core/quic_buffered_packet_store_test.cc",
    "src/quic/core/quic_circular_deque_test.cc",
    "src/quic/core/quic_coalesced_packet_test.cc",
    "src/quic/core/quic_config_test.cc",
    "src/quic/core/quic_connection_id_test.cc",
    "src/quic/core/quic_connection_test.cc",
    "src/quic/core/quic_control_frame_manager_test.cc",
    "src/quic/core/quic_crypto_client_handshaker_test.cc",
    "src/quic/core/quic_crypto_client_stream_test.cc",
    "src/quic/core/quic_crypto_server_stream_test.cc",
    "src/quic/core/quic_crypto_stream_test.cc",
    "src/quic/core/quic_data_writer_test.cc",
    "src/quic/core/quic_datagram_queue_test.cc",
    "src/quic/core/quic_dispatcher_test.cc",
    "src/quic/core/quic_error_codes_test.cc",
    "src/quic/core/quic_flow_controller_test.cc",
    "src/quic/core/quic_framer_test.cc",
    "src/quic/core/quic_idle_network_detector_test.cc",
    "src/quic/core/quic_interval_deque_test.cc",
    "src/quic/core/quic_interval_set_test.cc",
    "src/quic/core/quic_interval_test.cc",
    "src/quic/core/quic_lru_cache_test.cc",
    "src/quic/core/quic_network_blackhole_detector_test.cc",
    "src/quic/core/quic_one_block_arena_test.cc",
    "src/quic/core/quic_packet_creator_test.cc",
    "src/quic/core/quic_packet_number_test.cc",
    "src/quic/core/quic_packets_test.cc",
    "src/quic/core/quic_received_packet_manager_test.cc",
    "src/quic/core/quic_sent_packet_manager_test.cc",
    "src/quic/core/quic_server_id_test.cc",
    "src/quic/core/quic_session_test.cc",
    "src/quic/core/quic_simple_buffer_allocator_test.cc",
    "src/quic/core/quic_socket_address_coder_test.cc",
    "src/quic/core/quic_stream_id_manager_test.cc",
    "src/quic/core/quic_stream_send_buffer_test.cc",
    "src/quic/core/quic_stream_sequencer_buffer_test.cc",
    "src/quic/core/quic_stream_sequencer_test.cc",
    "src/quic/core/quic_stream_test.cc",
    "src/quic/core/quic_sustained_bandwidth_recorder_test.cc",
    "src/quic/core/quic_tag_test.cc",
    "src/quic/core/quic_time_accumulator_test.cc",
    "src/quic/core/quic_time_test.cc",
    "src/quic/core/quic_time_wait_list_manager_test.cc",
    "src/quic/core/quic_trace_visitor_test.cc",
    "src/quic/core/quic_types_test.cc",
    "src/quic/core/quic_unacked_packet_map_test.cc",
    "src/quic/core/quic_utils_test.cc",
    "src/quic/core/quic_version_manager_test.cc",
    "src/quic/core/quic_versions_test.cc",
    "src/quic/core/quic_write_blocked_list_test.cc",
    "src/quic/core/tls_handshaker_test.cc",
    "src/quic/core/uber_quic_stream_id_manager_test.cc",
    "src/quic/core/uber_received_packet_manager_test.cc",
    "src/quic/platform/api/quic_containers_test.cc",
    "src/quic/platform/api/quic_hostname_utils_test.cc",
    "src/quic/platform/api/quic_ip_address_test.cc",
    "src/quic/platform/api/quic_mem_slice_span_test.cc",
    "src/quic/platform/api/quic_mem_slice_storage_test.cc",
    "src/quic/platform/api/quic_mem_slice_test.cc",
    "src/quic/platform/api/quic_reference_counted_test.cc",
    "src/quic/platform/api/quic_socket_address_test.cc",
    "src/quic/platform/api/quic_string_utils_test.cc",
    "src/quic/quic_transport/quic_transport_client_session_test.cc",
    "src/quic/quic_transport/quic_transport_integration_test.cc",
    "src/quic/quic_transport/quic_transport_server_session_test.cc",
    "src/quic/quic_transport/quic_transport_stream_test.cc",
    "src/quic/test_tools/crypto_test_utils_test.cc",
    "src/quic/test_tools/mock_quic_time_wait_list_manager.cc",
    "src/quic/test_tools/mock_quic_time_wait_list_manager.h",
    "src/quic/test_tools/quic_test_utils_test.cc",
    "src/quic/test_tools/simple_session_notifier_test.cc",
    "src/quic/test_tools/simulator/quic_endpoint_test.cc",
    "src/quic/test_tools/simulator/simulator_test.cc",
    "src/quic/tools/quic_memory_cache_backend_test.cc",
    "src/quic/tools/quic_tcp_like_trace_converter_test.cc",
    "src/spdy/core/array_output_buffer.cc",
    "src/spdy/core/array_output_buffer.h",
    "src/spdy/core/array_output_buffer_test.cc",
    "src/spdy/core/fifo_write_scheduler_test.cc",
    "src/spdy/core/hpack/hpack_decoder_adapter_test.cc",
    "src/spdy/core/hpack/hpack_encoder_test.cc",
    "src/spdy/core/hpack/hpack_entry_test.cc",
    "src/spdy/core/hpack/hpack_header_table_test.cc",
    "src/spdy/core/hpack/hpack_huffman_table_test.cc",
    "src/spdy/core/hpack/hpack_output_stream_test.cc",
    "src/spdy/core/hpack/hpack_round_trip_test.cc",
    "src/spdy/core/hpack/hpack_static_table_test.cc",
    "src/spdy/core/http2_priority_write_scheduler_test.cc",
    "src/spdy/core/lifo_write_scheduler_test.cc",
    "src/spdy/core/mock_spdy_framer_visitor.cc",
    "src/spdy/core/mock_spdy_framer_visitor.h",
    "src/spdy/core/priority_write_scheduler_test.cc",
    "src/spdy/core/spdy_alt_svc_wire_format_test.cc",
    "src/spdy/core/spdy_deframer_visitor.cc",
    "src/spdy/core/spdy_deframer_visitor.h",
    "src/spdy/core/spdy_deframer_visitor_test.cc",
    "src/spdy/core/spdy_frame_builder_test.cc",
    "src/spdy/core/spdy_frame_reader_test.cc",
    "src/spdy/core/spdy_framer_test.cc",
    "src/spdy/core/spdy_header_block_test.cc",
    "src/spdy/core/spdy_header_storage_test.cc",
    "src/spdy/core/spdy_intrusive_list_test.cc",
    "src/spdy/core/spdy_no_op_visitor.cc",
    "src/spdy/core/spdy_no_op_visitor.h",
    "src/spdy/core/spdy_pinnable_buffer_piece_test.cc",
    "src/spdy/core/spdy_prefixed_buffer_reader_test.cc",
    "src/spdy/core/spdy_protocol_test.cc",
    "src/spdy/core/spdy_protocol_test_utils.cc",
    "src/spdy/core/spdy_protocol_test_utils.h",
    "src/spdy/core/spdy_simple_arena_test.cc",
    "src/spdy/core/spdy_test_utils.cc",
    "src/spdy/core/spdy_test_utils.h",
    "src/spdy/platform/api/spdy_mem_slice_test.cc",
    "src/spdy/platform/api/spdy_string_utils_test.cc",
    "src/spdy/platform/api/spdy_test_helpers.h",
  ]

  # Disable building Quartc tests on iOS as they appear to be flaky there.
  if (!is_ios) {
    sources += [
      "src/quic/quartc/counting_packet_filter.h",
      "src/quic/quartc/quartc_connection_helper.cc",
      "src/quic/quartc/quartc_connection_helper.h",
      "src/quic/quartc/quartc_crypto_helpers.cc",
      "src/quic/quartc/quartc_crypto_helpers.h",
      "src/quic/quartc/quartc_dispatcher.cc",
      "src/quic/quartc/quartc_dispatcher.h",
      "src/quic/quartc/quartc_endpoint.cc",
      "src/quic/quartc/quartc_endpoint.h",
      "src/quic/quartc/quartc_endpoint_test.cc",
      "src/quic/quartc/quartc_factory.cc",
      "src/quic/quartc/quartc_factory.h",
      "src/quic/quartc/quartc_fakes.h",
      "src/quic/quartc/quartc_interval_counter.h",
      "src/quic/quartc/quartc_interval_counter_test.cc",
      "src/quic/quartc/quartc_multiplexer.cc",
      "src/quic/quartc/quartc_multiplexer.h",
      "src/quic/quartc/quartc_multiplexer_test.cc",
      "src/quic/quartc/quartc_packet_writer.cc",
      "src/quic/quartc/quartc_packet_writer.h",
      "src/quic/quartc/quartc_session.cc",
      "src/quic/quartc/quartc_session.h",
      "src/quic/quartc/quartc_session_test.cc",
      "src/quic/quartc/quartc_stream.cc",
      "src/quic/quartc/quartc_stream.h",
      "src/quic/quartc/quartc_stream_test.cc",
      "src/quic/quartc/simulated_packet_transport.cc",
      "src/quic/quartc/simulated_packet_transport.h",
      "src/quic/quartc/simulated_packet_transport_test.cc",
      "src/quic/quartc/test/bidi_test_runner.cc",
      "src/quic/quartc/test/bidi_test_runner.h",
      "src/quic/quartc/test/quartc_bidi_test.cc",
      "src/quic/quartc/test/quartc_competing_endpoint.cc",
      "src/quic/quartc/test/quartc_competing_endpoint.h",
      "src/quic/quartc/test/quartc_data_source.cc",
      "src/quic/quartc/test/quartc_data_source.h",
      "src/quic/quartc/test/quartc_data_source_test.cc",
      "src/quic/quartc/test/quartc_peer.cc",
      "src/quic/quartc/test/quartc_peer.h",
      "src/quic/quartc/test/quartc_peer_test.cc",
      "src/quic/quartc/test/quic_trace_interceptor.cc",
      "src/quic/quartc/test/quic_trace_interceptor.h",
      "src/quic/quartc/test/random_delay_link.cc",
      "src/quic/quartc/test/random_delay_link.h",
      "src/quic/quartc/test/random_packet_filter.cc",
      "src/quic/quartc/test/random_packet_filter.h",
    ]
  }

  deps = [
    "//net",
    "//net:quic_test_tools",
    "//net:quiche_test_tools",
    "//net:simple_quic_tools",
    "//net:spdy_test_tools",
    "//testing/gmock",
    "//testing/gtest",
  ]
  public_deps = []

  if (is_desktop_linux) {
    public_deps += [ "//net:epoll_quic_tools" ]
  }
  if (is_linux) {
    sources += [
      "src/epoll_server/simple_epoll_server_test.cc",
      "src/quic/core/chlo_extractor_test.cc",
      "src/quic/core/http/end_to_end_test.cc",
      "src/quic/core/http/quic_spdy_client_session_test.cc",
      "src/quic/core/http/quic_spdy_client_stream_test.cc",
      "src/quic/core/http/quic_spdy_server_stream_base_test.cc",
      "src/quic/core/quic_epoll_alarm_factory_test.cc",
      "src/quic/core/quic_epoll_connection_helper_test.cc",
      "src/quic/tools/quic_client_test.cc",
      "src/quic/tools/quic_server_test.cc",
      "src/quic/tools/quic_simple_server_session_test.cc",
      "src/quic/tools/quic_simple_server_stream_test.cc",
      "src/quic/tools/quic_url_test.cc",
    ]
    public_deps += [
      "//net:epoll_quic_tools",
      "//net:epoll_server",
      "//net:epoll_server_test_tools",
    ]

    if (!is_chromeos) {
      sources += [ "src/quic/core/quic_udp_socket_test.cc" ]
    }
  }
}

fuzzer_test("net_quic_framer_fuzzer") {
  sources = [ "src/quic/test_tools/fuzzing/quic_framer_fuzzer.cc" ]

  deps = [
    "//net",
    "//net:net_fuzzer_test_support",
    "//net:quic_test_tools",
    "//net:test_support",
    "//net/data/ssl/certificates:generate_fuzzer_cert_includes",
  ]
}

fuzzer_test("net_quic_framer_process_data_packet_fuzzer") {
  sources = [
    "src/quic/test_tools/fuzzing/quic_framer_process_data_packet_fuzzer.cc",
  ]

  deps = [
    "//net",
    "//net:net_fuzzer_test_support",
    "//net:quic_test_tools",
    "//net:test_support",
    "//net/data/ssl/certificates:generate_fuzzer_cert_includes",
  ]
}

fuzzer_test("net_qpack_decoder_fuzzer") {
  sources = [ "src/quic/core/qpack/fuzzer/qpack_decoder_fuzzer.cc" ]
  deps = [
    "//base",
    "//net",
    "//net:net_fuzzer_test_support",
    "//net:quic_test_tools",
    "//net:test_support",
  ]
  seed_corpus = "src/quic/core/qpack/fuzzer/qpack_decoder_fuzzer_corpus/"
}

fuzzer_test("net_qpack_encoder_stream_receiver_fuzzer") {
  sources =
      [ "src/quic/core/qpack/fuzzer/qpack_encoder_stream_receiver_fuzzer.cc" ]
  deps = [
    "//base",
    "//net",
    "//net:net_fuzzer_test_support",
  ]
  seed_corpus =
      "src/quic/core/qpack/fuzzer/qpack_encoder_stream_receiver_fuzzer_corpus/"
}

fuzzer_test("net_qpack_encoder_stream_sender_fuzzer") {
  sources =
      [ "src/quic/core/qpack/fuzzer/qpack_encoder_stream_sender_fuzzer.cc" ]
  deps = [
    "//base",
    "//net",
    "//net:net_fuzzer_test_support",
    "//net:quic_test_tools",
    "//net:test_support",
  ]
  seed_corpus =
      "src/quic/core/qpack/fuzzer/qpack_encoder_stream_sender_fuzzer_corpus/"
}

fuzzer_test("net_qpack_round_trip_fuzzer") {
  sources = [ "src/quic/core/qpack/fuzzer/qpack_round_trip_fuzzer.cc" ]
  deps = [
    "//base",
    "//net",
    "//net:net_fuzzer_test_support",
    "//net:quic_test_tools",
    "//net:test_support",
  ]
  seed_corpus = "src/quic/core/qpack/fuzzer/qpack_round_trip_fuzzer_corpus/"
}
