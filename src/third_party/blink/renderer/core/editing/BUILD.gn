# Copyright 2016 The Chromium Authors. All rights reserved.
# Use of this source code is governed by a BSD-style license that can be
# found in the LICENSE file.

import("//third_party/blink/renderer/core/core.gni")

blink_core_sources("editing") {
  sources = [
    "caret_display_item_client.cc",
    "caret_display_item_client.h",
    "commands/append_node_command.cc",
    "commands/append_node_command.h",
    "commands/apply_block_element_command.cc",
    "commands/apply_block_element_command.h",
    "commands/apply_style_command.cc",
    "commands/apply_style_command.h",
    "commands/break_blockquote_command.cc",
    "commands/break_blockquote_command.h",
    "commands/clipboard_commands.cc",
    "commands/clipboard_commands.h",
    "commands/composite_edit_command.cc",
    "commands/composite_edit_command.h",
    "commands/create_link_command.cc",
    "commands/create_link_command.h",
    "commands/delete_from_text_node_command.cc",
    "commands/delete_from_text_node_command.h",
    "commands/delete_selection_command.cc",
    "commands/delete_selection_command.h",
    "commands/delete_selection_options.cc",
    "commands/delete_selection_options.h",
    "commands/document_exec_command.cc",
    "commands/drag_and_drop_command.cc",
    "commands/drag_and_drop_command.h",
    "commands/edit_command.cc",
    "commands/edit_command.h",
    "commands/editing_command_type.h",
    "commands/editing_commands_utilities.cc",
    "commands/editing_commands_utilities.h",
    "commands/editing_state.cc",
    "commands/editing_state.h",
    "commands/editor_command.cc",
    "commands/editor_command.h",
    "commands/editor_command_names.h",
    "commands/format_block_command.cc",
    "commands/format_block_command.h",
    "commands/indent_outdent_command.cc",
    "commands/indent_outdent_command.h",
    "commands/insert_commands.cc",
    "commands/insert_commands.h",
    "commands/insert_incremental_text_command.cc",
    "commands/insert_incremental_text_command.h",
    "commands/insert_into_text_node_command.cc",
    "commands/insert_into_text_node_command.h",
    "commands/insert_line_break_command.cc",
    "commands/insert_line_break_command.h",
    "commands/insert_list_command.cc",
    "commands/insert_list_command.h",
    "commands/insert_node_before_command.cc",
    "commands/insert_node_before_command.h",
    "commands/insert_paragraph_separator_command.cc",
    "commands/insert_paragraph_separator_command.h",
    "commands/insert_text_command.cc",
    "commands/insert_text_command.h",
    "commands/merge_identical_elements_command.cc",
    "commands/merge_identical_elements_command.h",
    "commands/move_commands.cc",
    "commands/move_commands.h",
    "commands/remove_css_property_command.cc",
    "commands/remove_css_property_command.h",
    "commands/remove_format_command.cc",
    "commands/remove_format_command.h",
    "commands/remove_node_command.cc",
    "commands/remove_node_command.h",
    "commands/remove_node_preserving_children_command.cc",
    "commands/remove_node_preserving_children_command.h",
    "commands/replace_node_with_span_command.cc",
    "commands/replace_node_with_span_command.h",
    "commands/replace_selection_command.cc",
    "commands/replace_selection_command.h",
    "commands/selection_for_undo_step.cc",
    "commands/selection_for_undo_step.h",
    "commands/set_character_data_command.cc",
    "commands/set_character_data_command.h",
    "commands/set_node_attribute_command.cc",
    "commands/set_node_attribute_command.h",
    "commands/simplify_markup_command.cc",
    "commands/simplify_markup_command.h",
    "commands/smart_replace.h",
    "commands/smart_replace_icu.cc",
    "commands/split_element_command.cc",
    "commands/split_element_command.h",
    "commands/split_text_node_command.cc",
    "commands/split_text_node_command.h",
    "commands/split_text_node_containing_element_command.cc",
    "commands/split_text_node_containing_element_command.h",
    "commands/style_commands.cc",
    "commands/style_commands.h",
    "commands/typing_command.cc",
    "commands/typing_command.h",
    "commands/undo_stack.cc",
    "commands/undo_stack.h",
    "commands/undo_step.cc",
    "commands/undo_step.h",
    "commands/unlink_command.cc",
    "commands/unlink_command.h",
    "commands/wrap_contents_in_dummy_span_command.cc",
    "commands/wrap_contents_in_dummy_span_command.h",
    "compute_layer_selection.cc",
    "compute_layer_selection.h",
    "dom_selection.cc",
    "dom_selection.h",
    "drag_caret.cc",
    "drag_caret.h",
    "editing_behavior.cc",
    "editing_behavior.h",
    "editing_behavior_types.h",
    "editing_boundary.h",
    "editing_strategy.cc",
    "editing_strategy.h",
    "editing_style.cc",
    "editing_style.h",
    "editing_style_utilities.cc",
    "editing_style_utilities.h",
    "editing_tri_state.h",
    "editing_utilities.cc",
    "editing_utilities.h",
    "editor.cc",
    "editor.h",
    "editor_key_bindings.cc",
    "element_inner_text.cc",
    "ephemeral_range.cc",
    "ephemeral_range.h",
    "finder/find_buffer.cc",
    "finder/find_buffer.h",
    "finder/find_in_page_coordinates.cc",
    "finder/find_in_page_coordinates.h",
    "finder/find_task_controller.cc",
    "finder/find_task_controller.h",
    "finder/text_finder.cc",
    "finder/text_finder.h",
    "forward.h",
    "frame_caret.cc",
    "frame_caret.h",
    "frame_selection.cc",
    "frame_selection.h",
    "granularity_strategy.cc",
    "granularity_strategy.h",
    "ime/edit_context.cc",
    "ime/edit_context.h",
    "ime/ime_text_span.cc",
    "ime/ime_text_span.h",
    "ime/ime_text_span_vector_builder.cc",
    "ime/ime_text_span_vector_builder.h",
    "ime/input_method_controller.cc",
    "ime/input_method_controller.h",
    "ime/text_format_update_event.cc",
    "ime/text_format_update_event.h",
    "ime/text_update_event.cc",
    "ime/text_update_event.h",
    "inline_box_position.cc",
    "inline_box_position.h",
    "inline_box_traversal.cc",
    "inline_box_traversal.h",
    "iterators/backwards_character_iterator.cc",
    "iterators/backwards_character_iterator.h",
    "iterators/bit_stack.cc",
    "iterators/bit_stack.h",
    "iterators/character_iterator.cc",
    "iterators/character_iterator.h",
    "iterators/fully_clipped_state_stack.cc",
    "iterators/fully_clipped_state_stack.h",
    "iterators/simplified_backwards_text_iterator.cc",
    "iterators/simplified_backwards_text_iterator.h",
    "iterators/text_iterator.cc",
    "iterators/text_iterator.h",
    "iterators/text_iterator_behavior.cc",
    "iterators/text_iterator_behavior.h",
    "iterators/text_iterator_text_node_handler.cc",
    "iterators/text_iterator_text_node_handler.h",
    "iterators/text_iterator_text_state.cc",
    "iterators/text_iterator_text_state.h",
    "iterators/text_searcher_icu.cc",
    "iterators/text_searcher_icu.h",
    "kill_ring.h",
    "layout_selection.cc",
    "layout_selection.h",
    "local_caret_rect.cc",
    "local_caret_rect.h",
    "markers/active_suggestion_marker.cc",
    "markers/active_suggestion_marker.h",
    "markers/active_suggestion_marker_list_impl.cc",
    "markers/active_suggestion_marker_list_impl.h",
    "markers/composition_marker.cc",
    "markers/composition_marker.h",
    "markers/composition_marker_list_impl.cc",
    "markers/composition_marker_list_impl.h",
    "markers/document_marker.cc",
    "markers/document_marker.h",
    "markers/document_marker_controller.cc",
    "markers/document_marker_controller.h",
    "markers/document_marker_list.cc",
    "markers/document_marker_list.h",
    "markers/grammar_marker.cc",
    "markers/grammar_marker.h",
    "markers/grammar_marker_list_impl.cc",
    "markers/grammar_marker_list_impl.h",
    "markers/sorted_document_marker_list_editor.cc",
    "markers/sorted_document_marker_list_editor.h",
    "markers/spell_check_marker.cc",
    "markers/spell_check_marker.h",
    "markers/spell_check_marker_list_impl.cc",
    "markers/spell_check_marker_list_impl.h",
    "markers/spelling_marker.cc",
    "markers/spelling_marker.h",
    "markers/spelling_marker_list_impl.cc",
    "markers/spelling_marker_list_impl.h",
    "markers/styleable_marker.cc",
    "markers/styleable_marker.h",
    "markers/suggestion_marker.cc",
    "markers/suggestion_marker.h",
    "markers/suggestion_marker_list_impl.cc",
    "markers/suggestion_marker_list_impl.h",
    "markers/suggestion_marker_properties.cc",
    "markers/suggestion_marker_properties.h",
    "markers/suggestion_marker_replacement_scope.cc",
    "markers/suggestion_marker_replacement_scope.h",
    "markers/text_fragment_marker.cc",
    "markers/text_fragment_marker.h",
    "markers/text_fragment_marker_list_impl.cc",
    "markers/text_fragment_marker_list_impl.h",
    "markers/text_marker_base.cc",
    "markers/text_marker_base.h",
    "markers/text_marker_base_list_impl.cc",
    "markers/text_marker_base_list_impl.h",
    "markers/text_match_marker.cc",
    "markers/text_match_marker.h",
    "markers/text_match_marker_list_impl.cc",
    "markers/text_match_marker_list_impl.h",
    "markers/unsorted_document_marker_list_editor.cc",
    "markers/unsorted_document_marker_list_editor.h",
    "ng_flat_tree_shorthands.cc",
    "ng_flat_tree_shorthands.h",
    "plain_text_range.cc",
    "plain_text_range.h",
    "position.cc",
    "position.h",
    "position_iterator.cc",
    "position_iterator.h",
    "position_with_affinity.cc",
    "position_with_affinity.h",
    "relocatable_position.cc",
    "relocatable_position.h",
    "reveal_selection_scope.cc",
    "reveal_selection_scope.h",
    "selection_adjuster.cc",
    "selection_adjuster.h",
    "selection_controller.cc",
    "selection_controller.h",
    "selection_editor.cc",
    "selection_editor.h",
    "selection_modifier.cc",
    "selection_modifier.h",
    "selection_modifier_line.cc",
    "selection_strategy.h",
    "selection_template.cc",
    "selection_template.h",
    "selection_type.h",
    "serializers/create_markup_options.cc",
    "serializers/create_markup_options.h",
    "serializers/html_interchange.cc",
    "serializers/html_interchange.h",
    "serializers/markup_accumulator.cc",
    "serializers/markup_accumulator.h",
    "serializers/markup_formatter.cc",
    "serializers/markup_formatter.h",
    "serializers/serialization.cc",
    "serializers/serialization.h",
    "serializers/styled_markup_accumulator.cc",
    "serializers/styled_markup_accumulator.h",
    "serializers/styled_markup_serializer.cc",
    "serializers/styled_markup_serializer.h",
    "serializers/text_offset.cc",
    "serializers/text_offset.h",
    "set_selection_options.cc",
    "set_selection_options.h",
    "spellcheck/cold_mode_spell_check_requester.cc",
    "spellcheck/cold_mode_spell_check_requester.h",
    "spellcheck/hot_mode_spell_check_requester.cc",
    "spellcheck/hot_mode_spell_check_requester.h",
    "spellcheck/idle_spell_check_controller.cc",
    "spellcheck/idle_spell_check_controller.h",
    "spellcheck/spell_check_requester.cc",
    "spellcheck/spell_check_requester.h",
    "spellcheck/spell_checker.cc",
    "spellcheck/spell_checker.h",
    "spellcheck/text_checking.h",
    "spellcheck/text_checking_paragraph.cc",
    "spellcheck/text_checking_paragraph.h",
    "state_machines/backspace_state_machine.cc",
    "state_machines/backspace_state_machine.h",
    "state_machines/backward_code_point_state_machine.cc",
    "state_machines/backward_code_point_state_machine.h",
    "state_machines/backward_grapheme_boundary_state_machine.cc",
    "state_machines/backward_grapheme_boundary_state_machine.h",
    "state_machines/forward_code_point_state_machine.cc",
    "state_machines/forward_code_point_state_machine.h",
    "state_machines/forward_grapheme_boundary_state_machine.cc",
    "state_machines/forward_grapheme_boundary_state_machine.h",
    "state_machines/state_machine_util.cc",
    "state_machines/state_machine_util.h",
    "state_machines/text_segmentation_machine_state.cc",
    "state_machines/text_segmentation_machine_state.h",
    "suggestion/text_suggestion_backend_impl.cc",
    "suggestion/text_suggestion_backend_impl.h",
    "suggestion/text_suggestion_controller.cc",
    "suggestion/text_suggestion_controller.h",
    "suggestion/text_suggestion_info.h",
    "surrounding_text.cc",
    "surrounding_text.h",
    "text_affinity.cc",
    "text_affinity.h",
    "text_granularity.h",
    "text_offset_mapping.cc",
    "text_offset_mapping.h",
    "text_segments.cc",
    "text_segments.h",
    "visible_position.cc",
    "visible_position.h",
    "visible_selection.cc",
    "visible_selection.h",
    "visible_units.cc",
    "visible_units.h",
    "visible_units_line.cc",
    "visible_units_paragraph.cc",
    "visible_units_sentence.cc",
    "visible_units_word.cc",
    "web_substring_util.mm",
    "writing_direction.h",
  ]

  if (is_mac) {
    sources += [
      "commands/smart_replace_cf.cc",
      "kill_ring_mac.mm",
    ]
  } else {
    sources += [ "kill_ring_none.cc" ]
  }
}

jumbo_source_set("unit_tests") {
  testonly = true
  sources = [
    "commands/apply_block_element_command_test.cc",
    "commands/apply_style_command_test.cc",
    "commands/composite_edit_command_test.cc",
    "commands/delete_selection_command_test.cc",
    "commands/editing_command_test.cc",
    "commands/editing_commands_utilities_test.cc",
    "commands/insert_incremental_text_command_test.cc",
    "commands/insert_list_command_test.cc",
    "commands/insert_paragraph_separator_command_test.cc",
    "commands/insert_text_command_test.cc",
    "commands/move_commands_test.cc",
    "commands/replace_selection_command_test.cc",
    "commands/set_character_data_command_test.cc",
    "commands/split_text_node_command_test.cc",
    "commands/typing_command_test.cc",
    "compute_layer_selection_test.cc",
    "editing_strategy_test.cc",
    "editing_style_test.cc",
    "editing_utilities_test.cc",
    "editor_test.cc",
    "element_inner_text_test.cc",
    "ephemeral_range_test.cc",
    "finder/find_buffer_test.cc",
    "frame_caret_test.cc",
    "frame_selection_test.cc",
    "granularity_strategy_test.cc",
    "hit_testing_bidi_test.cc",
    "ime/ime_text_span_test.cc",
    "ime/input_method_controller_test.cc",
    "inline_box_position_test.cc",
    "iterators/character_iterator_test.cc",
    "iterators/simplified_backwards_text_iterator_test.cc",
    "iterators/text_iterator_behavior_test.cc",
    "iterators/text_iterator_test.cc",
    "iterators/text_searcher_icu_test.cc",
    "layout_selection_test.cc",
    "local_caret_rect_bidi_test.cc",
    "local_caret_rect_test.cc",
    "markers/active_suggestion_marker_list_impl_test.cc",
    "markers/active_suggestion_marker_test.cc",
    "markers/composition_marker_list_impl_test.cc",
    "markers/composition_marker_test.cc",
    "markers/document_marker_controller_test.cc",
    "markers/document_marker_test.cc",
    "markers/grammar_marker_list_impl_test.cc",
    "markers/grammar_marker_test.cc",
    "markers/sorted_document_marker_list_editor_test.cc",
    "markers/spelling_marker_list_impl_test.cc",
    "markers/spelling_marker_test.cc",
    "markers/suggestion_marker_list_impl_test.cc",
    "markers/suggestion_marker_test.cc",
    "markers/text_fragment_marker_list_impl_test.cc",
    "markers/text_match_marker_list_impl_test.cc",
    "markers/unsorted_document_marker_list_editor_test.cc",
    "plain_text_range_test.cc",
    "position_iterator_test.cc",
    "position_test.cc",
    "position_with_affinity_test.cc",
    "relocatable_position_test.cc",
    "selection_adjuster_test.cc",
    "selection_controller_test.cc",
    "selection_modifier_test.cc",
    "selection_template_test.cc",
    "serializers/serialization_test.cc",
    "serializers/styled_markup_serializer_test.cc",
    "set_selection_options_test.cc",
    "spellcheck/idle_spell_check_controller_test.cc",
    "spellcheck/spell_check_test_base.cc",
    "spellcheck/spell_check_test_base.h",
    "spellcheck/spell_checker_test.cc",
    "state_machines/backspace_state_machine_test.cc",
    "state_machines/backward_code_point_state_machine_test.cc",
    "state_machines/backward_grapheme_boundary_state_machine_test.cc",
    "state_machines/forward_code_point_state_machine_test.cc",
    "state_machines/forward_grapheme_boundary_state_machine_test.cc",
    "state_machines/state_machine_test_util.cc",
    "state_machines/state_machine_test_util.h",
    "state_machines/state_machine_util_test.cc",
    "suggestion/text_suggestion_controller_test.cc",
    "surrounding_text_test.cc",
    "testing/editing_test_base.cc",
    "testing/editing_test_base.h",
    "testing/editing_test_base_test.cc",
    "testing/selection_sample.cc",
    "testing/selection_sample.h",
    "testing/selection_sample_test.cc",
    "text_offset_mapping_test.cc",
    "visible_position_test.cc",
    "visible_selection_test.cc",
    "visible_units_line_test.cc",
    "visible_units_paragraph_test.cc",
    "visible_units_sentence_test.cc",
    "visible_units_test.cc",
    "visible_units_word_test.cc",
  ]

  configs += [
    "//third_party/blink/renderer/core:blink_core_pch",
    "//third_party/blink/renderer:config",
    "//third_party/blink/renderer:inside_blink",
  ]

  deps = [
    "//testing/gmock",
    "//testing/gtest",
    "//third_party/blink/renderer/core",
  ]
}
