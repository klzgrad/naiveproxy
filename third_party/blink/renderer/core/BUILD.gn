# Copyright 2014 The Chromium Authors. All rights reserved.
# Use of this source code is governed by a BSD-style license that can be
# found in the LICENSE file.

import("//build/config/chromecast_build.gni")
import("//build/config/compiler/compiler.gni")
import("//build/toolchain/toolchain.gni")
import("//build/config/ui.gni")
import("//build/split_static_library.gni")
import("//testing/libfuzzer/fuzzer_test.gni")
import("//third_party/blink/renderer/bindings/bindings.gni")
import("//third_party/blink/renderer/bindings/modules/v8/generated.gni")
import("//third_party/blink/renderer/bindings/scripts/scripts.gni")
import("//third_party/blink/renderer/config.gni")
import("//third_party/blink/renderer/core/core.gni")
import("//third_party/blink/renderer/build/scripts/scripts.gni")
import("//third_party/blink/renderer/modules/modules_idl_files.gni")
import("//third_party/blink/renderer/platform/platform_generated.gni")
import("//third_party/protobuf/proto_library.gni")

visibility = [
  "//third_party/blink/renderer/*",
  "//third_party/blink/public/*",
]

rel_blink_core_gen_dir = rebase_path(blink_core_output_dir, root_build_dir)

# Config for code that builds as part of core.
config("config") {
  defines = [ "BLINK_CORE_IMPLEMENTATION=1" ]
  if (is_chromecast) {
    defines += [ "BLINK_MEDIA_LOG=LOG(INFO)" ]
  }
}

config("core_include_dirs") {
  include_dirs = []
  if (is_android && use_openmax_dl_fft) {
    include_dirs += [ "//third_party/openmax_dl" ]
  }
}

import("//build/config/pch.gni")

config("blink_core_pch") {
  # Add precompiled header (pch) support when enabled, possible and
  # making sense.
  if (enable_precompiled_headers) {
    if (is_win) {
      # This is a string rather than a file GN knows about. It has to match
      # exactly what's in the /FI flag below, and what might appear in the
      # source code in quotes for an #include directive.
      precompiled_header = rebase_path("precompile_core.h", root_build_dir)

      # This is a file that GN will compile with the above header. It will be
      # implicitly added to the sources (potentially multiple times, with one
      # variant for each language used in the target).
      precompiled_source =
          "//third_party/blink/renderer/core/win/precompile_core.cc"

      # Force include the header.
      cflags = [ "/FI$precompiled_header" ]
    } else if (is_mac) {
      precompiled_source = "//third_party/blink/renderer/core/precompile_core.h"
    }
  }
}

core_config_add += [
  ":blink_core_pch",
  "//build/config/compiler:noshadowing",
]

source_set("generated") {
  deps = [
    ":core_generated",
    ":prerequisites",
    "//gin",
    "//skia",
    "//third_party/blink/renderer/bindings/core/v8:bindings_core_origin_trial_features",
    "//third_party/blink/renderer/bindings/core/v8:bindings_core_v8_generated",
    "//third_party/blink/renderer/core/inspector:generated",
    "//third_party/blink/renderer/core/probe:generated",
    "//third_party/iccjpeg",
    "//third_party/libpng",
    "//third_party/libwebp",
    "//third_party/libxml",
    "//third_party/libxslt",

    # FIXME: don't depend on bindings/modules http://crbug.com/358074
    "//third_party/blink/renderer/bindings/modules:bindings_modules_generated",
    "//third_party/blink/renderer/bindings/modules/v8:bindings_modules_v8_generated",
    "//third_party/blink/renderer/platform:make_platform_generated",
    "//third_party/blink/renderer/platform/wtf",
    "//url",
    "//v8",
  ]
}

source_set("prerequisites") {
  public_deps = [
    "//services/network/public/cpp:cpp",
    "//services/service_manager/public/cpp",
    "//services/ui/public/interfaces/ime",
    "//skia",
    "//third_party/angle:translator",
    "//third_party/blink/public:core_mojo_bindings_blink",
    "//third_party/blink/renderer/core/inspector:generated",
    "//third_party/blink/renderer/core/probe:generated",
    "//third_party/blink/renderer/platform",
    "//third_party/iccjpeg",
    "//third_party/icu",
    "//third_party/libpng",
    "//third_party/libwebp",
    "//third_party/libxml",
    "//third_party/libxslt",
    "//third_party/ots",
    "//third_party/snappy",
    "//third_party/zlib",
    "//ui/gfx/geometry",
    "//ui/native_theme",
    "//url",
    "//v8",
  ]
  deps = [
    "//third_party/blink/renderer/bindings/core/v8:bindings_core_v8_generated",

    # FIXME: don't depend on bindings_modules http://crbug.com/358074
    "//third_party/blink/renderer/bindings/modules/v8:bindings_modules_v8_generated",
  ]

  public_configs = [
    ":core_include_dirs",
    "//third_party/blink/renderer:config",
    "//third_party/blink/renderer:inside_blink",
  ]

  if (use_openmax_dl_fft) {
    deps += [ "//third_party/openmax_dl/dl" ]
  }
}

# Note that this is a source set rather than a group, even though it has no
# sources. A group would implicitly forward all direct dependent configs
# through it, but we want to keep our internal targets' public_configs private
# and only forward some of them.
component("core") {
  output_name = "blink_core"

  visibility = []  # Allow re-assignment of list.
  visibility = [ "//third_party/blink/*" ]

  # If you create a new subdirectory, make a new BUILD file for that directory
  # and reference it in the deps below rather than adding the sources here.
  sources = [
    "core_export.h",
    "core_initializer.cc",
    "core_initializer.h",
  ]

  configs -= core_config_remove
  configs += core_config_add

  public_deps = [
    ":core_generated",
    "//skia",
    "//third_party/blink/public:core_mojo_bindings_blink",
    "//third_party/blink/renderer/platform",
    "//third_party/blink/renderer/platform/wtf",
    "//url",
    "//v8",
  ]
  deps = [
    "//third_party/blink/public/common",
    "//third_party/blink/renderer/core/accessibility",
    "//third_party/blink/renderer/core/animation",
    "//third_party/blink/renderer/core/aom",
    "//third_party/blink/renderer/core/clipboard",
    "//third_party/blink/renderer/core/context_features",
    "//third_party/blink/renderer/core/css",
    "//third_party/blink/renderer/core/dom",
    "//third_party/blink/renderer/core/editing",
    "//third_party/blink/renderer/core/events",
    "//third_party/blink/renderer/core/execution_context",
    "//third_party/blink/renderer/core/exported",
    "//third_party/blink/renderer/core/fetch",
    "//third_party/blink/renderer/core/fileapi",
    "//third_party/blink/renderer/core/frame",
    "//third_party/blink/renderer/core/fullscreen",
    "//third_party/blink/renderer/core/geometry",
    "//third_party/blink/renderer/core/html",
    "//third_party/blink/renderer/core/imagebitmap",
    "//third_party/blink/renderer/core/input",
    "//third_party/blink/renderer/core/inspector",
    "//third_party/blink/renderer/core/intersection_observer",
    "//third_party/blink/renderer/core/layout",
    "//third_party/blink/renderer/core/layout/svg:svg_layout",
    "//third_party/blink/renderer/core/loader",
    "//third_party/blink/renderer/core/messaging",
    "//third_party/blink/renderer/core/mojo",
    "//third_party/blink/renderer/core/offscreencanvas",
    "//third_party/blink/renderer/core/origin_trials",
    "//third_party/blink/renderer/core/page",
    "//third_party/blink/renderer/core/paint",
    "//third_party/blink/renderer/core/policy",
    "//third_party/blink/renderer/core/probe",
    "//third_party/blink/renderer/core/resize_observer",
    "//third_party/blink/renderer/core/script",
    "//third_party/blink/renderer/core/scroll",
    "//third_party/blink/renderer/core/streams",
    "//third_party/blink/renderer/core/style:rendering",
    "//third_party/blink/renderer/core/style:svg_style",
    "//third_party/blink/renderer/core/svg",
    "//third_party/blink/renderer/core/timing",
    "//third_party/blink/renderer/core/trustedtypes",
    "//third_party/blink/renderer/core/typed_arrays",
    "//third_party/blink/renderer/core/url",
    "//third_party/blink/renderer/core/workers",
    "//third_party/blink/renderer/core/xml",
    "//third_party/blink/renderer/core/xmlhttprequest",
  ]

  if (is_win && is_debug && is_component_build && current_cpu == "x64") {
    # Incremental linking fails when the .ilk file gets too large.
    # 64-bit debug builds with full symbols trigger this problem, so we turn
    # off incremental linking in that configuration.
    # For fastest builds, use component release builds without debug
    # information.
    # VC++ bug filed for 64-bit debug incremental link failures:
    # https://connect.microsoft.com/VisualStudio/feedback/details/2846790
    configs -= [ "//build/config/win:default_incremental_linking" ]
    configs += [ "//build/config/win:no_incremental_linking" ]
  }

  public_configs = [ ":core_include_dirs" ]

  if (is_mac) {
    libs = [
      "AppKit.framework",
      "Carbon.framework",
    ]
  }
}

jumbo_source_set("testing") {
  configs += [
    ":blink_core_pch",
    "//third_party/blink/renderer:config",
    "//third_party/blink/renderer:inside_blink",
  ]

  deps = [
    ":core",
    ":generated_testing_idls",
    "//third_party/blink/renderer/bindings/core/v8:testing",
  ]

  sources = [
    "$blink_core_output_dir/testing/internal_settings_generated.cc",
    "$blink_core_output_dir/testing/internal_settings_generated.h",
    "fetch/testing/internals_fetch.cc",
    "fetch/testing/internals_fetch.h",
    "fetch/testing/worker_internals_fetch.cc",
    "fetch/testing/worker_internals_fetch.h",
    "testing/callback_function_test.cc",
    "testing/callback_function_test.h",
    "testing/death_aware_script_wrappable.cc",
    "testing/death_aware_script_wrappable.h",
    "testing/dictionary_test.cc",
    "testing/dictionary_test.h",
    "testing/dummy_modulator.cc",
    "testing/dummy_modulator.h",
    "testing/dummy_page_holder.cc",
    "testing/dummy_page_holder.h",
    "testing/garbage_collected_script_wrappable.cc",
    "testing/garbage_collected_script_wrappable.h",
    "testing/gc_observation.cc",
    "testing/gc_observation.h",
    "testing/internal_settings.cc",
    "testing/internal_settings.h",
    "testing/internals.cc",
    "testing/internals.h",
    "testing/layer_rect.h",
    "testing/layer_rect_list.cc",
    "testing/layer_rect_list.h",
    "testing/mock_hyphenation.cc",
    "testing/mock_hyphenation.h",
    "testing/null_execution_context.cc",
    "testing/null_execution_context.h",
    "testing/origin_trials_test.cc",
    "testing/origin_trials_test.h",
    "testing/origin_trials_test_partial.h",
    "testing/record_test.cc",
    "testing/record_test.h",
    "testing/sequence_test.cc",
    "testing/sequence_test.h",
    "testing/static_selection.cc",
    "testing/static_selection.h",
    "testing/type_conversions.h",
    "testing/union_types_test.cc",
    "testing/union_types_test.h",
    "testing/use_mock_scrollbar_settings.h",
    "testing/v8/web_core_test_support.cc",
    "testing/v8/web_core_test_support.h",
    "testing/worker_internals.cc",
    "testing/worker_internals.h",
  ]

  # Compile the sources produced by these IDL file lists.
  testing_idl_files =
      webcore_testing_idl_files + core_testing_dictionary_idl_files +
      generated_webcore_testing_idl_files +
      webcore_testing_idl_with_modules_dependency_files

  sources += process_file_template(
          testing_idl_files,
          [
            "$bindings_core_v8_output_dir/v8_{{source_name_part}}.cc",
            "$bindings_core_v8_output_dir/v8_{{source_name_part}}.h",
          ])
}

# core_bindings_generated ------------------------------------------------------

generate_event_interfaces("core_event_interfaces") {
  sources = [
    "css/font_face_set_load_event.idl",
    "css/media_query_list_event.idl",
    "dom/events/custom_event.idl",
    "dom/events/event.idl",
    "events/animation_event.idl",
    "events/animation_playback_event.idl",
    "events/application_cache_error_event.idl",
    "events/before_unload_event.idl",
    "events/clipboard_event.idl",
    "events/composition_event.idl",
    "events/drag_event.idl",
    "events/error_event.idl",
    "events/focus_event.idl",
    "events/hash_change_event.idl",
    "events/input_event.idl",
    "events/keyboard_event.idl",
    "events/message_event.idl",
    "events/mouse_event.idl",
    "events/mutation_event.idl",
    "events/page_transition_event.idl",
    "events/picture_in_picture_control_event.idl",
    "events/pointer_event.idl",
    "events/pop_state_event.idl",
    "events/progress_event.idl",
    "events/promise_rejection_event.idl",
    "events/resource_progress_event.idl",
    "events/security_policy_violation_event.idl",
    "events/text_event.idl",
    "events/touch_event.idl",
    "events/transition_event.idl",
    "events/ui_event.idl",
    "events/wheel_event.idl",
    "html/forms/form_data_event.idl",
    "html/track/track_event.idl",
    "mojo/test/mojo_interface_request_event.idl",
  ]
  output_file = "core/event_names.json5"
}

# generated_testing_idls -------------------------------------------------------

group("generated_testing_idls") {
  public_deps = [
    ":generated_settings_macros",
    ":generated_testing_idls_internal_runtime_flags",
    ":generated_testing_idls_settings",
  ]
}

action("generated_settings_macros") {
  script = "../build/scripts/make_settings.py"

  inputs = scripts_for_json5_files + [
             "../build/scripts/make_settings.py",
             "../build/scripts/templates/settings_macros.h.tmpl",
             "frame/settings.json5",
           ]
  outputs = [
    "$blink_core_output_dir/settings_macros.h",
  ]

  args = [
    rebase_path("frame/settings.json5", root_build_dir),
    "--output_dir",
    rel_blink_core_gen_dir,
  ]
}

action("generated_testing_idls_settings") {
  script = "../build/scripts/make_internal_settings.py"

  inputs = scripts_for_json5_files + [
             "../build/scripts/make_internal_settings.py",
             "../build/scripts/templates/internal_settings_generated.idl.tmpl",
             "../build/scripts/templates/internal_settings_generated.cc.tmpl",
             "../build/scripts/templates/internal_settings_generated.h.tmpl",
             "frame/settings.json5",
           ]

  args = [
    rebase_path("frame/settings.json5", root_build_dir),
    "--output_dir",
    "$rel_blink_core_gen_dir/testing",
  ]

  outputs = [
    "$blink_core_output_dir/testing/internal_settings_generated.idl",
    "$blink_core_output_dir/testing/internal_settings_generated.cc",
    "$blink_core_output_dir/testing/internal_settings_generated.h",
  ]
}

action("generated_testing_idls_internal_runtime_flags") {
  script = "../build/scripts/make_internal_runtime_flags.py"

  inputs = scripts_for_json5_files + [
             "../build/scripts/make_internal_runtime_flags.py",
             "../platform/runtime_enabled_features.json5",
             "../build/scripts/templates/internal_runtime_flags.h.tmpl",
             "../build/scripts/templates/internal_runtime_flags.idl.tmpl",
           ]

  args = [
    rebase_path("../platform/runtime_enabled_features.json5", root_build_dir),
    "--output_dir",
    "$rel_blink_core_gen_dir/testing",
  ]

  outputs = [
    "$blink_core_output_dir/testing/internal_runtime_flags.idl",
    "$blink_core_output_dir/testing/internal_runtime_flags.h",
  ]
}

css_properties("make_core_generated_computed_style_initial_values") {
  script = "../build/scripts/core/style/make_computed_style_initial_values.py"
  in_files = [ "css/ComputedStyleExtraFields.json5" ]
  other_inputs = [ "../build/scripts/core/style/templates/computed_style_initial_values.h.tmpl" ]
  outputs = [
    "$blink_core_output_dir/style/computed_style_initial_values.h",
  ]
}

css_properties("make_core_generated_computed_style_base") {
  script = "../build/scripts/make_computed_style_base.py"
  in_files = [
    "css/ComputedStyleExtraFields.json5",
    "css/ComputedStyleDiffFunctions.json5",
    "css/CSSValueKeywords.json5",
    "css/CSSPropertiesRanking.json5",
    "css/CSSGroupConfig.json5",
  ]
  other_inputs = [
    "../build/scripts/templates/fields/field.tmpl",
    "../build/scripts/templates/fields/group.tmpl",
    "../build/scripts/templates/fields/base.tmpl",
    "../build/scripts/templates/fields/keyword.tmpl",
    "../build/scripts/templates/fields/pointer.tmpl",
    "../build/scripts/templates/fields/primitive.tmpl",
    "../build/scripts/templates/fields/monotonic_flag.tmpl",
    "../build/scripts/templates/fields/external.tmpl",
    "../build/scripts/templates/computed_style_base.h.tmpl",
    "../build/scripts/templates/computed_style_base.cc.tmpl",
    "../build/scripts/templates/computed_style_base_constants.h.tmpl",
    "../build/scripts/keyword_utils.py",
  ]
  outputs = [
    "$blink_core_output_dir/computed_style_base.h",
    "$blink_core_output_dir/computed_style_base.cc",
    "$blink_core_output_dir/computed_style_base_constants.h",
  ]
}

css_properties("make_core_generated_css_value_id_mappings") {
  script = "../build/scripts/make_css_value_id_mappings.py"
  in_files = [ "css/CSSValueKeywords.json5" ]
  other_inputs = [
    "../build/scripts/templates/css_value_id_mappings_generated.h.tmpl",
    "../build/scripts/keyword_utils.py",
  ]
  outputs = [
    "$blink_core_output_dir/css_value_id_mappings_generated.h",
  ]
}

css_properties("make_core_generated_css_property_baseclass") {
  script = "../build/scripts/core/css/properties/make_css_property_base.py"
  other_inputs = [
    "../build/scripts/core/css/properties/templates/css_property.cc.tmpl",
    "../build/scripts/core/css/properties/templates/css_property.h.tmpl",
    "../build/scripts/core/css/properties/templates/css_unresolved_property.cc.tmpl",
    "../build/scripts/core/css/properties/templates/css_unresolved_property.h.tmpl",
  ]
  outputs = [
    "$blink_core_output_dir/css/properties/css_property.cc",
    "$blink_core_output_dir/css/properties/css_property.h",
    "$blink_core_output_dir/css/properties/css_unresolved_property.cc",
    "$blink_core_output_dir/css/properties/css_unresolved_property.h",
  ]
}

# FIXME: Need a better way to specify generated output files
css_properties("make_core_generated_css_longhand_property_classes") {
  script =
      "../build/scripts/core/css/properties/make_css_property_subclasses.py"
  in_files = [ "css/properties/CSSPropertyMethods.json5" ]
  other_inputs = [
    "../build/scripts/core/css/properties/templates/css_property_subclass.h.tmpl",
    "../build/scripts/core/css/properties/templates/css_property_subclass.cc.tmpl",
  ]
  outputs = [
    "$blink_core_output_dir/css/properties/longhands/align_content.h",
    "$blink_core_output_dir/css/properties/longhands/align_items.h",
    "$blink_core_output_dir/css/properties/longhands/alignment_baseline.h",
    "$blink_core_output_dir/css/properties/longhands/align_self.h",
    "$blink_core_output_dir/css/properties/longhands/all.h",
    "$blink_core_output_dir/css/properties/longhands/animation_delay.h",
    "$blink_core_output_dir/css/properties/longhands/animation_direction.h",
    "$blink_core_output_dir/css/properties/longhands/animation_duration.h",
    "$blink_core_output_dir/css/properties/longhands/animation_fill_mode.h",
    "$blink_core_output_dir/css/properties/longhands/animation_iteration_count.h",
    "$blink_core_output_dir/css/properties/longhands/animation_name.h",
    "$blink_core_output_dir/css/properties/longhands/animation_play_state.h",
    "$blink_core_output_dir/css/properties/longhands/animation_timing_function.h",
    "$blink_core_output_dir/css/properties/longhands/backdrop_filter.h",
    "$blink_core_output_dir/css/properties/longhands/backface_visibility.h",
    "$blink_core_output_dir/css/properties/longhands/background_attachment.h",
    "$blink_core_output_dir/css/properties/longhands/background_attachment.cc",
    "$blink_core_output_dir/css/properties/longhands/background_blend_mode.h",
    "$blink_core_output_dir/css/properties/longhands/background_blend_mode.cc",
    "$blink_core_output_dir/css/properties/longhands/background_clip.h",
    "$blink_core_output_dir/css/properties/longhands/background_clip.cc",
    "$blink_core_output_dir/css/properties/longhands/background_color.h",
    "$blink_core_output_dir/css/properties/longhands/background_color.cc",
    "$blink_core_output_dir/css/properties/longhands/background_image.h",
    "$blink_core_output_dir/css/properties/longhands/background_image.cc",
    "$blink_core_output_dir/css/properties/longhands/background_origin.h",
    "$blink_core_output_dir/css/properties/longhands/background_origin.cc",
    "$blink_core_output_dir/css/properties/longhands/background_position_x.h",
    "$blink_core_output_dir/css/properties/longhands/background_position_x.cc",
    "$blink_core_output_dir/css/properties/longhands/background_position_y.h",
    "$blink_core_output_dir/css/properties/longhands/background_position_y.cc",
    "$blink_core_output_dir/css/properties/longhands/background_repeat_x.h",
    "$blink_core_output_dir/css/properties/longhands/background_repeat_x.cc",
    "$blink_core_output_dir/css/properties/longhands/background_repeat_y.h",
    "$blink_core_output_dir/css/properties/longhands/background_repeat_y.cc",
    "$blink_core_output_dir/css/properties/longhands/background_size.h",
    "$blink_core_output_dir/css/properties/longhands/background_size.cc",
    "$blink_core_output_dir/css/properties/longhands/baseline_shift.h",
    "$blink_core_output_dir/css/properties/longhands/block_size.h",
    "$blink_core_output_dir/css/properties/longhands/border_bottom_color.h",
    "$blink_core_output_dir/css/properties/longhands/border_bottom_color.cc",
    "$blink_core_output_dir/css/properties/longhands/border_bottom_left_radius.h",
    "$blink_core_output_dir/css/properties/longhands/border_bottom_right_radius.h",
    "$blink_core_output_dir/css/properties/longhands/border_bottom_style.h",
    "$blink_core_output_dir/css/properties/longhands/border_bottom_width.h",
    "$blink_core_output_dir/css/properties/longhands/border_collapse.h",
    "$blink_core_output_dir/css/properties/longhands/border_image_outset.h",
    "$blink_core_output_dir/css/properties/longhands/border_image_repeat.h",
    "$blink_core_output_dir/css/properties/longhands/border_image_slice.h",
    "$blink_core_output_dir/css/properties/longhands/border_image_source.h",
    "$blink_core_output_dir/css/properties/longhands/border_image_width.h",
    "$blink_core_output_dir/css/properties/longhands/border_left_color.h",
    "$blink_core_output_dir/css/properties/longhands/border_left_color.cc",
    "$blink_core_output_dir/css/properties/longhands/border_left_style.h",
    "$blink_core_output_dir/css/properties/longhands/border_left_width.h",
    "$blink_core_output_dir/css/properties/longhands/border_right_color.h",
    "$blink_core_output_dir/css/properties/longhands/border_right_color.cc",
    "$blink_core_output_dir/css/properties/longhands/border_right_style.h",
    "$blink_core_output_dir/css/properties/longhands/border_right_width.h",
    "$blink_core_output_dir/css/properties/longhands/border_top_color.h",
    "$blink_core_output_dir/css/properties/longhands/border_top_color.cc",
    "$blink_core_output_dir/css/properties/longhands/border_top_left_radius.h",
    "$blink_core_output_dir/css/properties/longhands/border_top_right_radius.h",
    "$blink_core_output_dir/css/properties/longhands/border_top_style.h",
    "$blink_core_output_dir/css/properties/longhands/border_top_width.h",
    "$blink_core_output_dir/css/properties/longhands/bottom.h",
    "$blink_core_output_dir/css/properties/longhands/box_shadow.h",
    "$blink_core_output_dir/css/properties/longhands/box_sizing.h",
    "$blink_core_output_dir/css/properties/longhands/break_after.h",
    "$blink_core_output_dir/css/properties/longhands/break_before.h",
    "$blink_core_output_dir/css/properties/longhands/break_inside.h",
    "$blink_core_output_dir/css/properties/longhands/buffered_rendering.h",
    "$blink_core_output_dir/css/properties/longhands/caption_side.h",
    "$blink_core_output_dir/css/properties/longhands/caret_color.h",
    "$blink_core_output_dir/css/properties/longhands/clear.h",
    "$blink_core_output_dir/css/properties/longhands/clip.h",
    "$blink_core_output_dir/css/properties/longhands/clip_path.h",
    "$blink_core_output_dir/css/properties/longhands/clip_rule.h",
    "$blink_core_output_dir/css/properties/longhands/color.h",
    "$blink_core_output_dir/css/properties/longhands/color_interpolation.h",
    "$blink_core_output_dir/css/properties/longhands/color_interpolation_filters.h",
    "$blink_core_output_dir/css/properties/longhands/color_rendering.h",
    "$blink_core_output_dir/css/properties/longhands/column_count.h",
    "$blink_core_output_dir/css/properties/longhands/column_fill.h",
    "$blink_core_output_dir/css/properties/longhands/column_gap.h",
    "$blink_core_output_dir/css/properties/longhands/column_rule_color.h",
    "$blink_core_output_dir/css/properties/longhands/column_rule_color.cc",
    "$blink_core_output_dir/css/properties/longhands/column_rule_style.h",
    "$blink_core_output_dir/css/properties/longhands/column_rule_width.h",
    "$blink_core_output_dir/css/properties/longhands/column_span.h",
    "$blink_core_output_dir/css/properties/longhands/column_width.h",
    "$blink_core_output_dir/css/properties/longhands/contain.h",
    "$blink_core_output_dir/css/properties/longhands/content.h",
    "$blink_core_output_dir/css/properties/longhands/counter_increment.h",
    "$blink_core_output_dir/css/properties/longhands/counter_increment.cc",
    "$blink_core_output_dir/css/properties/longhands/counter_reset.h",
    "$blink_core_output_dir/css/properties/longhands/counter_reset.cc",
    "$blink_core_output_dir/css/properties/longhands/cursor.h",
    "$blink_core_output_dir/css/properties/longhands/cx.h",
    "$blink_core_output_dir/css/properties/longhands/cy.h",
    "$blink_core_output_dir/css/properties/longhands/d.h",
    "$blink_core_output_dir/css/properties/longhands/direction.h",
    "$blink_core_output_dir/css/properties/longhands/display.h",
    "$blink_core_output_dir/css/properties/longhands/dominant_baseline.h",
    "$blink_core_output_dir/css/properties/longhands/empty_cells.h",
    "$blink_core_output_dir/css/properties/longhands/epub_caption_side.h",
    "$blink_core_output_dir/css/properties/longhands/epub_text_combine.h",
    "$blink_core_output_dir/css/properties/longhands/epub_text_emphasis_color.h",
    "$blink_core_output_dir/css/properties/longhands/epub_text_emphasis_style.h",
    "$blink_core_output_dir/css/properties/longhands/epub_text_orientation.h",
    "$blink_core_output_dir/css/properties/longhands/epub_text_transform.h",
    "$blink_core_output_dir/css/properties/longhands/epub_word_break.h",
    "$blink_core_output_dir/css/properties/longhands/epub_writing_mode.h",
    "$blink_core_output_dir/css/properties/longhands/fill.h",
    "$blink_core_output_dir/css/properties/longhands/fill_opacity.h",
    "$blink_core_output_dir/css/properties/longhands/fill_rule.h",
    "$blink_core_output_dir/css/properties/longhands/filter.h",
    "$blink_core_output_dir/css/properties/longhands/flex_basis.h",
    "$blink_core_output_dir/css/properties/longhands/flex_direction.h",
    "$blink_core_output_dir/css/properties/longhands/flex_grow.h",
    "$blink_core_output_dir/css/properties/longhands/flex_shrink.h",
    "$blink_core_output_dir/css/properties/longhands/flex_wrap.h",
    "$blink_core_output_dir/css/properties/longhands/float.h",
    "$blink_core_output_dir/css/properties/longhands/flood_color.h",
    "$blink_core_output_dir/css/properties/longhands/flood_opacity.h",
    "$blink_core_output_dir/css/properties/longhands/font_display.h",
    "$blink_core_output_dir/css/properties/longhands/font_family.h",
    "$blink_core_output_dir/css/properties/longhands/font_feature_settings.h",
    "$blink_core_output_dir/css/properties/longhands/font_kerning.h",
    "$blink_core_output_dir/css/properties/longhands/font_size.h",
    "$blink_core_output_dir/css/properties/longhands/font_size_adjust.h",
    "$blink_core_output_dir/css/properties/longhands/font_stretch.h",
    "$blink_core_output_dir/css/properties/longhands/font_style.h",
    "$blink_core_output_dir/css/properties/longhands/font_variant_caps.h",
    "$blink_core_output_dir/css/properties/longhands/font_variant_east_asian.h",
    "$blink_core_output_dir/css/properties/longhands/font_variant_ligatures.h",
    "$blink_core_output_dir/css/properties/longhands/font_variant_numeric.h",
    "$blink_core_output_dir/css/properties/longhands/font_variation_settings.h",
    "$blink_core_output_dir/css/properties/longhands/font_weight.h",
    "$blink_core_output_dir/css/properties/longhands/grid_auto_columns.h",
    "$blink_core_output_dir/css/properties/longhands/grid_auto_flow.h",
    "$blink_core_output_dir/css/properties/longhands/grid_auto_rows.h",
    "$blink_core_output_dir/css/properties/longhands/grid_column_end.h",
    "$blink_core_output_dir/css/properties/longhands/grid_column_start.h",
    "$blink_core_output_dir/css/properties/longhands/grid_row_end.h",
    "$blink_core_output_dir/css/properties/longhands/grid_row_start.h",
    "$blink_core_output_dir/css/properties/longhands/grid_template_areas.h",
    "$blink_core_output_dir/css/properties/longhands/grid_template_columns.h",
    "$blink_core_output_dir/css/properties/longhands/grid_template_columns.cc",
    "$blink_core_output_dir/css/properties/longhands/grid_template_rows.h",
    "$blink_core_output_dir/css/properties/longhands/grid_template_rows.cc",
    "$blink_core_output_dir/css/properties/longhands/height.h",
    "$blink_core_output_dir/css/properties/longhands/hyphens.h",
    "$blink_core_output_dir/css/properties/longhands/image_orientation.h",
    "$blink_core_output_dir/css/properties/longhands/image_rendering.h",
    "$blink_core_output_dir/css/properties/longhands/inline_size.h",
    "$blink_core_output_dir/css/properties/longhands/isolation.h",
    "$blink_core_output_dir/css/properties/longhands/justify_content.h",
    "$blink_core_output_dir/css/properties/longhands/justify_items.h",
    "$blink_core_output_dir/css/properties/longhands/justify_self.h",
    "$blink_core_output_dir/css/properties/longhands/left.h",
    "$blink_core_output_dir/css/properties/longhands/letter_spacing.h",
    "$blink_core_output_dir/css/properties/longhands/lighting_color.h",
    "$blink_core_output_dir/css/properties/longhands/line_break.h",
    "$blink_core_output_dir/css/properties/longhands/line_height.h",
    "$blink_core_output_dir/css/properties/longhands/line_height_step.h",
    "$blink_core_output_dir/css/properties/longhands/list_style_image.h",
    "$blink_core_output_dir/css/properties/longhands/list_style_position.h",
    "$blink_core_output_dir/css/properties/longhands/list_style_type.h",
    "$blink_core_output_dir/css/properties/longhands/margin_bottom.h",
    "$blink_core_output_dir/css/properties/longhands/margin_left.h",
    "$blink_core_output_dir/css/properties/longhands/margin_right.h",
    "$blink_core_output_dir/css/properties/longhands/margin_top.h",
    "$blink_core_output_dir/css/properties/longhands/marker_end.h",
    "$blink_core_output_dir/css/properties/longhands/marker_mid.h",
    "$blink_core_output_dir/css/properties/longhands/marker_start.h",
    "$blink_core_output_dir/css/properties/longhands/mask.h",
    "$blink_core_output_dir/css/properties/longhands/mask_source_type.h",
    "$blink_core_output_dir/css/properties/longhands/mask_source_type.cc",
    "$blink_core_output_dir/css/properties/longhands/mask_type.h",
    "$blink_core_output_dir/css/properties/longhands/max_block_size.h",
    "$blink_core_output_dir/css/properties/longhands/max_height.h",
    "$blink_core_output_dir/css/properties/longhands/max_inline_size.h",
    "$blink_core_output_dir/css/properties/longhands/max_width.h",
    "$blink_core_output_dir/css/properties/longhands/max_zoom.h",
    "$blink_core_output_dir/css/properties/longhands/min_block_size.h",
    "$blink_core_output_dir/css/properties/longhands/min_height.h",
    "$blink_core_output_dir/css/properties/longhands/min_inline_size.h",
    "$blink_core_output_dir/css/properties/longhands/min_width.h",
    "$blink_core_output_dir/css/properties/longhands/min_zoom.h",
    "$blink_core_output_dir/css/properties/longhands/mix_blend_mode.h",
    "$blink_core_output_dir/css/properties/longhands/object_fit.h",
    "$blink_core_output_dir/css/properties/longhands/object_position.h",
    "$blink_core_output_dir/css/properties/longhands/offset_anchor.h",
    "$blink_core_output_dir/css/properties/longhands/offset_distance.h",
    "$blink_core_output_dir/css/properties/longhands/offset_path.h",
    "$blink_core_output_dir/css/properties/longhands/offset_position.h",
    "$blink_core_output_dir/css/properties/longhands/offset_rotate.h",
    "$blink_core_output_dir/css/properties/longhands/opacity.h",
    "$blink_core_output_dir/css/properties/longhands/order.h",
    "$blink_core_output_dir/css/properties/longhands/orientation.h",
    "$blink_core_output_dir/css/properties/longhands/orphans.h",
    "$blink_core_output_dir/css/properties/longhands/outline_color.h",
    "$blink_core_output_dir/css/properties/longhands/outline_color.cc",
    "$blink_core_output_dir/css/properties/longhands/outline_offset.h",
    "$blink_core_output_dir/css/properties/longhands/outline_style.h",
    "$blink_core_output_dir/css/properties/longhands/outline_width.h",
    "$blink_core_output_dir/css/properties/longhands/overflow_anchor.h",
    "$blink_core_output_dir/css/properties/longhands/overflow_wrap.h",
    "$blink_core_output_dir/css/properties/longhands/overflow_x.h",
    "$blink_core_output_dir/css/properties/longhands/overflow_y.h",
    "$blink_core_output_dir/css/properties/longhands/overscroll_behavior_x.h",
    "$blink_core_output_dir/css/properties/longhands/overscroll_behavior_y.h",
    "$blink_core_output_dir/css/properties/longhands/padding_bottom.h",
    "$blink_core_output_dir/css/properties/longhands/padding_left.h",
    "$blink_core_output_dir/css/properties/longhands/padding_right.h",
    "$blink_core_output_dir/css/properties/longhands/padding_top.h",
    "$blink_core_output_dir/css/properties/longhands/page.h",
    "$blink_core_output_dir/css/properties/longhands/paint_order.h",
    "$blink_core_output_dir/css/properties/longhands/perspective.h",
    "$blink_core_output_dir/css/properties/longhands/perspective_origin.h",
    "$blink_core_output_dir/css/properties/longhands/pointer_events.h",
    "$blink_core_output_dir/css/properties/longhands/position.h",
    "$blink_core_output_dir/css/properties/longhands/quotes.h",
    "$blink_core_output_dir/css/properties/longhands/r.h",
    "$blink_core_output_dir/css/properties/longhands/resize.h",
    "$blink_core_output_dir/css/properties/longhands/right.h",
    "$blink_core_output_dir/css/properties/longhands/rotate.h",
    "$blink_core_output_dir/css/properties/longhands/row_gap.h",
    "$blink_core_output_dir/css/properties/longhands/rx.h",
    "$blink_core_output_dir/css/properties/longhands/ry.h",
    "$blink_core_output_dir/css/properties/longhands/scale.h",
    "$blink_core_output_dir/css/properties/longhands/scroll_behavior.h",
    "$blink_core_output_dir/css/properties/longhands/scroll_customization.h",
    "$blink_core_output_dir/css/properties/longhands/scroll_margin_block_end.h",
    "$blink_core_output_dir/css/properties/longhands/scroll_margin_block_start.h",
    "$blink_core_output_dir/css/properties/longhands/scroll_margin_bottom.h",
    "$blink_core_output_dir/css/properties/longhands/scroll_margin_inline_end.h",
    "$blink_core_output_dir/css/properties/longhands/scroll_margin_inline_start.h",
    "$blink_core_output_dir/css/properties/longhands/scroll_margin_left.h",
    "$blink_core_output_dir/css/properties/longhands/scroll_margin_right.h",
    "$blink_core_output_dir/css/properties/longhands/scroll_margin_top.h",
    "$blink_core_output_dir/css/properties/longhands/scroll_padding_block_end.h",
    "$blink_core_output_dir/css/properties/longhands/scroll_padding_block_start.h",
    "$blink_core_output_dir/css/properties/longhands/scroll_padding_bottom.h",
    "$blink_core_output_dir/css/properties/longhands/scroll_padding_inline_end.h",
    "$blink_core_output_dir/css/properties/longhands/scroll_padding_inline_start.h",
    "$blink_core_output_dir/css/properties/longhands/scroll_padding_left.h",
    "$blink_core_output_dir/css/properties/longhands/scroll_padding_right.h",
    "$blink_core_output_dir/css/properties/longhands/scroll_padding_top.h",
    "$blink_core_output_dir/css/properties/longhands/scroll_snap_align.h",
    "$blink_core_output_dir/css/properties/longhands/scroll_snap_stop.h",
    "$blink_core_output_dir/css/properties/longhands/scroll_snap_type.h",
    "$blink_core_output_dir/css/properties/longhands/shape_image_threshold.h",
    "$blink_core_output_dir/css/properties/longhands/shape_margin.h",
    "$blink_core_output_dir/css/properties/longhands/shape_outside.h",
    "$blink_core_output_dir/css/properties/longhands/shape_rendering.h",
    "$blink_core_output_dir/css/properties/longhands/size.h",
    "$blink_core_output_dir/css/properties/longhands/speak.h",
    "$blink_core_output_dir/css/properties/longhands/src.h",
    "$blink_core_output_dir/css/properties/longhands/stop_color.h",
    "$blink_core_output_dir/css/properties/longhands/stop_opacity.h",
    "$blink_core_output_dir/css/properties/longhands/stroke.h",
    "$blink_core_output_dir/css/properties/longhands/stroke_dasharray.h",
    "$blink_core_output_dir/css/properties/longhands/stroke_dashoffset.h",
    "$blink_core_output_dir/css/properties/longhands/stroke_linecap.h",
    "$blink_core_output_dir/css/properties/longhands/stroke_linejoin.h",
    "$blink_core_output_dir/css/properties/longhands/stroke_miterlimit.h",
    "$blink_core_output_dir/css/properties/longhands/stroke_opacity.h",
    "$blink_core_output_dir/css/properties/longhands/stroke_width.h",
    "$blink_core_output_dir/css/properties/longhands/table_layout.h",
    "$blink_core_output_dir/css/properties/longhands/tab_size.h",
    "$blink_core_output_dir/css/properties/longhands/text_align.h",
    "$blink_core_output_dir/css/properties/longhands/text_align_last.h",
    "$blink_core_output_dir/css/properties/longhands/text_anchor.h",
    "$blink_core_output_dir/css/properties/longhands/text_combine_upright.h",
    "$blink_core_output_dir/css/properties/longhands/text_decoration_color.h",
    "$blink_core_output_dir/css/properties/longhands/text_decoration_color.cc",
    "$blink_core_output_dir/css/properties/longhands/text_decoration_line.h",
    "$blink_core_output_dir/css/properties/longhands/text_decoration_style.h",
    "$blink_core_output_dir/css/properties/longhands/text_indent.h",
    "$blink_core_output_dir/css/properties/longhands/text_justify.h",
    "$blink_core_output_dir/css/properties/longhands/text_orientation.h",
    "$blink_core_output_dir/css/properties/longhands/text_overflow.h",
    "$blink_core_output_dir/css/properties/longhands/text_rendering.h",
    "$blink_core_output_dir/css/properties/longhands/text_shadow.h",
    "$blink_core_output_dir/css/properties/longhands/text_size_adjust.h",
    "$blink_core_output_dir/css/properties/longhands/text_transform.h",
    "$blink_core_output_dir/css/properties/longhands/text_underline_position.h",
    "$blink_core_output_dir/css/properties/longhands/top.h",
    "$blink_core_output_dir/css/properties/longhands/touch_action.h",
    "$blink_core_output_dir/css/properties/longhands/transform.h",
    "$blink_core_output_dir/css/properties/longhands/transform_box.h",
    "$blink_core_output_dir/css/properties/longhands/transform_origin.h",
    "$blink_core_output_dir/css/properties/longhands/transform_style.h",
    "$blink_core_output_dir/css/properties/longhands/transition_delay.h",
    "$blink_core_output_dir/css/properties/longhands/transition_duration.h",
    "$blink_core_output_dir/css/properties/longhands/transition_property.h",
    "$blink_core_output_dir/css/properties/longhands/transition_timing_function.h",
    "$blink_core_output_dir/css/properties/longhands/translate.h",
    "$blink_core_output_dir/css/properties/longhands/unicode_bidi.h",
    "$blink_core_output_dir/css/properties/longhands/unicode_range.h",
    "$blink_core_output_dir/css/properties/longhands/user_select.h",
    "$blink_core_output_dir/css/properties/longhands/user_zoom.h",
    "$blink_core_output_dir/css/properties/longhands/vector_effect.h",
    "$blink_core_output_dir/css/properties/longhands/vertical_align.h",
    "$blink_core_output_dir/css/properties/longhands/visibility.h",
    "$blink_core_output_dir/css/properties/longhands/webkit_align_content.h",
    "$blink_core_output_dir/css/properties/longhands/webkit_align_items.h",
    "$blink_core_output_dir/css/properties/longhands/webkit_align_self.h",
    "$blink_core_output_dir/css/properties/longhands/webkit_animation_delay.h",
    "$blink_core_output_dir/css/properties/longhands/webkit_animation_direction.h",
    "$blink_core_output_dir/css/properties/longhands/webkit_animation_duration.h",
    "$blink_core_output_dir/css/properties/longhands/webkit_animation_fill_mode.h",
    "$blink_core_output_dir/css/properties/longhands/webkit_animation_iteration_count.h",
    "$blink_core_output_dir/css/properties/longhands/webkit_animation_name.h",
    "$blink_core_output_dir/css/properties/longhands/webkit_animation_play_state.h",
    "$blink_core_output_dir/css/properties/longhands/webkit_animation_timing_function.h",
    "$blink_core_output_dir/css/properties/longhands/webkit_appearance.h",
    "$blink_core_output_dir/css/properties/longhands/webkit_app_region.h",
    "$blink_core_output_dir/css/properties/longhands/webkit_backface_visibility.h",
    "$blink_core_output_dir/css/properties/longhands/webkit_background_clip.h",
    "$blink_core_output_dir/css/properties/longhands/webkit_background_origin.h",
    "$blink_core_output_dir/css/properties/longhands/webkit_background_size.h",
    "$blink_core_output_dir/css/properties/longhands/webkit_border_after_color.h",
    "$blink_core_output_dir/css/properties/longhands/webkit_border_after_style.h",
    "$blink_core_output_dir/css/properties/longhands/webkit_border_after_width.h",
    "$blink_core_output_dir/css/properties/longhands/webkit_border_before_color.h",
    "$blink_core_output_dir/css/properties/longhands/webkit_border_before_style.h",
    "$blink_core_output_dir/css/properties/longhands/webkit_border_before_width.h",
    "$blink_core_output_dir/css/properties/longhands/webkit_border_bottom_left_radius.h",
    "$blink_core_output_dir/css/properties/longhands/webkit_border_bottom_right_radius.h",
    "$blink_core_output_dir/css/properties/longhands/webkit_border_end_color.h",
    "$blink_core_output_dir/css/properties/longhands/webkit_border_end_style.h",
    "$blink_core_output_dir/css/properties/longhands/webkit_border_end_width.h",
    "$blink_core_output_dir/css/properties/longhands/webkit_border_horizontal_spacing.h",
    "$blink_core_output_dir/css/properties/longhands/webkit_border_image.h",
    "$blink_core_output_dir/css/properties/longhands/webkit_border_start_color.h",
    "$blink_core_output_dir/css/properties/longhands/webkit_border_start_style.h",
    "$blink_core_output_dir/css/properties/longhands/webkit_border_start_width.h",
    "$blink_core_output_dir/css/properties/longhands/webkit_border_top_left_radius.h",
    "$blink_core_output_dir/css/properties/longhands/webkit_border_top_right_radius.h",
    "$blink_core_output_dir/css/properties/longhands/webkit_border_vertical_spacing.h",
    "$blink_core_output_dir/css/properties/longhands/webkit_box_align.h",
    "$blink_core_output_dir/css/properties/longhands/webkit_box_decoration_break.h",
    "$blink_core_output_dir/css/properties/longhands/webkit_box_direction.h",
    "$blink_core_output_dir/css/properties/longhands/webkit_box_flex.h",
    "$blink_core_output_dir/css/properties/longhands/webkit_box_ordinal_group.h",
    "$blink_core_output_dir/css/properties/longhands/webkit_box_orient.h",
    "$blink_core_output_dir/css/properties/longhands/webkit_box_pack.h",
    "$blink_core_output_dir/css/properties/longhands/webkit_box_reflect.h",
    "$blink_core_output_dir/css/properties/longhands/webkit_box_shadow.h",
    "$blink_core_output_dir/css/properties/longhands/webkit_box_sizing.h",
    "$blink_core_output_dir/css/properties/longhands/webkit_clip_path.h",
    "$blink_core_output_dir/css/properties/longhands/webkit_column_count.h",
    "$blink_core_output_dir/css/properties/longhands/webkit_column_gap.h",
    "$blink_core_output_dir/css/properties/longhands/webkit_column_rule_color.h",
    "$blink_core_output_dir/css/properties/longhands/webkit_column_rule_style.h",
    "$blink_core_output_dir/css/properties/longhands/webkit_column_rule_width.h",
    "$blink_core_output_dir/css/properties/longhands/webkit_column_span.h",
    "$blink_core_output_dir/css/properties/longhands/webkit_column_width.h",
    "$blink_core_output_dir/css/properties/longhands/webkit_filter.h",
    "$blink_core_output_dir/css/properties/longhands/webkit_flex_basis.h",
    "$blink_core_output_dir/css/properties/longhands/webkit_flex_direction.h",
    "$blink_core_output_dir/css/properties/longhands/webkit_flex_grow.h",
    "$blink_core_output_dir/css/properties/longhands/webkit_flex_shrink.h",
    "$blink_core_output_dir/css/properties/longhands/webkit_flex_wrap.h",
    "$blink_core_output_dir/css/properties/longhands/webkit_font_feature_settings.h",
    "$blink_core_output_dir/css/properties/longhands/webkit_font_size_delta.h",
    "$blink_core_output_dir/css/properties/longhands/webkit_font_smoothing.h",
    "$blink_core_output_dir/css/properties/longhands/webkit_highlight.h",
    "$blink_core_output_dir/css/properties/longhands/webkit_hyphenate_character.h",
    "$blink_core_output_dir/css/properties/longhands/webkit_justify_content.h",
    "$blink_core_output_dir/css/properties/longhands/webkit_line_break.h",
    "$blink_core_output_dir/css/properties/longhands/webkit_line_clamp.h",
    "$blink_core_output_dir/css/properties/longhands/webkit_locale.h",
    "$blink_core_output_dir/css/properties/longhands/webkit_logical_height.h",
    "$blink_core_output_dir/css/properties/longhands/webkit_logical_width.h",
    "$blink_core_output_dir/css/properties/longhands/webkit_margin_after.h",
    "$blink_core_output_dir/css/properties/longhands/webkit_margin_after_collapse.h",
    "$blink_core_output_dir/css/properties/longhands/webkit_margin_before.h",
    "$blink_core_output_dir/css/properties/longhands/webkit_margin_before_collapse.h",
    "$blink_core_output_dir/css/properties/longhands/webkit_margin_bottom_collapse.h",
    "$blink_core_output_dir/css/properties/longhands/webkit_margin_end.h",
    "$blink_core_output_dir/css/properties/longhands/webkit_margin_start.h",
    "$blink_core_output_dir/css/properties/longhands/webkit_margin_top_collapse.h",
    "$blink_core_output_dir/css/properties/longhands/webkit_mask_box_image_outset.h",
    "$blink_core_output_dir/css/properties/longhands/webkit_mask_box_image_repeat.h",
    "$blink_core_output_dir/css/properties/longhands/webkit_mask_box_image_slice.h",
    "$blink_core_output_dir/css/properties/longhands/webkit_mask_box_image_source.h",
    "$blink_core_output_dir/css/properties/longhands/webkit_mask_box_image_width.h",
    "$blink_core_output_dir/css/properties/longhands/webkit_mask_clip.h",
    "$blink_core_output_dir/css/properties/longhands/webkit_mask_clip.cc",
    "$blink_core_output_dir/css/properties/longhands/webkit_mask_composite.h",
    "$blink_core_output_dir/css/properties/longhands/webkit_mask_composite.cc",
    "$blink_core_output_dir/css/properties/longhands/webkit_mask_image.h",
    "$blink_core_output_dir/css/properties/longhands/webkit_mask_image.cc",
    "$blink_core_output_dir/css/properties/longhands/webkit_mask_origin.h",
    "$blink_core_output_dir/css/properties/longhands/webkit_mask_origin.cc",
    "$blink_core_output_dir/css/properties/longhands/webkit_mask_position_x.h",
    "$blink_core_output_dir/css/properties/longhands/webkit_mask_position_x.cc",
    "$blink_core_output_dir/css/properties/longhands/webkit_mask_position_y.h",
    "$blink_core_output_dir/css/properties/longhands/webkit_mask_position_y.cc",
    "$blink_core_output_dir/css/properties/longhands/webkit_mask_repeat_x.h",
    "$blink_core_output_dir/css/properties/longhands/webkit_mask_repeat_x.cc",
    "$blink_core_output_dir/css/properties/longhands/webkit_mask_repeat_y.h",
    "$blink_core_output_dir/css/properties/longhands/webkit_mask_repeat_y.cc",
    "$blink_core_output_dir/css/properties/longhands/webkit_mask_size.h",
    "$blink_core_output_dir/css/properties/longhands/webkit_mask_size.cc",
    "$blink_core_output_dir/css/properties/longhands/webkit_max_logical_height.h",
    "$blink_core_output_dir/css/properties/longhands/webkit_max_logical_width.h",
    "$blink_core_output_dir/css/properties/longhands/webkit_min_logical_height.h",
    "$blink_core_output_dir/css/properties/longhands/webkit_min_logical_width.h",
    "$blink_core_output_dir/css/properties/longhands/webkit_opacity.h",
    "$blink_core_output_dir/css/properties/longhands/webkit_order.h",
    "$blink_core_output_dir/css/properties/longhands/webkit_padding_after.h",
    "$blink_core_output_dir/css/properties/longhands/webkit_padding_before.h",
    "$blink_core_output_dir/css/properties/longhands/webkit_padding_end.h",
    "$blink_core_output_dir/css/properties/longhands/webkit_padding_start.h",
    "$blink_core_output_dir/css/properties/longhands/webkit_perspective.h",
    "$blink_core_output_dir/css/properties/longhands/webkit_perspective_origin.h",
    "$blink_core_output_dir/css/properties/longhands/webkit_perspective_origin_x.h",
    "$blink_core_output_dir/css/properties/longhands/webkit_perspective_origin_y.h",
    "$blink_core_output_dir/css/properties/longhands/webkit_print_color_adjust.h",
    "$blink_core_output_dir/css/properties/longhands/webkit_rtl_ordering.h",
    "$blink_core_output_dir/css/properties/longhands/webkit_ruby_position.h",
    "$blink_core_output_dir/css/properties/longhands/webkit_shape_image_threshold.h",
    "$blink_core_output_dir/css/properties/longhands/webkit_shape_margin.h",
    "$blink_core_output_dir/css/properties/longhands/webkit_shape_outside.h",
    "$blink_core_output_dir/css/properties/longhands/webkit_tap_highlight_color.h",
    "$blink_core_output_dir/css/properties/longhands/webkit_text_combine.h",
    "$blink_core_output_dir/css/properties/longhands/webkit_text_decorations_in_effect.h",
    "$blink_core_output_dir/css/properties/longhands/webkit_text_emphasis_color.h",
    "$blink_core_output_dir/css/properties/longhands/webkit_text_emphasis_color.cc",
    "$blink_core_output_dir/css/properties/longhands/webkit_text_emphasis_position.h",
    "$blink_core_output_dir/css/properties/longhands/webkit_text_emphasis_style.h",
    "$blink_core_output_dir/css/properties/longhands/webkit_text_fill_color.h",
    "$blink_core_output_dir/css/properties/longhands/webkit_text_fill_color.cc",
    "$blink_core_output_dir/css/properties/longhands/webkit_text_orientation.h",
    "$blink_core_output_dir/css/properties/longhands/webkit_text_security.h",
    "$blink_core_output_dir/css/properties/longhands/webkit_text_size_adjust.h",
    "$blink_core_output_dir/css/properties/longhands/webkit_text_stroke_color.h",
    "$blink_core_output_dir/css/properties/longhands/webkit_text_stroke_color.cc",
    "$blink_core_output_dir/css/properties/longhands/webkit_text_stroke_width.h",
    "$blink_core_output_dir/css/properties/longhands/webkit_transform.h",
    "$blink_core_output_dir/css/properties/longhands/webkit_transform_origin.h",
    "$blink_core_output_dir/css/properties/longhands/webkit_transform_origin_x.h",
    "$blink_core_output_dir/css/properties/longhands/webkit_transform_origin_y.h",
    "$blink_core_output_dir/css/properties/longhands/webkit_transform_origin_z.h",
    "$blink_core_output_dir/css/properties/longhands/webkit_transform_style.h",
    "$blink_core_output_dir/css/properties/longhands/webkit_transition_delay.h",
    "$blink_core_output_dir/css/properties/longhands/webkit_transition_duration.h",
    "$blink_core_output_dir/css/properties/longhands/webkit_transition_property.h",
    "$blink_core_output_dir/css/properties/longhands/webkit_transition_timing_function.h",
    "$blink_core_output_dir/css/properties/longhands/webkit_user_drag.h",
    "$blink_core_output_dir/css/properties/longhands/webkit_user_modify.h",
    "$blink_core_output_dir/css/properties/longhands/webkit_user_select.h",
    "$blink_core_output_dir/css/properties/longhands/webkit_writing_mode.h",
    "$blink_core_output_dir/css/properties/longhands/white_space.h",
    "$blink_core_output_dir/css/properties/longhands/widows.h",
    "$blink_core_output_dir/css/properties/longhands/width.h",
    "$blink_core_output_dir/css/properties/longhands/will_change.h",
    "$blink_core_output_dir/css/properties/longhands/word_break.h",
    "$blink_core_output_dir/css/properties/longhands/word_spacing.h",
    "$blink_core_output_dir/css/properties/longhands/word_wrap.h",
    "$blink_core_output_dir/css/properties/longhands/writing_mode.h",
    "$blink_core_output_dir/css/properties/longhands/x.h",
    "$blink_core_output_dir/css/properties/longhands/y.h",
    "$blink_core_output_dir/css/properties/longhands/z_index.h",
    "$blink_core_output_dir/css/properties/longhands/zoom.h",
  ]
}

# FIXME: Need a better way to specify generated output files
css_properties("make_core_generated_css_shorthand_property_classes") {
  script =
      "../build/scripts/core/css/properties/make_css_property_subclasses.py"
  in_files = [ "css/properties/CSSPropertyMethods.json5" ]
  other_inputs = [ "../build/scripts/core/css/properties/templates/css_property_subclass.h.tmpl" ]
  outputs = [
    "$blink_core_output_dir/css/properties/shorthands/animation.h",
    "$blink_core_output_dir/css/properties/shorthands/background.h",
    "$blink_core_output_dir/css/properties/shorthands/background_position.h",
    "$blink_core_output_dir/css/properties/shorthands/background_repeat.h",
    "$blink_core_output_dir/css/properties/shorthands/border.h",
    "$blink_core_output_dir/css/properties/shorthands/border_bottom.h",
    "$blink_core_output_dir/css/properties/shorthands/border_color.h",
    "$blink_core_output_dir/css/properties/shorthands/border_image.h",
    "$blink_core_output_dir/css/properties/shorthands/border_left.h",
    "$blink_core_output_dir/css/properties/shorthands/border_radius.h",
    "$blink_core_output_dir/css/properties/shorthands/border_right.h",
    "$blink_core_output_dir/css/properties/shorthands/border_spacing.h",
    "$blink_core_output_dir/css/properties/shorthands/border_style.h",
    "$blink_core_output_dir/css/properties/shorthands/border_top.h",
    "$blink_core_output_dir/css/properties/shorthands/border_width.h",
    "$blink_core_output_dir/css/properties/shorthands/column_rule.h",
    "$blink_core_output_dir/css/properties/shorthands/columns.h",
    "$blink_core_output_dir/css/properties/shorthands/epub_text_emphasis.h",
    "$blink_core_output_dir/css/properties/shorthands/flex.h",
    "$blink_core_output_dir/css/properties/shorthands/flex_flow.h",
    "$blink_core_output_dir/css/properties/shorthands/font.h",
    "$blink_core_output_dir/css/properties/shorthands/font_variant.h",
    "$blink_core_output_dir/css/properties/shorthands/gap.h",
    "$blink_core_output_dir/css/properties/shorthands/grid.h",
    "$blink_core_output_dir/css/properties/shorthands/grid_area.h",
    "$blink_core_output_dir/css/properties/shorthands/grid_column.h",
    "$blink_core_output_dir/css/properties/shorthands/grid_column_gap.h",
    "$blink_core_output_dir/css/properties/shorthands/grid_row_gap.h",
    "$blink_core_output_dir/css/properties/shorthands/grid_gap.h",
    "$blink_core_output_dir/css/properties/shorthands/grid_row.h",
    "$blink_core_output_dir/css/properties/shorthands/grid_template.h",
    "$blink_core_output_dir/css/properties/shorthands/list_style.h",
    "$blink_core_output_dir/css/properties/shorthands/margin.h",
    "$blink_core_output_dir/css/properties/shorthands/marker.h",
    "$blink_core_output_dir/css/properties/shorthands/offset.h",
    "$blink_core_output_dir/css/properties/shorthands/outline.h",
    "$blink_core_output_dir/css/properties/shorthands/overflow.h",
    "$blink_core_output_dir/css/properties/shorthands/overscroll_behavior.h",
    "$blink_core_output_dir/css/properties/shorthands/padding.h",
    "$blink_core_output_dir/css/properties/shorthands/page_break_after.h",
    "$blink_core_output_dir/css/properties/shorthands/page_break_before.h",
    "$blink_core_output_dir/css/properties/shorthands/page_break_inside.h",
    "$blink_core_output_dir/css/properties/shorthands/place_content.h",
    "$blink_core_output_dir/css/properties/shorthands/place_items.h",
    "$blink_core_output_dir/css/properties/shorthands/place_self.h",
    "$blink_core_output_dir/css/properties/shorthands/scroll_margin.h",
    "$blink_core_output_dir/css/properties/shorthands/scroll_margin_block.h",
    "$blink_core_output_dir/css/properties/shorthands/scroll_margin_inline.h",
    "$blink_core_output_dir/css/properties/shorthands/scroll_padding.h",
    "$blink_core_output_dir/css/properties/shorthands/scroll_padding_block.h",
    "$blink_core_output_dir/css/properties/shorthands/scroll_padding_inline.h",
    "$blink_core_output_dir/css/properties/shorthands/text_decoration.h",
    "$blink_core_output_dir/css/properties/shorthands/transition.h",
    "$blink_core_output_dir/css/properties/shorthands/webkit_animation.h",
    "$blink_core_output_dir/css/properties/shorthands/webkit_border_after.h",
    "$blink_core_output_dir/css/properties/shorthands/webkit_border_before.h",
    "$blink_core_output_dir/css/properties/shorthands/webkit_border_end.h",
    "$blink_core_output_dir/css/properties/shorthands/webkit_border_radius.h",
    "$blink_core_output_dir/css/properties/shorthands/webkit_border_start.h",
    "$blink_core_output_dir/css/properties/shorthands/webkit_column_break_after.h",
    "$blink_core_output_dir/css/properties/shorthands/webkit_column_break_before.h",
    "$blink_core_output_dir/css/properties/shorthands/webkit_column_break_inside.h",
    "$blink_core_output_dir/css/properties/shorthands/webkit_column_rule.h",
    "$blink_core_output_dir/css/properties/shorthands/webkit_columns.h",
    "$blink_core_output_dir/css/properties/shorthands/webkit_flex.h",
    "$blink_core_output_dir/css/properties/shorthands/webkit_flex_flow.h",
    "$blink_core_output_dir/css/properties/shorthands/webkit_margin_collapse.h",
    "$blink_core_output_dir/css/properties/shorthands/webkit_mask.h",
    "$blink_core_output_dir/css/properties/shorthands/webkit_mask_box_image.h",
    "$blink_core_output_dir/css/properties/shorthands/webkit_mask_position.h",
    "$blink_core_output_dir/css/properties/shorthands/webkit_mask_repeat.h",
    "$blink_core_output_dir/css/properties/shorthands/webkit_text_emphasis.h",
    "$blink_core_output_dir/css/properties/shorthands/webkit_text_stroke.h",
    "$blink_core_output_dir/css/properties/shorthands/webkit_transition.h",
  ]
}

css_properties("make_core_generated_css_property_names") {
  script = "../build/scripts/make_css_property_names.py"
  other_inputs = [
    "../build/scripts/gperf.py",
    "../build/scripts/templates/css_property_names.cc.tmpl",
    "../build/scripts/templates/css_property_names.h.tmpl",
  ]
  outputs = [
    "$blink_core_output_dir/css_property_names.cc",
    "$blink_core_output_dir/css_property_names.h",
  ]
}

code_generator("make_core_generated_atrule_names") {
  script = "../build/scripts/core/css/parser/make_atrule_names.py"
  json_inputs = [ "css/parser/at_rule_names.json5" ]
  other_inputs = [ "../build/scripts/gperf.py" ]
  templates = [
    "../build/scripts/core/css/parser/templates/at_rule_descriptors.cc.tmpl",
    "../build/scripts/core/css/parser/templates/at_rule_descriptors.h.tmpl",
  ]
  outputs = [
    "$blink_core_output_dir/css/parser/at_rule_descriptors.cc",
    "$blink_core_output_dir/css/parser/at_rule_descriptors.h",
  ]
  other_args = [
    "--gperf",
    gperf_exe,
  ]
}

code_generator("make_core_generated_media_features") {
  script = "../build/scripts/core/css/make_media_features.py"
  json_inputs = [ "css/media_feature_names.json5" ]
  templates = [ "../build/scripts/core/css/templates/media_features.h.tmpl" ]
  outputs = [
    "$blink_core_output_dir/css/media_features.h",
  ]
}

css_properties("make_core_generated_style_property_shorthand") {
  script = "../build/scripts/core/css/make_style_shorthands.py"
  other_inputs = [
    "../build/scripts/core/css/templates/style_property_shorthand.cc.tmpl",
    "../build/scripts/core/css/templates/style_property_shorthand.h.tmpl",
  ]
  outputs = [
    "$blink_core_output_dir/style_property_shorthand.cc",
    "$blink_core_output_dir/style_property_shorthand.h",
  ]
}

css_properties("make_core_generated_cssom_types") {
  script = "../build/scripts/core/css/make_cssom_types.py"
  other_inputs = [
    "../build/scripts/core/css/templates/cssom_keywords.cc.tmpl",
    "../build/scripts/core/css/templates/cssom_types.cc.tmpl",
  ]
  outputs = [
    "$blink_core_output_dir/cssom_keywords.cc",
    "$blink_core_output_dir/cssom_types.cc",
  ]
}

code_generator("make_core_generated_css_value_keywords") {
  script = "../build/scripts/core/css/make_css_value_keywords.py"
  json_inputs = [
    "css/CSSValueKeywords.json5",
    "css/SVGCSSValueKeywords.json5",
  ]
  other_inputs = [ "../build/scripts/gperf.py" ]
  templates = [
    "../build/scripts/core/css/templates/css_value_keywords.cc.tmpl",
    "../build/scripts/core/css/templates/css_value_keywords.h.tmpl",
  ]
  outputs = [
    "$blink_core_output_dir/css_value_keywords.cc",
    "$blink_core_output_dir/css_value_keywords.h",
  ]
  other_args = [
    "--gperf",
    gperf_exe,
  ]
}

process_json5_files("make_core_generated_html_element_factory") {
  script = "../build/scripts/make_element_factory.py"

  in_files = [
    "html/aria_properties.json5",
    "html/html_tag_names.json5",
    "html/html_attribute_names.json5",
  ]
  other_inputs = make_element_factory_files
  outputs = [
    "$blink_core_output_dir/html_element_factory.cc",
    "$blink_core_output_dir/html_element_factory.h",
    "$blink_core_output_dir/html_names.cc",
    "$blink_core_output_dir/html_names.h",
  ]
}

process_json5_files("make_core_generated_html_element_type_helpers") {
  script = "../build/scripts/make_element_type_helpers.py"

  in_files = [ "html/html_tag_names.json5" ]
  other_inputs = make_element_type_helpers_files
  outputs = [
    "$blink_core_output_dir/html_element_type_helpers.cc",
    "$blink_core_output_dir/html_element_type_helpers.h",
  ]
}

process_json5_files("make_core_generated_svg_names") {
  script = "../build/scripts/make_element_factory.py"

  in_files = [
    "svg/svg_tag_names.json5",
    "svg/svg_attribute_names.json5",
  ]
  other_inputs = make_element_factory_files
  outputs = [
    "$blink_core_output_dir/svg_element_factory.cc",
    "$blink_core_output_dir/svg_element_factory.h",
    "$blink_core_output_dir/svg_names.cc",
    "$blink_core_output_dir/svg_names.h",
  ]
}

process_json5_files("make_core_generated_svg_element_type_helpers") {
  script = "../build/scripts/make_element_type_helpers.py"

  in_files = [ "svg/svg_tag_names.json5" ]
  other_inputs = make_element_type_helpers_files
  outputs = [
    "$blink_core_output_dir/svg_element_type_helpers.h",
  ]
}

# make_event_factory -----------------------------------------------------------

make_event_factory("make_core_generated_event_factory") {
  in_files = [
    "$blink_core_output_dir/event_names.json5",
    "events/event_interface_aliases.json5",
  ]
  outputs = [
    "$blink_core_output_dir/event_factory.cc",
  ]
}

# make_names -------------------------------------------------------------------

code_generator("make_core_generated_media_feature_names") {
  script = "../build/scripts/core/css/make_media_feature_names.py"
  json_inputs = [ "css/media_feature_names.json5" ]
  templates = [
    "../build/scripts/templates/make_names.cc.tmpl",
    "../build/scripts/templates/make_names.h.tmpl",
  ]
  other_inputs = make_names_files
  outputs = [
    "$blink_core_output_dir/css/media_feature_names.cc",
    "$blink_core_output_dir/css/media_feature_names.h",
  ]
}

make_names("make_core_generated_media_type_names") {
  in_files = [ "css/media_type_names.json5" ]
  output_dir = blink_core_output_dir
}

make_names("make_core_generated_event_names") {
  in_files = [ "$blink_core_output_dir/event_names.json5" ]
  output_dir = blink_core_output_dir
}

make_names("make_core_generated_event_target_names") {
  in_files = [ "events/event_target_names.json5" ]
  output_dir = blink_core_output_dir
}

make_names("make_core_generated_event_type_names") {
  in_files = [ "events/event_type_names.json5" ]
  output_dir = blink_core_output_dir
}

make_names("make_core_generated_html_tokenizer_names") {
  in_files = [ "html/parser/html_tokenizer_names.json5" ]
  output_dir = blink_core_output_dir
}

make_names("make_core_generated_input_type_names") {
  in_files = [ "html/forms/input_type_names.json5" ]
  output_dir = blink_core_output_dir
}

make_names("make_core_generated_input_mode_names") {
  in_files = [ "editing/input_mode_names.json5" ]
  output_dir = blink_core_output_dir
}

# make_qualified_names ---------------------------------------------------------

make_qualified_names("make_core_generated_math_ml_names") {
  in_files = [
    "html/parser/mathml_tag_names.json5",
    "html/parser/mathml_attribute_names.json5",
  ]
  outputs = [
    "$blink_core_output_dir/mathml_names.cc",
    "$blink_core_output_dir/mathml_names.h",
  ]
}

make_qualified_names("make_core_generated_xlink_names") {
  in_files = [ "svg/xlink_attribute_names.json5" ]
  outputs = [
    "$blink_core_output_dir/xlink_names.cc",
    "$blink_core_output_dir/xlink_names.h",
  ]
}

make_qualified_names("make_core_generated_xml_ns_names") {
  in_files = [ "xml/xmlns_attribute_names.json5" ]
  outputs = [
    "$blink_core_output_dir/xmlns_names.cc",
    "$blink_core_output_dir/xmlns_names.h",
  ]
}

make_qualified_names("make_core_generated_xml_names") {
  in_files = [ "xml/xml_attribute_names.json5" ]
  outputs = [
    "$blink_core_output_dir/xml_names.cc",
    "$blink_core_output_dir/xml_names.h",
  ]
}

# One-off scripts --------------------------------------------------------------

action("make_minimized_css") {
  script = "../build/scripts/minimize_css.py"

  inputs = [
    "css/html.css",
  ]
  outputs = [
    "$blink_core_output_dir/html.css",
  ]

  args = [
    "--output_dir",
    rel_blink_core_gen_dir,
  ]
  args += rebase_path(inputs, root_build_dir)

  deps = make_core_generated_deps
}

action("make_core_generated_html_entity_table") {
  visibility = []  # Allow re-assignment of list.
  visibility = [ ":*" ]
  script = "../build/scripts/make_html_entity_table.py"

  inputs = [
    "html/parser/html_entity_names.csv",
  ]
  outputs = [
    "$blink_core_output_dir/html_entity_table.cc",
  ]

  args = [ "-o" ] + rebase_path(outputs, root_build_dir)
  args += rebase_path(inputs, root_build_dir)

  deps = make_core_generated_deps
}

action("make_core_generated_css_tokenizer_codepoints") {
  visibility = []  # Allow re-assignment of list.
  visibility = [ ":*" ]
  script = "../build/scripts/make_css_tokenizer_codepoints.py"

  outputs = [
    "$blink_core_output_dir/css_tokenizer_codepoints.cc",
  ]

  args = [
    "--output_dir",
    rel_blink_core_gen_dir,
  ]
  if (is_mac && !use_system_xcode) {
    args += [
      "--developer_dir",
      hermetic_xcode_path,
    ]
  }

  deps = make_core_generated_deps
}

action("make_core_generated_css_primitive_value_unit_trie") {
  visibility = []  # Allow re-assignment of list.
  visibility = [ ":*" ]
  script = "../build/scripts/make_css_primitive_value_unit_trie.py"

  input_file = "css/css_primitive_value_units.json5"
  inputs = make_trie_helpers_files + [
             input_file,
             "../build/scripts/templates/css_primitive_value_unit_trie.cc.tmpl",
           ]
  outputs = [
    "$blink_core_output_dir/css_primitive_value_unit_trie.cc",
  ]

  args = [
    rebase_path(input_file, root_build_dir),
    "--output_dir",
    rel_blink_core_gen_dir,
  ]
  if (is_mac && !use_system_xcode) {
    args += [
      "--developer_dir",
      hermetic_xcode_path,
    ]
  }

  deps = make_core_generated_deps
}

action("make_core_generated_html_element_lookup_trie") {
  visibility = []  # Allow re-assignment of list.
  visibility = [ ":*" ]
  script = "../build/scripts/make_element_lookup_trie.py"

  input_file = "html/html_tag_names.json5"
  inputs = make_trie_helpers_files + [
             input_file,
             "../build/scripts/templates/element_lookup_trie.cc.tmpl",
             "../build/scripts/templates/element_lookup_trie.h.tmpl",
           ]
  outputs = [
    "$blink_core_output_dir/html_element_lookup_trie.cc",
    "$blink_core_output_dir/html_element_lookup_trie.h",
  ]

  args = [
    rebase_path(input_file, root_build_dir),
    "--output_dir",
    rel_blink_core_gen_dir,
  ]
  if (is_mac && !use_system_xcode) {
    args += [
      "--developer_dir",
      hermetic_xcode_path,
    ]
  }

  deps = make_core_generated_deps
}

action("make_core_generated_origin_trials") {
  script = "../build/scripts/make_origin_trials.py"

  inputs = scripts_for_json5_files + [
             "../build/scripts/make_origin_trials.py",
             "../platform/runtime_enabled_features.json5",
             "../build/scripts/templates/origin_trials.cc.tmpl",
             "../build/scripts/templates/origin_trials.h.tmpl",
           ]
  outputs = [
    "$blink_core_output_dir/origin_trials/origin_trials.cc",
    "$blink_core_output_dir/origin_trials/origin_trials.h",
  ]

  args = [
    rebase_path("../platform/runtime_enabled_features.json5", root_build_dir),
    "--output_dir",
    "$rel_blink_core_gen_dir/origin_trials",
  ]
  if (is_mac && !use_system_xcode) {
    args += [
      "--developer_dir",
      hermetic_xcode_path,
    ]
  }
}
action("make_core_generated_web_origin_trials") {
  script = "../build/scripts/make_web_origin_trials.py"

  inputs = scripts_for_json5_files + [
             "../build/scripts/make_web_origin_trials.py",
             "../platform/runtime_enabled_features.json5",
             "../build/scripts/templates/web_origin_trials.cc.tmpl",
           ]
  outputs = [
    "$blink_core_output_dir/exported/web_origin_trials.cc",
  ]

  args = [
    rebase_path("../platform/runtime_enabled_features.json5", root_build_dir),
    "--output_dir",
    "$rel_blink_core_gen_dir/exported",
  ]
  if (is_mac && !use_system_xcode) {
    args += [
      "--developer_dir",
      hermetic_xcode_path,
    ]
  }
}

action_foreach("make_core_generated_bison") {
  script = "../build/scripts/rule_bison.py"
  sources = [
    "xml/xpath_grammar.y",
  ]
  outputs = [
    "$blink_core_output_dir/{{source_name_part}}.cc",
    "$blink_core_output_dir/{{source_name_part}}.h",
  ]
  args = [
    "{{source}}",
    rel_blink_core_gen_dir,
    bison_exe,
  ]
  if (is_mac && !use_system_xcode) {
    args += [ hermetic_xcode_path ]
  }

  deps = make_core_generated_deps
}

# Targets from above that generate outputs that need to be compiled.
# All sources declared as outputs from these targets will be compiled into one
# target.
targets_generating_sources = [
  ":make_core_generated_atrule_names",
  ":make_core_generated_bison",
  ":make_core_generated_css_primitive_value_unit_trie",
  ":make_core_generated_computed_style_initial_values",
  ":make_core_generated_computed_style_base",
  ":make_core_generated_css_value_id_mappings",
  ":make_core_generated_css_property_baseclass",
  ":make_core_generated_css_longhand_property_classes",
  ":make_core_generated_css_shorthand_property_classes",
  ":make_core_generated_css_property_names",
  ":make_core_generated_css_value_id_mappings",
  ":make_core_generated_cssom_types",
  ":make_core_generated_event_factory",
  ":make_core_generated_event_names",
  ":make_core_generated_event_target_names",
  ":make_core_generated_event_type_names",
  ":make_core_generated_html_element_factory",
  ":make_core_generated_html_element_lookup_trie",
  ":make_core_generated_html_entity_table",
  ":make_core_generated_html_tokenizer_names",
  ":make_core_generated_input_mode_names",
  ":make_core_generated_input_type_names",
  ":make_core_generated_math_ml_names",
  ":make_core_generated_media_feature_names",
  ":make_core_generated_media_type_names",
  ":make_core_generated_origin_trials",
  ":make_core_generated_style_property_shorthand",
  ":make_core_generated_svg_names",
  ":make_core_generated_web_origin_trials",
  ":make_core_generated_xlink_names",
  ":make_core_generated_xml_names",
  ":make_core_generated_xml_ns_names",
  ":make_core_generated_html_element_type_helpers",
  ":make_core_generated_css_value_keywords",
  ":make_core_generated_media_features",
  ":make_core_generated_svg_element_type_helpers",
]

group("all_generators") {
  public_deps = targets_generating_sources
  public_deps += [
    # This target's generated source is #included into another source file.
    # So we don't want to list it in the "generating sources" list above,
    # but it does need to be listed as a dependency here.
    ":make_core_generated_css_tokenizer_codepoints",
  ]
}

# Compiles the code generated by the targets above.
target("jumbo_" + core_link_small_target_type, "core_generated") {
  sources = bindings_core_v8_files

  # Add all sources generated by the targets above.
  foreach(current, targets_generating_sources) {
    sources += get_target_outputs(current)
  }
  public_deps = [
    ":all_generators",
    "//third_party/blink/renderer/bindings/core/v8:bindings_core_impl",
  ]

  configs -= core_config_remove
  configs += core_config_add + [ "..:inside_blink" ]

  # Dependencies required to compile the sources.
  public_deps += [
    ":prerequisites",
    "//gin",
    "//skia",
    "//third_party/blink/renderer/bindings/core/v8:bindings_core_v8_generated",
    "//third_party/iccjpeg",
    "//third_party/libpng",
    "//third_party/libwebp",
    "//third_party/libxml",
    "//third_party/libxslt",

    # FIXME: don't depend on bindings/modules http://crbug.com/358074
    "//third_party/blink/renderer/bindings/modules:bindings_modules_generated",
    "//third_party/blink/renderer/bindings/modules/v8:bindings_modules_v8_generated",
    "//third_party/blink/renderer/platform:make_platform_generated",
    "//third_party/blink/renderer/platform/wtf",
    "//url",
    "//v8",
  ]

  configs += [
    ":core_include_dirs",
    "//tools/v8_context_snapshot:use_v8_context_snapshot",
  ]

  cflags = []
  defines = []

  if (is_win && is_component_build) {
    defines += [ "USING_V8_SHARED" ]
  }

  if (is_win) {
    cflags += [
      # In generated bindings code: "switch contains default but no case".
      # 4701 and 4702 are disabled because of issues in Bison-generated
      # XPathGrammar.cpp.
      "/wd4065",
      "/wd4701",
      "/wd4702",
    ]
  }
}

# Fuzzer for blink::TextResourceDecoder.
fuzzer_test("text_resource_decoder_fuzzer") {
  sources = [
    "html/parser/text_resource_decoder_for_fuzzing.h",
    "html/parser/text_resource_decoder_fuzzer.cc",
  ]
  deps = [
    ":core",
    "../platform:blink_fuzzer_test_support",
  ]
}

jumbo_source_set("unit_tests") {
  testonly = true
  sources = [
    "animation/animation_clock_test.cc",
    "animation/animation_effect_test.cc",
    "animation/animation_input_helpers_test.cc",
    "animation/animation_sim_test.cc",
    "animation/animation_test.cc",
    "animation/animation_test_helper.cc",
    "animation/animation_test_helper.h",
    "animation/compositor_animations_test.cc",
    "animation/css/css_animations_test.cc",
    "animation/css/css_transition_data_test.cc",
    "animation/document_timeline_test.cc",
    "animation/effect_input_test.cc",
    "animation/effect_stack_test.cc",
    "animation/interpolable_value_test.cc",
    "animation/interpolation_effect_test.cc",
    "animation/keyframe_effect_model_test.cc",
    "animation/keyframe_effect_test.cc",
    "animation/property_handle_test.cc",
    "animation/scroll_timeline_test.cc",
    "animation/timing_calculations_test.cc",
    "animation/timing_input_test.cc",
    "clipboard/data_object_test.cc",
    "clipboard/data_transfer_test.cc",
    "css/active_style_sheets_test.cc",
    "css/affected_by_pseudo_test.cc",
    "css/css_calculation_value_test.cc",
    "css/css_computed_style_declaration_test.cc",
    "css/css_font_face_source_test.cc",
    "css/css_gradient_value_test.cc",
    "css/css_page_rule_test.cc",
    "css/css_paint_value_test.cc",
    "css/css_selector_test.cc",
    "css/css_selector_watch_test.cc",
    "css/css_style_declaration_test.cc",
    "css/css_style_sheet_test.cc",
    "css/css_test_helper.cc",
    "css/css_test_helper.h",
    "css/css_value_test_helper.h",
    "css/cssom/css_math_invert_test.cc",
    "css/cssom/css_math_negate_test.cc",
    "css/cssom/css_numeric_value_type_test.cc",
    "css/cssom/css_resource_value_test.cc",
    "css/cssom/css_style_image_value_test.cc",
    "css/cssom/css_unit_value_test.cc",
    "css/cssom/css_unparsed_value_test.cc",
    "css/cssom/prepopulated_computed_style_property_map_test.cc",
    "css/drag_update_test.cc",
    "css/font_face_cache_test.cc",
    "css/invalidation/invalidation_set_test.cc",
    "css/invalidation/pending_invalidations_test.cc",
    "css/media_query_evaluator_test.cc",
    "css/media_query_list_test.cc",
    "css/media_query_matcher_test.cc",
    "css/media_query_set_test.cc",
    "css/media_values_initial_viewport_test.cc",
    "css/media_values_test.cc",
    "css/parser/css_lazy_parsing_test.cc",
    "css/parser/css_parser_fast_paths_test.cc",
    "css/parser/css_parser_token_stream_test.cc",
    "css/parser/css_parser_token_test.cc",
    "css/parser/css_property_parser_test.cc",
    "css/parser/css_selector_parser_test.cc",
    "css/parser/css_tokenizer_test.cc",
    "css/parser/media_condition_test.cc",
    "css/parser/sizes_attribute_parser_test.cc",
    "css/parser/sizes_calc_parser_test.cc",
    "css/properties/css_parsing_utils_test.cc",
    "css/resolver/css_variable_data_test.cc",
    "css/resolver/css_variable_resolver_test.cc",
    "css/resolver/font_builder_test.cc",
    "css/resolver/font_style_resolver_test.cc",
    "css/resolver/match_result_test.cc",
    "css/resolver/style_adjuster_test.cc",
    "css/rule_feature_set_test.cc",
    "css/rule_set_test.cc",
    "css/selector_query_test.cc",
    "css/style_element_test.cc",
    "css/style_engine_test.cc",
    "css/style_environment_variables_test.cc",
    "css/style_sheet_contents_test.cc",
    "css/threaded/css_parser_threaded_test.cc",
    "css/threaded/css_to_length_conversion_data_threaded_test.cc",
    "css/threaded/filter_operation_resolver_threaded_test.cc",
    "css/threaded/font_object_threaded_test.cc",
    "css/threaded/text_renderer_threaded_test.cc",
    "dom/attr_test.cc",
    "dom/document_statistics_collector_test.cc",
    "dom/document_test.cc",
    "dom/dom_implementation_test.cc",
    "dom/element_test.cc",
    "dom/element_visibility_observer_test.cc",
    "dom/events/event_path_test.cc",
    "dom/events/event_target_test.cc",
    "dom/events/listener_leak_test.cc",
    "dom/first_letter_pseudo_element_test.cc",
    "dom/flat_tree_traversal_test.cc",
    "dom/idle_deadline_test.cc",
    "dom/layout_tree_builder_traversal_test.cc",
    "dom/live_node_list_registry_test.cc",
    "dom/mutation_observer_test.cc",
    "dom/names_map_test.cc",
    "dom/node_test.cc",
    "dom/nth_index_cache_test.cc",
    "dom/pausable_object_test.cc",
    "dom/range_test.cc",
    "dom/scripted_animation_controller_test.cc",
    "dom/scripted_idle_task_controller_test.cc",
    "dom/shadow_dom_v0_test.cc",
    "dom/slot_assignment_test.cc",
    "dom/space_split_string_test.cc",
    "dom/static_range_test.cc",
    "dom/text_test.cc",
    "dom/tree_scope_adopter_test.cc",
    "dom/tree_scope_test.cc",
    "dom/user_gesture_indicator_test.cc",
    "dom/whitespace_attacher_test.cc",
    "editing/caret_display_item_client_test.cc",
    "editing/finder/text_finder_test.cc",
    "editing/keyboard_test.cc",
    "editing/link_selection_test.cc",
    "events/pointer_event_factory_test.cc",
    "events/touch_event_test.cc",
    "events/web_input_event_conversion_test.cc",
    "exported/fake_web_plugin.cc",
    "exported/fake_web_plugin.h",
    "exported/local_frame_client_impl_test.cc",
    "exported/prerendering_test.cc",
    "exported/web_associated_url_loader_impl_test.cc",
    "exported/web_document_subresource_filter_test.cc",
    "exported/web_document_test.cc",
    "exported/web_drag_data_test.cc",
    "exported/web_element_test.cc",
    "exported/web_frame_serializer_sanitization_test.cc",
    "exported/web_frame_serializer_test.cc",
    "exported/web_frame_test.cc",
    "exported/web_meaningful_layouts_test.cc",
    "exported/web_node_test.cc",
    "exported/web_plugin_container_test.cc",
    "exported/web_range_test.cc",
    "exported/web_scoped_window_focus_allowed_indicator_test.cc",
    "exported/web_searchable_form_data_test.cc",
    "exported/web_selector_test.cc",
    "exported/web_surrounding_text_test.cc",
    "exported/web_user_gesture_token_test.cc",
    "exported/web_view_test.cc",
    "fetch/blob_bytes_consumer_test.cc",
    "fetch/body_stream_buffer_test.cc",
    "fetch/bytes_consumer_for_data_consumer_handle_test.cc",
    "fetch/bytes_consumer_test.cc",
    "fetch/bytes_consumer_test_util.cc",
    "fetch/bytes_consumer_test_util.h",
    "fetch/data_consumer_handle_test_util.cc",
    "fetch/data_consumer_handle_test_util.h",
    "fetch/fetch_data_loader_test.cc",
    "fetch/fetch_header_list_test.cc",
    "fetch/fetch_response_data_test.cc",
    "fetch/form_data_bytes_consumer_test.cc",
    "fetch/multipart_parser_test.cc",
    "fetch/readable_stream_bytes_consumer_test.cc",
    "fetch/request_test.cc",
    "fetch/response_test.cc",
    "frame/ad_tracker_test.cc",
    "frame/browser_controls_test.cc",
    "frame/csp/content_security_policy_test.cc",
    "frame/csp/csp_directive_list_test.cc",
    "frame/csp/csp_source_test.cc",
    "frame/csp/media_list_directive_test.cc",
    "frame/csp/source_list_directive_test.cc",
    "frame/deferred_loading_test.cc",
    "frame/document_loading_rendering_test.cc",
    "frame/dom_timer_test.cc",
    "frame/find_in_page_test.cc",
    "frame/frame_serializer_test.cc",
    "frame/frame_test.cc",
    "frame/frame_test_helpers.cc",
    "frame/frame_test_helpers.h",
    "frame/history_test.cc",
    "frame/local_frame_test.cc",
    "frame/local_frame_view_test.cc",
    "frame/mhtml_archive_test.cc",
    "frame/mhtml_loading_test.cc",
    "frame/origins_using_features_test.cc",
    "frame/performance_monitor_test.cc",
    "frame/root_frame_viewport_test.cc",
    "frame/rotation_viewport_anchor_test.cc",
    "frame/use_counter_test.cc",
    "frame/visual_viewport_test.cc",
    "geometry/dom_matrix_test.cc",
    "html/anchor_element_metrics_test.cc",
    "html/canvas/canvas_async_blob_creator_test.cc",
    "html/canvas/canvas_font_cache_test.cc",
    "html/canvas/image_data_test.cc",
    "html/custom/custom_element_definition_test.cc",
    "html/custom/custom_element_descriptor_test.cc",
    "html/custom/custom_element_reaction_queue_test.cc",
    "html/custom/custom_element_reaction_stack_test.cc",
    "html/custom/custom_element_reaction_test_helpers.h",
    "html/custom/custom_element_registry_test.cc",
    "html/custom/custom_element_test.cc",
    "html/custom/custom_element_test_helpers.cc",
    "html/custom/custom_element_test_helpers.h",
    "html/custom/custom_element_upgrade_sorter_test.cc",
    "html/forms/email_input_type_test.cc",
    "html/forms/external_popup_menu_test.cc",
    "html/forms/file_input_type_test.cc",
    "html/forms/form_data_test.cc",
    "html/forms/html_form_control_element_test.cc",
    "html/forms/html_form_element_test.cc",
    "html/forms/html_input_element_test.cc",
    "html/forms/html_output_element_test.cc",
    "html/forms/html_select_element_test.cc",
    "html/forms/html_text_area_element_test.cc",
    "html/forms/option_list_test.cc",
    "html/forms/password_input_type_test.cc",
    "html/forms/step_range_test.cc",
    "html/forms/text_control_element_test.cc",
    "html/forms/type_ahead_test.cc",
    "html/html_content_element_test.cc",
    "html/html_dimension_test.cc",
    "html/html_element_test.cc",
    "html/html_embed_element_test.cc",
    "html/html_frame_element_test.cc",
    "html/html_iframe_element_test.cc",
    "html/html_image_element_test.cc",
    "html/html_link_element_sizes_attribute_test.cc",
    "html/html_link_element_test.cc",
    "html/html_meta_element_test.cc",
    "html/html_object_element_test.cc",
    "html/html_slot_element_test.cc",
    "html/html_table_row_element_test.cc",
    "html/image_document_test.cc",
    "html/imports/html_import_sheets_test.cc",
    "html/lazy_load_frame_observer_test.cc",
    "html/link_element_loading_test.cc",
    "html/link_rel_attribute_test.cc",
    "html/list_item_ordinal_test.cc",
    "html/media/autoplay_uma_helper_test.cc",
    "html/media/html_media_element_event_listeners_test.cc",
    "html/media/html_media_element_test.cc",
    "html/media/html_video_element_persistent_test.cc",
    "html/media/html_video_element_test.cc",
    "html/media/media_custom_controls_fullscreen_detector_test.cc",
    "html/media_element_filling_viewport_test.cc",
    "html/parser/atomic_html_token_test.cc",
    "html/parser/compact_html_token_test.cc",
    "html/parser/css_preload_scanner_test.cc",
    "html/parser/html_document_parser_loading_test.cc",
    "html/parser/html_document_parser_test.cc",
    "html/parser/html_entity_parser_test.cc",
    "html/parser/html_parser_idioms_test.cc",
    "html/parser/html_preload_scanner_test.cc",
    "html/parser/html_resource_preloader_test.cc",
    "html/parser/html_srcset_parser_test.cc",
    "html/parser/html_tokenizer_test.cc",
    "html/parser/html_tree_builder_simulator_test.cc",
    "html/parser/html_view_source_parser_test.cc",
    "html/parser/text_resource_decoder_test.cc",
    "html/shadow/progress_shadow_element_test.cc",
    "html/time_ranges_test.cc",
    "html/track/text_track_list_test.cc",
    "html/track/vtt/buffered_line_reader_test.cc",
    "html/track/vtt/vtt_scanner_test.cc",
    "imagebitmap/image_bitmap_test.cc",
    "input/event_handler_test.cc",
    "input/ime_on_focus_test.cc",
    "input/overscroll_behavior_test.cc",
    "input/pointer_event_manager_test.cc",
    "input/scroll_snap_test.cc",
    "input/touch_action_test.cc",
    "input/touch_event_manager_test.cc",
    "inspector/inspector_session_state_test.cc",
    "inspector/main_thread_debugger_test.cc",
    "inspector/protocol_parser_test.cc",
    "intersection_observer/intersection_observer_test.cc",
    "layout/api/selection_state_test.cc",
    "layout/collapsed_border_value_test.cc",
    "layout/custom/layout_worklet_test.cc",
    "layout/grid_test.cc",
    "layout/jank_tracker_test.cc",
    "layout/layout_block_test.cc",
    "layout/layout_box_model_object_test.cc",
    "layout/layout_box_test.cc",
    "layout/layout_count_test.cc",
    "layout/layout_embedded_content_test.cc",
    "layout/layout_geometry_map_test.cc",
    "layout/layout_image_test.cc",
    "layout/layout_inline_test.cc",
    "layout/layout_media_test.cc",
    "layout/layout_multi_column_flow_thread_test.cc",
    "layout/layout_object_test.cc",
    "layout/layout_progress_test.cc",
    "layout/layout_replaced_test.cc",
    "layout/layout_table_cell_test.cc",
    "layout/layout_table_col_test.cc",
    "layout/layout_table_row_test.cc",
    "layout/layout_table_section_test.cc",
    "layout/layout_table_test.cc",
    "layout/layout_text_control_test.cc",
    "layout/layout_text_fragment_test.cc",
    "layout/layout_text_test.cc",
    "layout/layout_theme_test.cc",
    "layout/layout_view_test.cc",
    "layout/line/inline_text_box_test.cc",
    "layout/line/line_orientation_utils_test.cc",
    "layout/map_coordinates_test.cc",
    "layout/min_max_size_test.cc",
    "layout/multi_column_fragmentainer_group_test.cc",
    "layout/ng/exclusions/ng_exclusion_space_test.cc",
    "layout/ng/geometry/ng_box_strut_test.cc",
    "layout/ng/geometry/ng_logical_offset_test.cc",
    "layout/ng/geometry/ng_logical_rect_test.cc",
    "layout/ng/geometry/ng_physical_offset_rect_test.cc",
    "layout/ng/geometry/ng_physical_offset_test.cc",
    "layout/ng/geometry/ng_physical_rect_test.cc",
    "layout/ng/inline/ng_caret_position_test.cc",
    "layout/ng/inline/ng_inline_fragment_traversal_test.cc",
    "layout/ng/inline/ng_inline_items_builder_test.cc",
    "layout/ng/inline/ng_inline_layout_algorithm_test.cc",
    "layout/ng/inline/ng_inline_node_test.cc",
    "layout/ng/inline/ng_line_breaker_test.cc",
    "layout/ng/inline/ng_offset_mapping_test.cc",
    "layout/ng/inline/ng_physical_line_box_fragment_test.cc",
    "layout/ng/inline/ng_physical_text_fragment_test.cc",
    "layout/ng/ng_absolute_utils_test.cc",
    "layout/ng/ng_base_layout_algorithm_test.cc",
    "layout/ng/ng_base_layout_algorithm_test.h",
    "layout/ng/ng_block_child_iterator_test.cc",
    "layout/ng/ng_block_layout_algorithm_test.cc",
    "layout/ng/ng_block_node_test.cc",
    "layout/ng/ng_column_layout_algorithm_test.cc",
    "layout/ng/ng_constraint_space_builder_test.cc",
    "layout/ng/ng_inline_layout_test.cc",
    "layout/ng/ng_layout_test.h",
    "layout/ng/ng_length_utils_test.cc",
    "layout/ng/ng_out_of_flow_layout_part_test.cc",
    "layout/ng/ng_physical_box_fragment_test.cc",
    "layout/ng/ng_relative_utils_test.cc",
    "layout/overflow_model_test.cc",
    "layout/pagination_test.cc",
    "layout/paint_containment_test.cc",
    "layout/scroll_anchor_test.cc",
    "layout/scrollbars_test.cc",
    "layout/shapes/box_shape_test.cc",
    "layout/svg/layout_svg_foreign_object_test.cc",
    "layout/svg/layout_svg_root_test.cc",
    "layout/text_autosizer_test.cc",
    "layout/visual_rect_mapping_test.cc",
    "loader/allowed_by_nosniff_test.cc",
    "loader/base_fetch_context_test.cc",
    "loader/document_load_timing_test.cc",
    "loader/document_loader_test.cc",
    "loader/frame_fetch_context_test.cc",
    "loader/idleness_detector_test.cc",
    "loader/interactive_detector_test.cc",
    "loader/link_loader_test.cc",
    "loader/long_task_detector_test.cc",
    "loader/mixed_content_checker_test.cc",
    "loader/modulescript/module_script_loader_test.cc",
    "loader/modulescript/module_tree_linker_test.cc",
    "loader/navigation_policy_test.cc",
    "loader/ping_loader_test.cc",
    "loader/previews_resource_loading_hints_test.cc",
    "loader/programmatic_scroll_test.cc",
    "loader/progress_tracker_test.cc",
    "loader/resource/css_style_sheet_resource_test.cc",
    "loader/resource/font_resource_test.cc",
    "loader/resource/image_resource_test.cc",
    "loader/resource/mock_font_resource_client.cc",
    "loader/resource/mock_font_resource_client.h",
    "loader/resource/mock_image_resource_observer.cc",
    "loader/resource/mock_image_resource_observer.h",
    "loader/resource/multipart_image_resource_parser_test.cc",
    "loader/text_resource_decoder_builder_test.cc",
    "loader/threadable_loader_test.cc",
    "messaging/blink_transferable_message_struct_traits_test.cc",
    "origin_trials/origin_trial_context_test.cc",
    "page/autoscroll_controller_test.cc",
    "page/chrome_client_impl_test.cc",
    "page/chrome_client_test.cc",
    "page/context_menu_controller_test.cc",
    "page/drag_controller_test.cc",
    "page/focus_controller_test.cc",
    "page/page_overlay_test.cc",
    "page/page_popup_client_test.cc",
    "page/print_context_test.cc",
    "page/scrolling/root_scroller_test.cc",
    "page/scrolling/scroll_into_view_test.cc",
    "page/scrolling/scroll_metrics_test.cc",
    "page/scrolling/scroll_state_test.cc",
    "page/scrolling/scrolling_coordinator_test.cc",
    "page/scrolling/snap_coordinator_test.cc",
    "page/slot_scoped_traversal_test.cc",
    "page/spatial_navigation_test.cc",
    "page/viewport_test.cc",
    "page/window_features_test.cc",
    "paint/block_painter_test.cc",
    "paint/box_paint_invalidator_test.cc",
    "paint/clip_path_clipper_test.cc",
    "paint/clip_rect_test.cc",
    "paint/compositing/composited_layer_mapping_test.cc",
    "paint/compositing/compositing_inputs_updater_test.cc",
    "paint/compositing/compositing_layer_assigner_test.cc",
    "paint/compositing/compositing_layer_property_updater_test.cc",
    "paint/compositing/compositing_reason_finder_test.cc",
    "paint/compositing/compositing_requirements_updater_test.cc",
    "paint/compositing/paint_layer_compositor_test.cc",
    "paint/css_mask_painter_test.cc",
    "paint/first_meaningful_paint_detector_test.cc",
    "paint/fragment_data_test.cc",
    "paint/html_canvas_painter_test.cc",
    "paint/link_highlight_impl_test.cc",
    "paint/ng/ng_paint_fragment_test.cc",
    "paint/ng/ng_paint_fragment_traversal_test.cc",
    "paint/ng/ng_text_fragment_painter_test.cc",
    "paint/nine_piece_image_grid_test.cc",
    "paint/object_paint_invalidator_test.cc",
    "paint/paint_and_raster_invalidation_test.cc",
    "paint/paint_and_raster_invalidation_test.h",
    "paint/paint_controller_paint_test.cc",
    "paint/paint_controller_paint_test.h",
    "paint/paint_layer_clipper_test.cc",
    "paint/paint_layer_painter_test.cc",
    "paint/paint_layer_scrollable_area_test.cc",
    "paint/paint_layer_test.cc",
    "paint/paint_property_tree_builder_test.cc",
    "paint/paint_property_tree_builder_test.h",
    "paint/paint_property_tree_printer_test.cc",
    "paint/paint_property_tree_update_tests.cc",
    "paint/pre_paint_tree_walk_test.cc",
    "paint/stub_chrome_client_for_spv2.h",
    "paint/table_painter_test.cc",
    "paint/text_painter_test.cc",
    "paint/text_selection_repaint_test.cc",
    "paint/video_painter_test.cc",
    "paint/view_painter_test.cc",
    "policy/policy_test.cc",
    "resize_observer/resize_observer_test.cc",
    "scheduler/active_connection_throttling_test.cc",
    "scheduler/frame_scheduler_test.cc",
    "scheduler/frame_throttling_test.cc",
    "scheduler/throttling_test.cc",
    "scheduler/virtual_time_test.cc",
    "script/document_modulator_impl_test.cc",
    "script/dynamic_module_resolver_test.cc",
    "script/layered_api_test.cc",
    "script/mock_script_element_base.h",
    "script/module_map_test.cc",
    "script/script_module_resolver_impl_test.cc",
    "script/script_runner_test.cc",
    "scroll/scrollable_area_test.cc",
    "scroll/scrollbar_theme_overlay_test.cc",
    "streams/readable_stream_operations_test.cc",
    "style/border_value_test.cc",
    "style/computed_style_test.cc",
    "style/filter_operations_test.cc",
    "style/style_difference_test.cc",
    "style/svg_computed_style_test.cc",
    "svg/graphics/svg_image_test.cc",
    "svg/svg_path_parser_test.cc",
    "svg/svg_text_content_element_test.cc",
    "svg/unsafe_svg_attribute_sanitization_test.cc",
    "testing/sim/sim_canvas.cc",
    "testing/sim/sim_canvas.h",
    "testing/sim/sim_compositor.cc",
    "testing/sim/sim_compositor.h",
    "testing/sim/sim_network.cc",
    "testing/sim/sim_network.h",
    "testing/sim/sim_page.cc",
    "testing/sim/sim_page.h",
    "testing/sim/sim_request.cc",
    "testing/sim/sim_request.h",
    "testing/sim/sim_test.cc",
    "testing/sim/sim_test.h",
    "testing/sim/sim_web_frame_client.cc",
    "testing/sim/sim_web_frame_client.h",
    "testing/sim/sim_web_view_client.cc",
    "testing/sim/sim_web_view_client.h",
    "timing/memory_info_test.cc",
    "timing/performance_navigation_timing_test.cc",
    "timing/performance_observer_test.cc",
    "timing/performance_resource_timing_test.cc",
    "timing/performance_test.cc",
    "timing/window_performance_test.cc",
    "url/url_search_params_test.cc",
    "workers/dedicated_worker_test.cc",
    "workers/main_thread_worklet_test.cc",
    "workers/threaded_worklet_test.cc",
    "workers/worker_fetch_test_helper.h",
    "workers/worker_thread_test.cc",
    "workers/worker_thread_test_helper.h",
    "workers/worklet_module_responses_map_test.cc",
    "xml/parser/shared_buffer_reader_test.cc",
    "xml/xpath_functions_test.cc",
  ]

  configs += [
    ":blink_core_pch",
    "//third_party/blink/renderer:config",
    "//third_party/blink/renderer:inside_blink",
  ]

  deps = [
    ":core",
    ":unit_test_support",
    "//mojo/public/cpp/system",
    "//testing/gmock",
    "//testing/gtest",
    "//third_party/blink/renderer/core/editing:unit_tests",
    "//third_party/blink/renderer/core/fileapi:unit_tests",
  ]

  # FIXME: Enable mojo unittests on Android after fixing data dependency.
  # crbug.com/741925
  if (!is_android) {
    deps += [ "//third_party/blink/renderer/core/mojo:unit_tests" ]
  }

  if (!is_mac) {
    sources += [ "scroll/scroll_animator_test.cc" ]
  }

  if (use_default_render_theme) {
    sources += [ "scroll/scrollbar_theme_aura_test.cc" ]
  }
}

jumbo_source_set("perf_tests") {
  testonly = true
  sources = [
    "layout/visual_rect_mapping_perftest.cc",
  ]

  configs += [
    ":blink_core_pch",
    "//third_party/blink/renderer:config",
    "//third_party/blink/renderer:inside_blink",
  ]

  deps = [
    ":core",
    ":unit_test_support",
    "//mojo/public/cpp/system",
    "//testing/gmock",
    "//testing/gtest",
  ]
}

jumbo_source_set("unit_test_support") {
  testonly = true
  sources = [
    "testing/core_unit_test_helper.cc",
    "testing/core_unit_test_helper.h",
    "testing/page_test_base.cc",
    "testing/page_test_base.h",
  ]

  configs += [
    ":blink_core_pch",
    "//third_party/blink/renderer:config",
    "//third_party/blink/renderer:inside_blink",
  ]

  deps = [
    ":core",
    "//testing/gmock",
    "//testing/gtest",
  ]
}

# Fuzzer for blink::StyleSheetContents
fuzzer_test("stylesheet_contents_fuzzer") {
  sources = [
    "css/style_sheet_contents_fuzzer.cc",
  ]
  deps = [
    ":core",
    "../platform:blink_fuzzer_test_support",
  ]
  dict = "//third_party/blink/renderer/core/css/css.dict"
  seed_corpus = "//third_party/WebKit/LayoutTests/fast/css/resources"
  libfuzzer_options = [ "max_len=1024" ]
}

# Fuzzer for blink::CSSParserFastPaths
fuzzer_test("css_parser_fast_paths_fuzzer") {
  sources = [
    "css/parser/css_parser_fast_paths_fuzzer.cc",
  ]
  deps = [
    ":core",
    "../platform:blink_fuzzer_test_support",
  ]
  dict = "//third_party/blink/renderer/core/css/css.dict"
  libfuzzer_options = [ "max_len=128" ]
}

# Fuzzer for blink::HTMLPreloadScanner.
fuzzer_test("html_preload_scanner_fuzzer") {
  sources = [
    "html/parser/html_preload_scanner_fuzzer.cc",
    "html/parser/text_resource_decoder_for_fuzzing.h",
  ]
  seed_corpus = "//third_party/WebKit/LayoutTests/fast/parser"
  deps = [
    ":core",
    "../platform:blink_fuzzer_test_support",
  ]
}

# Fuzzer for blink::ContentSecurityPolicy.
fuzzer_test("content_security_policy_fuzzer") {
  sources = [
    "frame/csp/content_security_policy_fuzzer.cc",
  ]
  deps = [
    ":core",
    "//third_party/blink/renderer/platform:blink_fuzzer_test_support",
  ]
  dict = "//testing/libfuzzer/fuzzers/dicts/content_security_policy.dict"
  seed_corpus = "//testing/libfuzzer/fuzzers/content_security_policy_corpus"
}

# Since libFuzzer isn't working on Windows, and the proto_library cannot build
# on Windows because of a build error, prevent it from being built on Windows.
# TODO(metzman): Figure out how to get this building on Windows.
if (!is_win) {
  fuzzer_test("css_parser_proto_fuzzer") {
    sources = [
      "css/parser/css_parser_proto_fuzzer.cc",
      "css/parser/css_proto_converter.cc",
      "css/parser/css_proto_converter.h",
    ]
    deps = [
      ":core",
      ":css_proto",
      "//third_party/blink/renderer/platform:blink_fuzzer_test_support",
      "//third_party/libprotobuf-mutator",
    ]
    dict = "//third_party/blink/renderer/core/css/css.dict"
  }

  proto_library("css_proto") {
    sources = [
      "css/parser/css.proto",
    ]
  }
}
